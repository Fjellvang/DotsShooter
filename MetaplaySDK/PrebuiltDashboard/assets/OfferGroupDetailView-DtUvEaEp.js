import{d as J,x as B,c,q as $,L as ee,M as K,s as te,v as ne,a8 as ie,b as w,o as d,e as s,w as t,k as i,a as o,t as g,l as S,p as r,n as u,F as re,r as de,_ as Q,aj as U,al as z,A as j,e9 as A,ea as q,a0 as ae,dY as le,bd as N,$ as F}from"./index-B7jvAjdE.js";import{M as oe,a as se}from"./MViewContainer-BTeE2xDT.js";import{M as ue}from"./MetaAudienceSizeEstimate-CCTh_xY2.js";import{M as fe}from"./MetaActivablePhaseBadge-DS0XHNhH.js";import{P as me}from"./PlayerConditionsCard-DQet32jq.js";import{S as ge}from"./SegmentsCard-jcRkLMcQ.js";import{a as E}from"./numberUtils-CkF0oMe2.js";import{M as G,a as k}from"./metaListUtils-B-xQ0HnD.js";import{a as Y,c as H}from"./offers-DYY0Z2EJ.js";import{B as ce,a as ve}from"./progress-GKvrz8Gh.js";import"./players-CydHenLG.js";const pe=J({__name:"OfferGroupsOffersCard",props:{title:{default:"Offers"},offerGroupId:{},emptyMessage:{}},setup(C,{expose:n}){n();const x=C,{data:e}=B(Y());function T(v){if(!x.offerGroupId)return;const m=v.config.offerId;return e.value.offerGroups[x.offerGroupId].perOfferStatistics[m]}const y=c(()=>{if(e.value){const v=e.value.offerGroups[x.offerGroupId].config.offers;return Object.values(e.value.offers||{}).filter(m=>v===null||v.includes(m.config.offerId)).map(m=>{const p=T(m),P=p.numPurchasedForFirstTime,_=p.numActivatedForFirstTime;return{...m,conversion:a(P,_),conversionTooltip:l(P,_)}})}else return});function b(v){return Object.values(e.value.offerGroups).some(m=>m.config.offers.includes(v.config.offerId))}function a(v,m){return m===0?0:v/m*100}function l(v,m){return m===0?"Not activated in this offer group by any players yet.":`In this offer group, activated by ${E(m)} players and purchased by ${E(v)}.`}const f=c(()=>[G.asUnsorted(),new G("Name","config.displayName",k.Ascending),new G("Name","config.displayName",k.Descending),new G("Conversion","conversion",k.Ascending),new G("Conversion","conversion",k.Descending),new G("Revenue","statistics.revenue",k.Ascending),new G("Revenue","statistics.revenue",k.Descending)]),M={props:x,offersData:e,getOfferGroupStatisticsForOffer:T,decoratedOffers:y,isUsed:b,conversion:a,conversionTooltip:l,sortOptions:f,searchFields:["config.displayName","config.description"],computed:c,get MetaListSortDirection(){return k},get MetaListSortOption(){return G},get MCollapse(){return $},get MTooltip(){return ee},get MBadge(){return K},get MList(){return te},get MListItem(){return ne},get MTextButton(){return ie},get abbreviateNumber(){return E},get useSubscription(){return B},get getAllOffersSubscriptionOptions(){return Y}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),_e={key:0,class:"tw-mt-0.5 tw-text-sm tw-text-neutral-500"},we={key:0},ye={key:1,class:"text-muted tw-italic"},be={key:0},Oe={key:1,class:"text-muted tw-italic"};function he(C,n,x,e,T,y){const b=w("meta-plural-label"),a=w("meta-reward-badge"),l=w("meta-list-card");return d(),s(l,{title:x.title,icon:"tag",emptyMessage:x.emptyMessage,itemList:e.decoratedOffers,searchFields:e.searchFields,sortOptions:e.sortOptions},{"item-card":t(f=>[i(e.MCollapse,{extraMListItemMargin:""},{header:t(()=>[i(e.MListItem,{noLeftPadding:""},{badge:t(()=>[f.item.referencePrice!==null?(d(),o("span",_e,g(f.item.referencePrice),1)):S("",!0),e.isUsed(f.item)?S("",!0):(d(),s(e.MBadge,{key:1,variant:"warning"},{default:t(()=>n[0]||(n[0]=[r("Unused")]),void 0,!0),_:1}))]),"top-right":t(()=>[i(e.MTooltip,{content:f.item.conversionTooltip},{default:t(()=>[r(g(f.item.conversion.toFixed(0))+"% conversion",1)],void 0,!0),_:2},1032,["content"])]),"bottom-left":t(()=>[r(g(f.item.config.description),1)]),"bottom-right":t(()=>[i(e.MTextButton,{to:`/offerGroups/offer/${f.item.config.offerId}`,"data-testid":"view-offer"},{default:t(()=>n[1]||(n[1]=[r("View offer")]),void 0,!0),_:2},1032,["to"])]),default:t(()=>[r(g(f.item.config.displayName),1)],void 0,!0),_:2},1024)]),default:t(()=>[i(e.MList,{showBorder:"",striped:""},{default:t(()=>[i(e.MListItem,{condensed:""},{"top-right":t(()=>[i(b,{value:e.getOfferGroupStatisticsForOffer(f.item).numActivatedForFirstTime,label:"player"},null,8,["value"])]),default:t(()=>[i(e.MTooltip,{content:"Value in the context of this offer group."},{default:t(()=>n[2]||(n[2]=[r("Local")]),void 0,!0),_:1}),n[3]||(n[3]=r(" Seen by"))],void 0,!0),_:2},1024),i(e.MListItem,{condensed:""},{"top-right":t(()=>[i(b,{value:e.getOfferGroupStatisticsForOffer(f.item).numPurchasedForFirstTime,label:"player"},null,8,["value"])]),default:t(()=>[i(e.MTooltip,{content:"Value in the context of this offer group."},{default:t(()=>n[4]||(n[4]=[r("Local")]),void 0,!0),_:1}),n[5]||(n[5]=r(" Purchased by"))],void 0,!0),_:2},1024),i(e.MListItem,{condensed:""},{"top-right":t(()=>[i(b,{value:e.getOfferGroupStatisticsForOffer(f.item).numActivated,label:"time"},null,8,["value"])]),default:t(()=>[i(e.MTooltip,{content:"Value in the context of this offer group."},{default:t(()=>n[6]||(n[6]=[r("Local")]),void 0,!0),_:1}),n[7]||(n[7]=r(" Total Seen Count"))],void 0,!0),_:2},1024),i(e.MListItem,{condensed:""},{"top-right":t(()=>[i(b,{value:e.getOfferGroupStatisticsForOffer(f.item).numPurchased,label:"time"},null,8,["value"])]),default:t(()=>[i(e.MTooltip,{content:"Value in the context of this offer group."},{default:t(()=>n[8]||(n[8]=[r("Local")]),void 0,!0),_:1}),n[9]||(n[9]=r(" Total Purchased Count"))],void 0,!0),_:2},1024),i(e.MListItem,{condensed:""},{"top-right":t(()=>[r("$"+g(e.getOfferGroupStatisticsForOffer(f.item).revenue.toFixed(2)),1)]),default:t(()=>[i(e.MTooltip,{content:"Value in the context of this offer group."},{default:t(()=>n[10]||(n[10]=[r("Local")]),void 0,!0),_:1}),n[11]||(n[11]=r(" Total Revenue"))],void 0,!0),_:2},1024),i(e.MListItem,{condensed:""},{"top-right":t(()=>[f.item.config.segments&&f.item.config.segments.length>0?(d(),o("div",we,g(f.item.config.segments.length),1)):(d(),o("div",ye,"None"))]),default:t(()=>[n[12]||(n[12]=r("Segments"))],void 0,!0),_:2},1024),i(e.MListItem,{condensed:""},{"top-right":t(()=>[f.item.config.additionalConditions&&f.item.config.additionalConditions.length>0?(d(),o("div",be,g(f.item.config.additionalConditions.length),1)):(d(),o("div",Oe,"None"))]),default:t(()=>[n[13]||(n[13]=r("Additional Conditions"))],void 0,!0),_:2},1024),i(e.MListItem,{condensed:""},{"top-right":t(()=>[u("div",null,[(d(!0),o(re,null,de(f.item.config.rewards,O=>(d(),s(a,{key:O.type,reward:O},null,8,["reward"]))),128))])]),default:t(()=>[n[14]||(n[14]=r("Rewards"))],void 0,!0),_:2},1024)],void 0,!0),_:2},1024)],void 0,!0),_:2},1024)]),_:1},8,["title","emptyMessage","itemList","sortOptions"])}const xe=Q(pe,[["render",he],["__file","OfferGroupsOffersCard.vue"]]),Me=J({__name:"OfferGroupDetailView",props:{kindId:{}},setup(C,{expose:n}){n();const x=C,e=U(),T=z(e.params.id),{data:y,error:b}=B(H(T)),{data:a}=B(j()),l=c(()=>y.value.config.activableParams),f=c(()=>O.value?O.value.kinds[x.kindId].gameSpecificConfigDataMembers.map(V=>({key:V,value:y.value.config[V]})):void 0),O=c(()=>a.value?.activablesMetadata),M=c(()=>l.value.lifetime.$type.match(/Metaplay\.Core.Activables\.MetaActivableLifetimeSpec\+(.*)/)[1]),v=c(()=>l.value.schedule.$type.match(/Metaplay\.Core\.Schedule\.(.*)/)[1]),m=c(()=>l.value.cooldown.$type.match(/Metaplay\.Core\.Activables\.MetaActivableCooldownSpec\+(.*)/)[1]),p=c(()=>l.value.schedule?A(l.value.schedule.preview)+A(l.value.schedule.duration)+A(l.value.schedule.review):1),P=c(()=>{const h=y.value?.scheduleStatus;return h?h.currentPhase.phase:null}),_=c(()=>{const h=y.value?.scheduleStatus;return h?.nextPhase?h.nextPhase.phase:null}),I=c(()=>{const h=y.value.scheduleStatus;return h?.nextPhase?h.nextPhase.startTime:null}),L=c(()=>{const h=y.value.scheduleStatus;return h?h.relevantEnabledRange:null}),D=c(()=>q(y.value.statistics.numConsumedForFirstTime/y.value.statistics.numActivatedForFirstTime*100,2)),W=c(()=>(y.value?.config.offers||[]).length>0),X=c(()=>l.value.segments!==null&&l.value.segments.length!==0),Z=c(()=>l.value.isEnabled),R={props:x,route:e,offerGroupId:T,singleOfferGroupData:y,singleOfferGroupError:b,staticConfigData:a,singleOfferGroupParams:l,gameSpecificInfo:f,activablesMetadata:O,lifetimeType:M,scheduleType:v,cooldownType:m,totalDuration:p,phase:P,nextPhase:_,nextPhaseStartTime:I,displayedEnabledRange:L,conversion:D,containsOffers:W,isTargeted:X,isEnabled:Z,get BProgress(){return ce},get BProgressBar(){return ve},computed:c,get useRoute(){return U},get MBadge(){return K},get MCallout(){return ae},get MPageOverviewCard(){return oe},get MViewContainer(){return se},get useSubscription(){return B},MetaAudienceSizeEstimate:ue,MetaActivablePhaseBadge:fe,PlayerConditionsCard:me,SegmentsCard:ge,OfferGroupsOffersCard:xe,get durationToMilliseconds(){return A},get metaScheduleTimeModeDisplayString(){return le},get roundTo(){return q},get routeParamToSingleValue(){return z},get getStaticConfigSubscriptionOptions(){return j},get getSingleOfferGroupSubscriptionOptions(){return H}};return Object.defineProperty(R,"__isScriptSetup",{enumerable:!1,value:!0}),R}}),Pe={key:1},Ge={class:"font-weight-bold tw-mb-1"},Se={key:1},Te={class:"font-weight-bold tw-mb-1"},ke={class:"font-weight-bold tw-mb-1"},Ce={key:0},Be={key:1},De={key:2,class:"text-danger"},Ae={key:0},Fe={key:0,class:"text-muted tw-italic"},Ie={key:1,class:"text-danger"},Le={key:0},Ne={key:1},Ee={key:2},Re={class:"tw-w-full"},Ve={key:0,class:"small"},Ue={class:"tw-w-full"},ze={key:0,class:"small"},je={key:0,class:"tw-my-4"},qe={key:0,class:"text-muted tw-text-center"},Ye={key:1,class:"text-muted tw-text-center"},He={key:2,class:"tw-text-center"},Je={key:3,class:"text-muted"},Ke={key:1,class:"text-muted tw-text-center"},Qe={key:0,class:"tw-my-4"},We={key:0,class:"text-muted tw-text-center"},Xe={key:2},Ze={class:"text-muted"},$e={style:{"font-size":"0.7rem"}},et={key:1,class:"text-muted tw-text-center"},tt={key:0},nt={key:0},it={key:1},rt={class:"text-muted"},dt={style:{"font-size":"0.7rem"}},at={key:1,class:"text-muted my-auto tw-text-center"},lt={class:"rounded border py-2 h-100 tw-px-4"};function ot(C,n,x,e,T,y){const b=w("fa-icon"),a=w("b-td"),l=w("b-tr"),f=w("meta-ordinal-number"),O=w("b-tbody"),M=w("b-table-simple"),v=w("meta-abbreviate-number"),m=w("meta-duration"),p=w("b-col"),P=w("meta-time"),_=w("b-row"),I=w("b-card-title"),L=w("b-card"),D=w("meta-raw-data");return d(),s(e.MViewContainer,{permission:"api.activables.view","is-loading":!e.singleOfferGroupData,error:e.singleOfferGroupError,variant:e.containsOffers?void 0:"warning"},{overview:t(()=>[i(e.MPageOverviewCard,{title:e.singleOfferGroupData.config.displayName,subtitle:e.singleOfferGroupData.config.description,id:e.singleOfferGroupData.config.activableId,"data-testid":"offer-group-detail-overview-card"},{default:t(()=>[e.containsOffers?(d(),o("div",Pe,[u("div",Ge,[i(b,{icon:"chart-bar"}),n[1]||(n[1]=r(" Overview"))]),i(M,{small:"",responsive:""},{default:t(()=>[i(O,null,{default:t(()=>[i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[2]||(n[2]=[r("Status")]),void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[e.isEnabled?(d(),s(e.MBadge,{key:0,variant:"success"},{default:t(()=>n[3]||(n[3]=[r("Enabled")]),void 0,!0),_:1})):(d(),s(e.MBadge,{key:1,variant:"danger"},{default:t(()=>n[4]||(n[4]=[r("Disabled")]),void 0,!0),_:1}))],void 0,!0),_:1})],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[5]||(n[5]=[r("Placement")]),void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[r(g(e.singleOfferGroupData.config.placement),1)],void 0,!0),_:1})],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[6]||(n[6]=[r("Priority")]),void 0,!0),_:1}),i(a,{class:"tw-text-right"},{default:t(()=>[e.singleOfferGroupData.config.priority>0?(d(),s(f,{key:0,number:e.singleOfferGroupData.config.priority},null,8,["number"])):(d(),o("span",Se,g(e.singleOfferGroupData.config.priority),1))],void 0,!0),_:1})],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[7]||(n[7]=[r("Audience Size Estimate")]),void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[i(e.MetaAudienceSizeEstimate,{sizeEstimate:e.isTargeted?e.singleOfferGroupData.audienceSizeEstimate:void 0},null,8,["sizeEstimate"])],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1}),u("div",Te,[i(b,{icon:"chart-line"}),n[8]||(n[8]=r(" Statistics"))]),i(M,{small:"",responsive:""},{default:t(()=>[i(O,null,{default:t(()=>[i(l,null,{default:t(()=>[i(a,null,{default:t(()=>[n[10]||(n[10]=r("Activated By")),i(e.MBadge,{class:"tw-ml-1",tooltip:"Number of players who have seen this group.",shape:"pill"},{default:t(()=>n[9]||(n[9]=[r("?")]),void 0,!0),_:1})],void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[i(v,{value:e.singleOfferGroupData.statistics.numActivatedForFirstTime,unit:"player"},null,8,["value"])],void 0,!0),_:1})],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>[n[12]||(n[12]=r("Consumed By")),i(e.MBadge,{class:"tw-ml-1",tooltip:"Number of players who have bought something from this group.",shape:"pill"},{default:t(()=>n[11]||(n[11]=[r("?")]),void 0,!0),_:1})],void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[i(v,{value:e.singleOfferGroupData.statistics.numConsumedForFirstTime,unit:"player"},null,8,["value"])],void 0,!0),_:1})],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>[n[14]||(n[14]=r("Conversion")),i(e.MBadge,{class:"tw-ml-1",tooltip:"The percentage of players who have bought something from this group after seeing it.",shape:"pill"},{default:t(()=>n[13]||(n[13]=[r("?")]),void 0,!0),_:1})],void 0,!0),_:1}),e.singleOfferGroupData.statistics.numActivatedForFirstTime>0?(d(),s(a,{key:0,class:"text-right"},{default:t(()=>[r(g(e.conversion)+"%",1)],void 0,!0),_:1})):(d(),s(a,{key:1,class:"text-right text-muted tw-italic"},{default:t(()=>n[15]||(n[15]=[r("None")]),void 0,!0),_:1}))],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>[n[17]||(n[17]=r("Total Consumes")),i(e.MBadge,{class:"tw-ml-1",tooltip:"Total number of purchases from this group.",shape:"pill"},{default:t(()=>n[16]||(n[16]=[r("?")]),void 0,!0),_:1})],void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[i(v,{value:e.singleOfferGroupData.statistics.numConsumed,unit:"time"},null,8,["value"])],void 0,!0),_:1})],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[18]||(n[18]=[r("Total Revenue")]),void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[r("$"+g(e.singleOfferGroupData.revenue.toFixed(2)),1)],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1}),u("div",ke,[i(b,{icon:"calendar-alt"}),n[19]||(n[19]=r(" Scheduling"))]),i(M,{small:"",responsive:""},{default:t(()=>[i(O,null,{default:t(()=>[i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[20]||(n[20]=[r("Activation Mode")]),void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[i(e.MBadge,{variant:e.singleOfferGroupParams.schedule?"neutral":"primary"},{default:t(()=>[r(g(e.singleOfferGroupParams.schedule?"Scheduled":"Dynamic"),1)],void 0,!0),_:1},8,["variant"])],void 0,!0),_:1})],void 0,!0),_:1}),e.singleOfferGroupParams.schedule?S("",!0):(d(),s(l,{key:0},{default:t(()=>[i(a,null,{default:t(()=>n[21]||(n[21]=[r("Lifetime After Activation")]),void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[e.lifetimeType==="Forever"?(d(),o("span",Ce,"Forever")):e.lifetimeType==="Fixed"?(d(),o("span",Be,[i(m,{duration:e.singleOfferGroupParams.lifetime.duration,showAs:"humanizedSentenceCase"},null,8,["duration"])])):(d(),o("span",De,"Unknown!"))],void 0,!0),_:1})],void 0,!0),_:1})),e.singleOfferGroupParams.schedule?S("",!0):(d(),s(l,{key:1},{default:t(()=>[i(a,null,{default:t(()=>n[22]||(n[22]=[r("Cooldown After Deactivation")]),void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[e.cooldownType==="Fixed"?(d(),o("span",Ae,[e.durationToMilliseconds(e.singleOfferGroupParams.cooldown.duration)===0?(d(),o("span",Fe,"None")):(d(),s(m,{key:1,duration:e.singleOfferGroupParams.cooldown.duration,showAs:"humanizedSentenceCase"},null,8,["duration"]))])):(d(),o("span",Ie,"Unknown!"))],void 0,!0),_:1})],void 0,!0),_:1})),e.singleOfferGroupParams.schedule?(d(),s(l,{key:2},{default:t(()=>[i(a,{colspan:"2"},{default:t(()=>[i(_,{class:"mx-0 tw-my-4"},{default:t(()=>[i(p,{class:"pl-0",md:""},{default:t(()=>[u("span",null,[n[23]||(n[23]=r("Time Mode:")),i(e.MBadge,{class:"tw-ml-1",tooltip:e.singleOfferGroupParams.schedule.timeMode!=="Utc"?"Using UTC time to preview the schedule.":void 0},{default:t(()=>[r(g(e.metaScheduleTimeModeDisplayString(e.singleOfferGroupParams.schedule.timeMode)),1)],void 0,!0),_:1},8,["tooltip"])])],void 0,!0),_:1}),i(p,{md:""},{default:t(()=>[u("span",null,[n[24]||(n[24]=r("Current Phase: ")),i(e.MetaActivablePhaseBadge,{activable:e.singleOfferGroupData},null,8,["activable"])])],void 0,!0),_:1}),i(p,{md:"auto"},{default:t(()=>[e.isEnabled?e.nextPhase?(d(),o("span",Ne,[n[26]||(n[26]=r("Next Phase: ")),i(e.MetaActivablePhaseBadge,{activable:e.singleOfferGroupData,phase:e.nextPhase},null,8,["activable","phase"]),u("div",null,[i(P,{date:e.nextPhaseStartTime},null,8,["date"])])])):(d(),o("span",Ee,"No longer occurring")):(d(),o("span",Le,[n[25]||(n[25]=r("Next Phase: ")),i(e.MetaActivablePhaseBadge,{activable:e.singleOfferGroupData,phase:"Disabled"},null,8,["activable"])]))],void 0,!0),_:1})],void 0,!0),_:1}),u("div",Re,[u("div",{class:"pb-3 pl-2 border-left border-dark",style:N(`margin-left: ${e.durationToMilliseconds(e.singleOfferGroupParams.schedule.preview)/e.totalDuration*100}%; position: relative; left: -1px`)},[n[27]||(n[27]=u("div",{class:"small font-weight-bold"},"Start",-1)),e.displayedEnabledRange?(d(),o("div",Ve,[i(P,{date:e.displayedEnabledRange.start},null,8,["date"])])):S("",!0)],4)]),i(e.BProgress,{class:"font-weight-bold",max:e.totalDuration,height:"3rem",style:N(e.phase==="Inactive"?"filter: contrast(50%) brightness(130%)":"")},{default:t(()=>[i(e.BProgressBar,{value:e.durationToMilliseconds(e.singleOfferGroupParams.schedule.preview),variant:"info",animated:e.phase==="Preview"},{default:t(()=>n[28]||(n[28]=[r("Preview")]),void 0,!0),_:1},8,["value","animated"]),i(e.BProgressBar,{value:e.durationToMilliseconds(e.singleOfferGroupParams.schedule.duration)-e.durationToMilliseconds(e.singleOfferGroupParams.schedule.endingSoon),variant:"success",animated:e.phase==="Active"},{default:t(()=>n[29]||(n[29]=[r("Active")]),void 0,!0),_:1},8,["value","animated"]),i(e.BProgressBar,{value:e.durationToMilliseconds(e.singleOfferGroupParams.schedule.endingSoon),variant:"warning",animated:e.phase==="EndingSoon"},{default:t(()=>n[30]||(n[30]=[r("Ending soon")]),void 0,!0),_:1},8,["value","animated"]),i(e.BProgressBar,{value:e.durationToMilliseconds(e.singleOfferGroupParams.schedule.review),variant:"info",animated:e.phase==="Review"},{default:t(()=>n[31]||(n[31]=[r("Review")]),void 0,!0),_:1},8,["value","animated"])],void 0,!0),_:1},8,["max","style"]),u("div",Ue,[u("div",{class:"pt-3 pr-2 pb-1 border-right border-dark text-right",style:N(`margin-right: ${e.durationToMilliseconds(e.singleOfferGroupParams.schedule.review)/e.totalDuration*100}%; position: relative; right: -1px`)},[n[32]||(n[32]=u("div",{class:"smallfont-weight-bold"},"End",-1)),e.displayedEnabledRange?(d(),o("div",ze,[i(P,{date:e.displayedEnabledRange.end},null,8,["date"])])):S("",!0)],4)])],void 0,!0),_:1})],void 0,!0),_:1})):S("",!0)],void 0,!0),_:1})],void 0,!0),_:1})])):(d(),s(e.MCallout,{key:0,class:"tw-mt-3",title:"No Offers Found",variant:"warning"},{default:t(()=>n[0]||(n[0]=[u("div",null,"This offer group contains no offers and thus will not be visible in the game! Did you forget to configure the offers in the game configs?",-1)]),void 0,!0),_:1}))],void 0,!0),_:1},8,["title","subtitle","id"])]),default:t(()=>[i(_,{class:"mb-2 tw-mt-4","no-gutters":"","align-v":"center"},{default:t(()=>n[33]||(n[33]=[u("h3",null,"Contents",-1)]),void 0,!0),_:1}),i(_,{"align-h":"center"},{default:t(()=>[i(p,{class:"tw-mb-4",lg:"8"},{default:t(()=>[i(e.OfferGroupsOffersCard,{offerGroupId:e.routeParamToSingleValue(e.route.params.id),emptyMessage:"This offer group contains no offers and thus will not be visible in the game! Did you forget to configure the offers in the game configs?","data-testid":"offer-group-detail-offers-list-card"},null,8,["offerGroupId"])],void 0,!0),_:1})],void 0,!0),_:1}),i(_,{class:"mb-2 tw-mt-4","no-gutters":"","align-v":"center"},{default:t(()=>n[34]||(n[34]=[u("h3",null,"Scheduling",-1)]),void 0,!0),_:1}),e.singleOfferGroupParams?(d(),s(_,{key:0,class:"tw-mb-4","align-h":"center"},{default:t(()=>[i(p,{class:"tw-mb-4"},{default:t(()=>[i(L,{"data-testid":"offer-group-detail-configuration-card"},{default:t(()=>[i(I,null,{default:t(()=>[i(_,{"align-v":"center","no-gutters":""},{default:t(()=>[i(b,{class:"mr-2",icon:"sliders-h"}),n[35]||(n[35]=u("span",null,"Activable Configuration",-1))],void 0,!0),_:1})],void 0,!0),_:1}),i(_,null,{default:t(()=>[i(p,{class:"tw-mb-4",md:"6"},{default:t(()=>[u("div",{class:F(["rounded border py-2 h-100 tw-px-4",{"bg-light":!e.singleOfferGroupParams.lifetime||e.lifetimeType==="ScheduleBased"}])},[i(_,{class:"mb-2","align-v":"center","no-gutters":""},{default:t(()=>[n[38]||(n[38]=u("span",{class:"font-weight-bold"},"Lifetime",-1)),!e.singleOfferGroupParams.lifetime||e.lifetimeType==="ScheduleBased"?(d(),s(e.MBadge,{key:0,class:"tw-ml-1"},{default:t(()=>n[36]||(n[36]=[r("Off")]),void 0,!0),_:1})):(d(),s(e.MBadge,{key:1,class:"tw-ml-1",variant:"success"},{default:t(()=>n[37]||(n[37]=[r("On")]),void 0,!0),_:1}))],void 0,!0),_:1}),e.singleOfferGroupParams.lifetime?(d(),o("div",je,[e.lifetimeType==="ScheduleBased"?(d(),o("div",qe,"This activable's lifetime follows the schedule.")):e.lifetimeType==="Forever"?(d(),o("div",Ye,"This activable exists forever.")):e.lifetimeType==="Fixed"?(d(),o("div",He,[n[39]||(n[39]=r("This activable's lifetime is ")),i(m,{duration:e.singleOfferGroupParams.lifetime.duration},null,8,["duration"]),n[40]||(n[40]=r("."))])):(d(),o("div",Je,"Unknown lifetime type: "+g(e.lifetimeType)+".",1))])):(d(),o("div",Ke,"No lifetime defined."))],2)],void 0,!0),_:1}),i(p,{class:"tw-mb-4",md:"6"},{default:t(()=>[u("div",{class:F(["rounded border py-2 h-100 tw-px-4",{"bg-light":!e.singleOfferGroupParams.cooldown||e.cooldownType==="ScheduleBased"||e.durationToMilliseconds(e.singleOfferGroupParams.cooldown.duration)===0}])},[i(_,{class:"mb-2","align-v":"center","no-gutters":""},{default:t(()=>[n[43]||(n[43]=u("span",{class:"font-weight-bold"},"Cooldown",-1)),!e.singleOfferGroupParams.cooldown||e.cooldownType==="ScheduleBased"||e.durationToMilliseconds(e.singleOfferGroupParams.cooldown.duration)===0?(d(),s(e.MBadge,{key:0,class:"tw-ml-1"},{default:t(()=>n[41]||(n[41]=[r("Off")]),void 0,!0),_:1})):(d(),s(e.MBadge,{key:1,class:"tw-ml-1",variant:"success"},{default:t(()=>n[42]||(n[42]=[r("On")]),void 0,!0),_:1}))],void 0,!0),_:1}),e.singleOfferGroupParams.cooldown?(d(),o("div",Qe,[e.cooldownType==="ScheduleBased"?(d(),o("div",We,"This activable's cooldown period follows the schedule.")):e.cooldownType==="Fixed"?(d(),o("div",{key:1,class:F(["tw-text-center",{"text-muted":e.durationToMilliseconds(e.singleOfferGroupParams.cooldown.duration)===0}])},[n[44]||(n[44]=r("This activable's cooldown period is ")),i(m,{duration:e.singleOfferGroupParams.cooldown.duration},null,8,["duration"]),n[45]||(n[45]=r("."))],2)):(d(),o("div",Xe,[u("div",Ze,"Unknown cooldown type: "+g(e.cooldownType)+".",1),u("pre",$e,g(e.singleOfferGroupParams.cooldown),1)]))])):(d(),o("div",et,"No cooldown defined."))],2)],void 0,!0),_:1}),i(p,{class:"tw-mb-4",md:"6"},{default:t(()=>[u("div",{class:F(["rounded border py-2 h-100 tw-px-4",{"bg-light":!e.singleOfferGroupParams.schedule}])},[i(_,{class:"mb-2","align-v":"center","no-gutters":""},{default:t(()=>[n[48]||(n[48]=u("span",{class:"font-weight-bold"},"Schedule",-1)),e.singleOfferGroupParams.schedule?(d(),s(e.MBadge,{key:1,class:"tw-ml-1",variant:"success"},{default:t(()=>n[47]||(n[47]=[r("On")]),void 0,!0),_:1})):(d(),s(e.MBadge,{key:0,class:"tw-ml-1"},{default:t(()=>n[46]||(n[46]=[r("Off")]),void 0,!0),_:1}))],void 0,!0),_:1}),e.singleOfferGroupParams.schedule?(d(),o("div",tt,[e.scheduleType==="MetaRecurringCalendarSchedule"?(d(),s(M,{key:0,small:"",style:{"font-size":"0.85rem"}},{default:t(()=>[i(O,null,{default:t(()=>[i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[49]||(n[49]=[r("Time mode")]),void 0,!0),_:1}),e.singleOfferGroupParams.schedule.timeMode!=="Utc"?(d(),s(a,{key:0,class:"text-right"},{default:t(()=>[i(e.MBadge,null,{default:t(()=>[r(g(e.singleOfferGroupParams.schedule.timeMode),1)],void 0,!0),_:1})],void 0,!0),_:1})):(d(),s(a,{key:1,class:"text-right"},{default:t(()=>[i(e.MBadge,null,{default:t(()=>[r(g(e.metaScheduleTimeModeDisplayString(e.singleOfferGroupParams.schedule.timeMode)),1)],void 0,!0),_:1})],void 0,!0),_:1}))],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[50]||(n[50]=[r("Start")]),void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[i(P,{date:e.singleOfferGroupParams.schedule.start,showAs:"timeagoSentenceCase"},null,8,["date"])],void 0,!0),_:1})],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[51]||(n[51]=[r("Preview")]),void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[i(m,{duration:e.singleOfferGroupParams.schedule.preview,showAs:"exactDuration"},null,8,["duration"])],void 0,!0),_:1})],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[52]||(n[52]=[r("Duration")]),void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[i(m,{duration:e.singleOfferGroupParams.schedule.duration,showAs:"exactDuration"},null,8,["duration"])],void 0,!0),_:1})],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[53]||(n[53]=[r("Ending Soon")]),void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[i(m,{duration:e.singleOfferGroupParams.schedule.endingSoon,showAs:"exactDuration"},null,8,["duration"])],void 0,!0),_:1})],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[54]||(n[54]=[r("Review")]),void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[i(m,{duration:e.singleOfferGroupParams.schedule.review,showAs:"exactDuration"},null,8,["duration"])],void 0,!0),_:1})],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[55]||(n[55]=[r("Repeats")]),void 0,!0),_:1}),e.singleOfferGroupParams.schedule.numRepeats===null?(d(),s(a,{key:0,class:"text-right text-muted tw-italic"},{default:t(()=>n[56]||(n[56]=[r("Unlimited")]),void 0,!0),_:1})):(d(),s(a,{key:1,class:"text-right"},{default:t(()=>[r(g(e.singleOfferGroupParams.maxTotalConsumes),1)],void 0,!0),_:1}))],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[57]||(n[57]=[r("Recurrence")]),void 0,!0),_:1}),i(a,{class:"text-right"},{default:t(()=>[e.singleOfferGroupParams.schedule.recurrence===null?(d(),o("div",nt,"Never")):(d(),s(m,{key:1,duration:e.singleOfferGroupParams.schedule.recurrence,showAs:"exactDuration"},null,8,["duration"]))],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1})):(d(),o("div",it,[u("div",rt,"Unknown schedule type: "+g(e.scheduleType)+".",1),u("pre",dt,g(e.singleOfferGroupParams.schedule),1)]))])):(d(),o("div",at,"No schedule defined."))],2)],void 0,!0),_:1}),i(p,{class:"tw-mb-4",md:"6"},{default:t(()=>[u("div",lt,[n[64]||(n[64]=u("div",{class:"mb-2 font-weight-bold"},"Activations",-1)),i(M,{class:"m-0",small:"",style:{"font-size":"0.85rem"}},{default:t(()=>[i(O,null,{default:t(()=>[i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[58]||(n[58]=[r("Max Activations")]),void 0,!0),_:1}),e.singleOfferGroupParams.maxActivations===null?(d(),s(a,{key:0,class:"text-right text-muted tw-italic"},{default:t(()=>n[59]||(n[59]=[r("Unlimited")]),void 0,!0),_:1})):(d(),s(a,{key:1,class:"text-right"},{default:t(()=>[r(g(e.singleOfferGroupParams.maxActivations),1)],void 0,!0),_:1}))],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[60]||(n[60]=[r("Max Total Consumes")]),void 0,!0),_:1}),e.singleOfferGroupParams.maxTotalConsumes===null?(d(),s(a,{key:0,class:"text-right text-muted tw-italic"},{default:t(()=>n[61]||(n[61]=[r("Unlimited")]),void 0,!0),_:1})):(d(),s(a,{key:1,class:"text-right"},{default:t(()=>[r(g(e.singleOfferGroupParams.maxTotalConsumes),1)],void 0,!0),_:1}))],void 0,!0),_:1}),i(l,null,{default:t(()=>[i(a,null,{default:t(()=>n[62]||(n[62]=[r("Max Consumed Per Activation")]),void 0,!0),_:1}),e.singleOfferGroupParams.maxConsumesPerActivation===null?(d(),s(a,{key:0,class:"text-right text-muted tw-italic"},{default:t(()=>n[63]||(n[63]=[r("Unlimited")]),void 0,!0),_:1})):(d(),s(a,{key:1,class:"text-right"},{default:t(()=>[r(g(e.singleOfferGroupParams.maxConsumesPerActivation),1)],void 0,!0),_:1}))],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1})])],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1})):S("",!0),i(_,{class:"mb-2 tw-mt-4","no-gutters":"","align-v":"center"},{default:t(()=>n[65]||(n[65]=[u("h3",null,"Targeting",-1)]),void 0,!0),_:1}),i(_,{"align-h":"center"},{default:t(()=>[i(p,{class:"tw-mb-4",md:"6"},{default:t(()=>[i(e.SegmentsCard,{segments:e.singleOfferGroupParams.segments,ownerTitle:"This event"},null,8,["segments"])],void 0,!0),_:1}),i(p,{class:"tw-mb-4",md:"6"},{default:t(()=>[i(e.PlayerConditionsCard,{playerConditions:e.singleOfferGroupParams.additionalConditions},null,8,["playerConditions"])],void 0,!0),_:1})],void 0,!0),_:1}),i(D,{kvPair:e.singleOfferGroupData,name:"singleOfferGroupData"},null,8,["kvPair"]),i(D,{kvPair:e.gameSpecificInfo,name:"gameSpecificInfo"},null,8,["kvPair"])],void 0,!0),_:1},8,["is-loading","error","variant"])}const bt=Q(Me,[["render",ot],["__scopeId","data-v-2058148c"],["__file","OfferGroupDetailView.vue"]]);export{bt as default};
