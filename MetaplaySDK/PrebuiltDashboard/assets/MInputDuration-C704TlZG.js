import{d as O,f as m,ck as n,C as h,c as y,ao as _,N as C,b9 as U,o as s,a as r,n as i,$ as u,t as g,l as M,k as c,e as B,w as S,p as j,_ as G}from"./index-B7jvAjdE.js";import{M as L}from"./MInputHintMessage-DbuBS4Kn.js";import{M as q}from"./MInputNumber-BOzPEn49.js";import{M as z}from"./MInputSwitch-C-Z-JJsG.js";const K=O({__name:"MInputDuration",props:{modelValue:{},referenceDateTime:{default:void 0},allowEmpty:{type:Boolean},label:{default:void 0},disabled:{type:Boolean},hintMessage:{default:void 0},variant:{default:"default"},showGameTimeHint:{type:Boolean,default:!0}},emits:["update:modelValue","isValid"],setup(D,{expose:d,emit:t}){d();const e=D,l=t,w=m(e.modelValue!==void 0);function o(a){w.value=a,a?(l("update:modelValue",f.value),l("isValid",f.value!==void 0)):(l("update:modelValue",void 0),l("isValid",!0))}const f=m(typeof e.modelValue=="string"?n.fromISO(e.modelValue):e.modelValue),v=m(typeof e.modelValue=="string"?n.fromISO(e.modelValue).days:e.modelValue?.days),b=m(typeof e.modelValue=="string"?n.fromISO(e.modelValue).hours:e.modelValue?.hours),x=m(typeof e.modelValue=="string"?n.fromISO(e.modelValue).minutes:e.modelValue?.minutes);h(()=>e.modelValue,a=>{typeof a=="string"&&(a=n.fromISO(a)),v.value=a?.days,b.value=a?.hours,x.value=a?.minutes},{immediate:!0});const V=y(()=>{const a={};return v.value&&(a.days=v.value),b.value&&(a.hours=b.value),x.value&&(a.minutes=x.value),n.fromObject(a)});h(()=>V.value,a=>{a.toMillis()<=0?(l("update:modelValue",void 0),l("isValid",e.allowEmpty&&!w.value)):(f.value=a,l("update:modelValue",a),l("isValid",!0))});const E=y(()=>V.value>n.fromObject({minutes:0})),k=_("days"),H=_("hours"),T=_("minutes"),N=y(()=>{switch(e.variant){case"danger":return"tw-ring-red-400 tw-text-red-400";case"success":return"tw-ring-green-500";default:return"tw-ring-neutral-300"}}),I={props:e,emit:l,internalValueSelectionEnabled:w,onInternalValueSelectionEnabledChanged:o,lastSelectedValue:f,selectedDays:v,selectedHours:b,selectedMinutes:x,selectedDuration:V,valid:E,idDays:k,idHours:H,idMinutes:T,variantClasses:N,get DateTime(){return C},get Duration(){return n},computed:y,ref:m,watch:h,get makeIntoUniqueKey(){return _},MGameTimeOffsetHint:U,MInputHintMessage:L,MInputNumber:q,MInputSwitch:z};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}}),A={class:"tw-flex tw-items-center tw-justify-between"},F={key:1,class:"tw-flex tw-items-center tw-space-x-2"},P={key:0},W={class:"tw-flex tw-grow tw-items-baseline tw-space-x-2"},J=["for"],Q={class:"tw-flex tw-grow tw-items-baseline tw-space-x-2"},R=["for"],X={class:"tw-flex tw-grow tw-items-baseline tw-space-x-2"},Y=["for"],Z={key:0,class:"tw-mt-1 tw-text-xs tw-text-red-500"},p={key:1,class:"tw-mt-1 tw-text-xs tw-text-neutral-400"},$={key:1,class:"tw-m-0 tw-text-xs tw-text-neutral-400"};function ee(D,d,t,e,l,w){return s(),r("div",{class:u(["tw-@container",{"tw-bg-neutral-100 tw-rounded-md tw-border tw-border-neutral-200 tw-p-3":t.allowEmpty}])},[i("div",A,[t.label?(s(),r("label",{key:0,class:u(["tw-block tw-text-sm tw-font-bold tw-leading-6 tw-mb-1",{"tw-text-neutral-400":t.disabled,"tw-text-neutral-900":!t.disabled}])},g(t.label),3)):M("",!0),t.allowEmpty?(s(),r("div",F,[i("label",{class:u(["tw-mb-0 tw-text-xs",{"tw-text-neutral-400":t.disabled,"tw-text-neutral-500":!t.disabled}])},"Enable",2),c(e.MInputSwitch,{"model-value":e.internalValueSelectionEnabled,disabled:t.disabled,size:"small","onUpdate:modelValue":e.onInternalValueSelectionEnabledChanged},null,8,["model-value","disabled"])])):M("",!0)]),!t.allowEmpty||e.internalValueSelectionEnabled?(s(),r("div",P,[i("div",{class:u(["tw-flex tw-flex-col tw-space-y-2 @sm:tw-flex-row @sm:tw-space-x-4 @sm:tw-space-y-0",e.variantClasses])},[i("div",W,[i("label",{for:e.idDays,class:u(["tw-text-sm",{"tw-text-red-500":!e.valid,"tw-text-neutral-400":t.disabled}])},"Days:",10,J),c(e.MInputNumber,{class:"tw-grow",name:"days",id:e.idDays,"model-value":e.selectedDays,min:0,"max-fraction-digits":5,variant:t.variant==="default"?e.valid?"default":"danger":t.variant,disabled:t.disabled,placeholder:"0-365","onUpdate:modelValue":d[0]||(d[0]=o=>e.selectedDays=Number(o))},null,8,["id","model-value","variant","disabled"])]),i("div",Q,[i("label",{for:e.idHours,class:u(["tw-text-sm",{"tw-text-red-500":!e.valid,"tw-text-neutral-400":t.disabled}])},"Hours:",10,R),c(e.MInputNumber,{class:"tw-grow",name:"hours",id:e.idHours,"model-value":e.selectedHours,min:0,"max-fraction-digits":5,variant:t.variant==="default"?e.valid?"default":"danger":t.variant,disabled:t.disabled,placeholder:"0-24","onUpdate:modelValue":d[1]||(d[1]=o=>e.selectedHours=Number(o))},null,8,["id","model-value","variant","disabled"])]),i("div",X,[i("label",{for:e.idMinutes,class:u(["tw-text-sm",{"tw-text-red-500":!e.valid,"tw-text-neutral-400":t.disabled}])},"Minutes:",10,Y),c(e.MInputNumber,{class:"tw-grow",name:"hours",id:e.idMinutes,"model-value":e.selectedMinutes,min:0,"max-fraction-digits":5,variant:t.variant==="default"?e.valid?"default":"danger":t.variant,disabled:t.disabled,placeholder:"0-60","onUpdate:modelValue":d[2]||(d[2]=o=>e.selectedMinutes=Number(o))},null,8,["id","model-value","variant","disabled"])])],2),e.valid?e.selectedDuration&&t.referenceDateTime?(s(),r("div",p,"Selected duration lasts until "+g(t.referenceDateTime.plus(e.selectedDuration).toUTC().toLocaleString(e.DateTime.DATETIME_FULL_WITH_SECONDS)),1)):M("",!0):(s(),r("div",Z,"Enter a valid duration.")),t.showGameTimeHint?(s(),B(e.MInputHintMessage,{key:2},{default:S(()=>[c(e.MGameTimeOffsetHint)],void 0,!0),_:1})):M("",!0),c(e.MInputHintMessage,{variant:t.variant},{default:S(()=>[j(g(t.hintMessage),1)],void 0,!0),_:1},8,["variant"])])):(s(),r("p",$,g(t.hintMessage),1))],2)}const de=G(K,[["render",ee],["__file","MInputDuration.vue"]]);export{de as M};
