import{o as l,e as d,w as r,k as c,p as F,t as G,m as K,_ as U,cF as oe,d as q,f as w,x as L,y as T,A as D,c as S,h as b,cb as N,E as s,q as ee,v as te,j as ie,b as h,l as C,g as Z,G as k,C as J,bG as W,H as X,cc as Y,s as se,Z as R,a as p,F as O,r as j,n as de}from"./index-B7jvAjdE.js";import{g as $}from"./utils-Dwlepb3M.js";function ce(a,_,t,e,g,v){return a.fieldSchema&&(a.fieldSchema.typeKind==="Class"||a.fieldSchema.typeKind==="Abstract")?(l(),d(e.MCollapse,{key:0,extraMListItemMargin:""},{header:r(()=>[c(e.MListItem,{noLeftPadding:""},{default:r(()=>[F(G(e.resolvedTitle),1)],void 0,!0),_:1})]),default:r(()=>[c(e.GeneratedUiViewDynamicComponent,K(a.$props,{fieldInfo:a.fieldInfo,value:a.value,"logic-version":a.logicVersion}),null,16,["fieldInfo","value","logic-version"])]),_:1})):(l(),d(e.GeneratedUiViewDynamicComponent,K({key:1},a.$props,{class:"tw-mx-5 tw-my-3"},{fieldInfo:a.fieldInfo,value:a.value,"logic-version":a.logicVersion}),null,16,["fieldInfo","value","logic-version"]))}const ue=U(oe,[["render",ce],["__file","GeneratedUiViewCardListItem.vue"]]),fe=q({__name:"MetaGeneratedCard",props:{typeName:{type:String,default:void 0},list:{type:Boolean,default:!1},dictionary:{type:Boolean,default:!1},icon:{type:String,default:void 0},value:{type:null,required:!1,default:void 0},title:{type:String,required:!0},previewLocale:{type:String,default:void 0},logicVersion:{type:Number,default:void 0},isTargetingMultiplePlayers:{type:Boolean,default:!1}},setup(a,{expose:_}){_();const t=a,e=w(),{data:g}=L(T()),{data:v}=L(D()),u=S(()=>({fieldName:void 0,fieldType:e.value?.typeName??"",typeKind:e.value?.typeKind??s.Class,isLocalized:e.value?.isLocalized,addedInVersion:e.value?.addedInVersion,removedInVersion:void 0})),f=S(()=>{if(e.value?.isLocalized)return t.previewLocale?t.previewLocale:v.value?.defaultLanguage});b(async()=>{if(t.typeName)e.value=await N(t.typeName);else if(t.value&&typeof t.value=="object"&&"$type"in t.value)e.value=await N(t.value.$type);else throw Error("No typeName or value with $type given")});const i={props:t,schema:e,gameData:g,staticConfigData:v,rootField:u,currentLocale:f,onMounted:b,ref:w,computed:S,get MCollapse(){return ee},get MListItem(){return te},get useSubscription(){return L},get getGameDataSubscriptionOptions(){return T},get getStaticConfigSubscriptionOptions(){return D},GeneratedUiViewDynamicComponent:ie,GeneratedUiViewCardListItem:ue,get EGeneratedUiTypeKind(){return s},get PreloadAllSchemasForTypeName(){return N}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}});function me(a,_,t,e,g,v){const u=h("b-skeleton"),f=h("b-card"),i=h("meta-list-card"),y=h("fa-icon"),z=h("b-card-title");return!e.schema||!e.gameData||!e.staticConfigData?(l(),d(f,{key:0,class:"h-100"},{default:r(()=>[c(u,{width:"85%"}),c(u,{width:"55%"}),c(u,{width:"70%"})],void 0,!0),_:1})):t.list?(l(),d(i,{key:1,class:"h-100",title:t.title,icon:t.icon||"list",itemList:t.value?t.value:[]},{"item-card":r(m=>[e.rootField&&e.schema?(l(),d(e.GeneratedUiViewCardListItem,{key:0,fieldInfo:e.rootField,fieldSchema:e.schema,value:m.item,index:Number(m.index),previewLocale:e.currentLocale,"logic-version":t.logicVersion,isTargetingMultiplePlayers:t.isTargetingMultiplePlayers},null,8,["fieldInfo","fieldSchema","value","index","previewLocale","logic-version","isTargetingMultiplePlayers"])):C("",!0)]),_:1},8,["title","icon","itemList"])):t.dictionary?(l(),d(i,{key:2,class:"h-100",title:t.title,icon:t.icon||"list",itemList:Object.keys(t.value||{}).map(m=>({key:m,value:t.value[m]}))},{"item-card":r(({item:m})=>[c(e.MCollapse,{extraMListItemMargin:""},{header:r(()=>[c(e.MListItem,{noLeftPadding:""},{default:r(()=>[F(G(m.key),1)],void 0,!0),_:2},1024)]),default:r(()=>[e.rootField?(l(),d(e.GeneratedUiViewDynamicComponent,{key:0,fieldInfo:e.rootField,value:m.value,previewLocale:e.currentLocale,"logic-version":t.logicVersion,isTargetingMultiplePlayers:t.isTargetingMultiplePlayers},null,8,["fieldInfo","value","previewLocale","logic-version","isTargetingMultiplePlayers"])):C("",!0)]),_:2},1024)]),_:1},8,["title","icon","itemList"])):(l(),d(f,{key:3,class:"h-100 shadow-sm","no-body":""},{default:r(()=>[c(z,{class:"d-flex align-items-center"},{default:r(()=>[t.icon?(l(),d(y,{key:0,class:"mr-2",icon:t.icon},null,8,["icon"])):C("",!0),F(G(t.title),1)],void 0,!0),_:1}),e.rootField?(l(),d(e.GeneratedUiViewDynamicComponent,{key:0,fieldInfo:{...e.rootField},value:t.value,previewLocale:e.currentLocale,"logic-version":t.logicVersion,isTargetingMultiplePlayers:t.isTargetingMultiplePlayers},null,8,["fieldInfo","value","previewLocale","logic-version","isTargetingMultiplePlayers"])):C("",!0)],void 0,!0),_:1}))}const ve=U(fe,[["render",me],["__file","MetaGeneratedCard.vue"]]),ge=q({__name:"GeneratedUiViewSectionContent",props:Z,setup(a,{expose:_}){_();const t=a,e=w();b(async()=>{t.fieldInfo.typeKind===s.Abstract?e.value=t.value.$type?await k(t.value.$type):void 0:e.value=t.fieldSchema});const g=n=>!n.notEditable,v=n=>n.typeKind===s.Primitive||n.typeKind===s.StringId||n.typeKind===s.ConfigLibraryItem||n.typeKind===s.Enum||n.typeKind===s.DynamicEnum||n.typeKind===s.Nullable||n.fieldType==="Metaplay.Core.MetaTime",u=n=>n.typeKind===s.Localized,f=w([]),i=w([]),y=w([]);J(()=>[e.value,t.value],async([n,x],[Ne,ne])=>{if(!n||(f.value.length>0||i.value.length>0||y.value.length>0)&&W(x,ne))return;const H=[],P=[{schema:n,value:x}];for(f.value=[],i.value=[],y.value=[];P.length>0;){const{schema:V,value:Q,namePrefix:E}=P.pop();if(!H.find(o=>V.typeName===o)){H.push(V.typeName);for(const o of V.fields){if(!g(o))continue;const M=Q?Q[X(o.fieldName)]:void 0,I={field:{...o,fieldName:(E??"")+o.fieldName},value:M};if(o.typeKind===s.ValueCollection?I.arrayType=o.typeParams[0]:o.typeKind===s.KeyValueCollection&&(I.dictionaryType=o.typeParams[1]),o.typeKind===s.Class){const B=await k(o.fieldType);P.push({schema:B,value:M,namePrefix:V.fields.length>1?o.fieldName:E})}else if(o.typeKind===s.Abstract&&M&&"$type"in M){const B=M.$type,re=await k(B);P.push({schema:re,value:M,namePrefix:V.fields.length>1?o.fieldName:E})}else v(o)?f.value.push(I):u(o)?i.value.push(I):y.value.push(I)}}}},{deep:!0});const z=S(()=>f.value.length===0?null:{title:"General",fields:f.value}),{data:m}=L(T()),ae=S(()=>i.value.length===0?null:{title:"Localizations",languages:Y(t.value,m.value).map(n=>({displayName:$(n,m.value),lang:n})),fields:i.value});function le(n){return n.fieldName?R(n.fieldName):"Untitled"}const A={props:t,resolvedSchema:e,viewableFilter:g,primitiveFilter:v,localizedFilter:u,primitiveFields:f,localizedFields:i,otherFields:y,primitiveCard:z,gameData:m,localizedCard:ae,fieldTitle:le,get isEqual(){return W},computed:S,onMounted:b,ref:w,watch:J,get getLanguageName(){return $},get MCollapse(){return ee},get MList(){return se},get MListItem(){return te},get camelCaseToTitleCase(){return R},get useSubscription(){return L},get getGameDataSubscriptionOptions(){return T},MetaGeneratedCard:ve,get generatedUiFieldBaseProps(){return Z},get EGeneratedUiTypeKind(){return s},get findLanguages(){return Y},get newtonsoftCamelCase(){return X},get GetTypeSchemaForTypeName(){return k},GeneratedUiViewDynamicComponent:ie};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}}),ye={class:"tw-m-auto tw-flex tw-flex-wrap tw-justify-items-center"},pe={key:0,class:"tw-w-full tw-p-2 @2xl:tw-w-1/2"},_e={key:1,class:"tw-w-full tw-p-2 @2xl:tw-w-1/2"};function we(a,_,t,e,g,v){const u=h("b-card"),f=h("meta-list-card");return l(),p("div",ye,[e.primitiveCard?(l(),p("div",pe,[c(u,{class:"h-100 shadow-sm",title:e.primitiveCard.title},{default:r(()=>[e.primitiveCard.fields&&e.primitiveCard.fields.length>0?(l(),d(e.MList,{key:0,showBorder:""},{default:r(()=>[(l(!0),p(O,null,j(e.primitiveCard.fields,i=>(l(),d(e.MListItem,{key:i.field.fieldName},{"bottom-left":r(()=>[c(e.GeneratedUiViewDynamicComponent,K(a.$props,{ref_for:!0},{fieldInfo:i.field,value:i.value,"logic-version":a.logicVersion}),null,16,["fieldInfo","value","logic-version"])]),_:2},1024))),128))],void 0,!0),_:1})):C("",!0)],void 0,!0),_:1},8,["title"])])):C("",!0),e.localizedCard?(l(),p("div",_e,[c(f,{class:"h-100",title:"Localizations",icon:"language",itemList:e.localizedCard.languages},{"item-card":r(({item:i})=>[c(e.MCollapse,{extraMListItemMargin:""},{header:r(()=>[c(e.MListItem,{noLeftPadding:""},{default:r(()=>[F(G(i.displayName),1)],void 0,!0),_:2},1024)]),default:r(()=>[e.localizedCard.fields&&e.localizedCard.fields.length>0?(l(),d(e.MList,{key:0,showBorder:"",noLeftPadding:""},{default:r(()=>[(l(!0),p(O,null,j(e.localizedCard.fields,y=>(l(),p("div",{class:"tw-py-2",key:y.field.fieldName},[c(e.GeneratedUiViewDynamicComponent,K(a.$props,{ref_for:!0},{fieldInfo:y.field,value:y.value,previewLocale:i.lang,"logic-version":a.logicVersion}),null,16,["fieldInfo","value","previewLocale","logic-version"])]))),128))],void 0,!0),_:2},1024)):C("",!0)]),_:2},1024)]),_:1},8,["itemList"])])):C("",!0),(l(!0),p(O,null,j(e.otherFields,i=>(l(),p("div",{class:"tw-w-full tw-p-2 @2xl:tw-w-1/2",key:i.field.fieldName},[i.arrayType?(l(),d(e.MetaGeneratedCard,{key:0,typeName:i.arrayType,value:i.value,title:e.fieldTitle(i.field),list:"","logic-version":a.logicVersion},null,8,["typeName","value","title","logic-version"])):i.dictionaryType?(l(),d(e.MetaGeneratedCard,{key:1,typeName:i.dictionaryType,value:i.value,title:e.fieldTitle(i.field),dictionary:"","logic-version":a.logicVersion},null,8,["typeName","value","title","logic-version"])):(l(),d(e.MetaGeneratedCard,{key:2,typeName:i.field.fieldType,value:i.value,title:e.fieldTitle(i.field),"logic-version":a.logicVersion},null,8,["typeName","value","title","logic-version"]))]))),128))])}const he=U(ge,[["render",we],["__file","GeneratedUiViewSectionContent.vue"]]),Ce=q({__name:"MetaGeneratedSection",props:{typeName:{type:String,default:void 0},value:{type:null,required:!1,default:void 0},title:{type:String,required:!0},previewLocale:{type:String,default:void 0},logicVersion:{type:Number,default:void 0},isTargetingMultiplePlayers:{type:Boolean,default:!1}},setup(a,{expose:_}){_();const t=a,e=w(),{data:g}=L(T()),{data:v}=L(D()),u=S(()=>({fieldName:void 0,fieldType:e.value?.typeName??"",typeKind:e.value?.typeKind??s.Class,isLocalized:e.value?.isLocalized,addedInVersion:e.value?.addedInVersion,removedInVersion:void 0}));b(async()=>{if(t.typeName)e.value=await N(t.typeName);else if(t.value&&typeof t.value=="object"&&"$type"in t.value)e.value=await N(t.value.$type);else throw Error("No typeName or value with $type given")});const f={props:t,schema:e,gameData:g,staticConfigData:v,rootField:u,onMounted:b,ref:w,computed:S,get useSubscription(){return L},get getGameDataSubscriptionOptions(){return T},get getStaticConfigSubscriptionOptions(){return D},GeneratedUiViewSectionContent:he,get EGeneratedUiTypeKind(){return s},get PreloadAllSchemasForTypeName(){return N}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),Le={class:"tw-relative"},Se={key:0};function Me(a,_,t,e,g,v){const u=h("b-skeleton");return l(),p("div",Le,[de("h3",null,G(t.title),1),!e.schema||!e.gameData||!e.staticConfigData?(l(),p("div",Se,[c(u,{width:"85%"}),c(u,{width:"55%"}),c(u,{width:"70%"})])):(l(),d(e.GeneratedUiViewSectionContent,{key:1,class:"tw-@container",fieldInfo:e.rootField,fieldSchema:e.schema,value:t.value,previewLocale:t.previewLocale,"logic-version":t.logicVersion,isTargetingMultiplePlayers:t.isTargetingMultiplePlayers},null,8,["fieldInfo","fieldSchema","value","previewLocale","logic-version","isTargetingMultiplePlayers"]))])}const Ve=U(Ce,[["render",Me],["__file","MetaGeneratedSection.vue"]]);export{Ve as M,ve as a};
