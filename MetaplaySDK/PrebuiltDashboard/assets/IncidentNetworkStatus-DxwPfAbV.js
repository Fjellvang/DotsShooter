import{d as F,x as B,c as x,ck as L,M as V,s as G,v as H,cK as E,b as P,o as n,e as c,w as t,k as d,n as m,a,F as b,r as k,t as o,p as l,$ as D,l as g,_ as j,f as O,h as T,cj as R,ac as A}from"./index-B7jvAjdE.js";import{c as z}from"./utils-Dwlepb3M.js";import{g as C}from"./incidents-CceQLPcP.js";const K=F({__name:"NetworkDiagnosticReport",props:{incidentId:{},playerId:{}},setup(S,{expose:r}){r();const w=S,{data:e}=B(C(w.playerId,w.incidentId)),i=e.value?.networkReport||e.value?.networkReportObsolete,h=x(()=>[i.gameServerIPv4,i.gameServerIPv6]),u=x(()=>[{name:"CDN IPv4",result:i.gameCdnSocketIPv4},{name:"Google.com IPv4",result:i.googleComIPv4},{name:"Microsoft.com IPv4",result:i.microsoftComIPv4},{name:"Apple.com IPv4",result:i.appleComIPv4},{name:"CDN IPv6",result:i.gameCdnSocketIPv6},{name:"Google.com IPv6",result:i.googleComIPv6},{name:"Microsoft.com IPv6",result:i.microsoftComIPv6},{name:"Apple.com IPv6",result:i.appleComIPv6}]),_=x(()=>[{name:"CDN IPv4",result:i.gameCdnHttpIPv4},{name:"CDN IPv6",result:i.gameCdnHttpIPv6}]);function s(v){return L.fromISO(v).as("milliseconds")+"ms"}function f(v){let I=!0;for(const M in v)v[M]?.isSuccess===!1&&(I=!1);return I}function p(v){let I=L.fromMillis(0);for(const M in v)if(v[M]?.elapsed){const N=E(v[M].elapsed);N>I&&(I=N)}return I}const y={props:w,playerIncidentData:e,report:i,gameServerProbes:h,internetProbes:u,httpProbes:_,prettyPrintLatency:s,isEndpointSuccess:f,getEndpointDuration:p,get Duration(){return L},computed:x,get MBadge(){return V},get MList(){return G},get MListItem(){return H},get useSubscription(){return B},get parseDotnetTimeSpanToLuxon(){return E},get getPlayerIncidentSubscriptionOptions(){return C}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),q={class:"tw-relative tw-top-0.5 tw-text-xs+ tw-text-neutral-500"},J={key:0,class:"text-monospace log border rounded bg-light tw-mt-1 tw-w-full"},Q={key:0},U={class:"tw-text-neutral-400"},W={key:0,class:"tw-text-red-500"},X={key:1,class:"tw-text-xs+ tw-italic tw-text-red-500"},Y={class:"tw-relative tw-top-0.5 tw-text-xs+ tw-text-neutral-500"},Z={key:0,class:"text-monospace log border rounded bg-light tw-mt-1 tw-w-full"},$={class:"tw-text-red-500"},ee={class:"tw-text-red-500"},te={key:3,class:"tw-text-xs+ tw-italic tw-text-red-500"},ne={class:"tw-relative tw-top-0.5 tw-text-xs+ tw-text-neutral-500"},re={key:0,class:"text-monospace log border rounded bg-light mb-0 tw-mt-1 tw-w-full"},se={class:"tw-text-neutral-400"},ae={key:0,class:"tw-text-red-500"},oe={key:1,class:"tw-text-xs+ tw-italic tw-text-red-500"};function ie(S,r,w,e,i,h){const u=P("b-col"),_=P("b-row");return e.playerIncidentData&&(e.playerIncidentData.networkReport||e.playerIncidentData.networkReportObsolete)?(n(),c(_,{key:0},{default:t(()=>[d(u,{sm:"6"},{default:t(()=>[r[5]||(r[5]=m("h6",{class:"tw-mb-1"},"Game Server Probes",-1)),e.gameServerProbes&&e.gameServerProbes.length>0?(n(),c(e.MList,{key:0,showBorder:""},{default:t(()=>[(n(!0),a(b,null,k(e.gameServerProbes,s=>(n(),a("div",null,[(n(!0),a(b,null,k(s.gateways,(f,p)=>(n(),c(e.MListItem,{class:"tw-px-3",key:p},{badge:t(()=>[m("span",q,o(e.prettyPrintLatency(e.getEndpointDuration(f))),1)]),"top-right":t(()=>[e.isEndpointSuccess(f)?(n(),c(e.MBadge,{key:0,variant:"success"},{default:t(()=>r[0]||(r[0]=[l("Success")]),void 0,!0),_:1})):(n(),c(e.MBadge,{key:1,variant:"danger"},{default:t(()=>r[1]||(r[1]=[l("Failed")]),void 0,!0),_:1}))]),"bottom-left":t(()=>[e.isEndpointSuccess(f)?g("",!0):(n(),a("div",J,[(n(!0),a(b,null,k(f,(y,v)=>(n(),a("div",{key:v},[y&&typeof y=="object"?(n(),a("pre",Q,[m("div",{class:D(y.isSuccess?"text-success":"tw-text-red-500")},[l(o(v)+" ",1),m("span",U,o(e.prettyPrintLatency(e.parseDotnetTimeSpanToLuxon(y.elapsed))),1)],2),y.isSuccess?g("",!0):(n(),a("div",W,"Error: "+o(y.error),1))])):g("",!0)]))),128))]))]),default:t(()=>[m("div",{class:D(e.isEndpointSuccess(f)?"":"tw-text-red-500")},o(s.hostname)+":"+o(p),3)],void 0,!0),_:2},1024))),128))]))),256))],void 0,!0),_:1})):(n(),a("div",X,"Data unavailable for this probe.")),r[6]||(r[6]=m("h6",{class:"tw-mb-1 tw-mt-4"},"HTTP Probes",-1)),e.httpProbes&&e.httpProbes.length>0?(n(),c(e.MList,{key:2,showBorder:""},{default:t(()=>[(n(!0),a(b,null,k(e.httpProbes,s=>(n(),a("div",{key:s.name},[s.result.status!==null?(n(),c(e.MListItem,{key:0,class:"tw-px-3"},{badge:t(()=>[m("span",Y,o(e.prettyPrintLatency(e.parseDotnetTimeSpanToLuxon(s.result.status.elapsed))),1)]),"top-right":t(()=>[s.result.status.isSuccess?(n(),c(e.MBadge,{key:0,variant:"success"},{default:t(()=>r[2]||(r[2]=[l("Success")]),void 0,!0),_:1})):(n(),c(e.MBadge,{key:1,variant:"danger"},{default:t(()=>r[3]||(r[3]=[l("Failed")]),void 0,!0),_:1}))]),"bottom-left":t(()=>[s.result.status.isSuccess?g("",!0):(n(),a("div",Z,[m("span",$,o(s.result.status.error),1)]))]),default:t(()=>[m("span",{class:D(s.result.status.isSuccess?"":"tw-text-red-500")},o(s.name),3)],void 0,!0),_:2},1024)):(n(),c(e.MListItem,{key:1,class:"tw-px-3"},{"top-right":t(()=>[d(e.MBadge,{variant:"danger"},{default:t(()=>r[4]||(r[4]=[l("No data")]),void 0,!0),_:1})]),default:t(()=>[m("span",ee,o(s.name),1)],void 0,!0),_:2},1024))]))),128))],void 0,!0),_:1})):(n(),a("div",te,"Data unavailable for this probe."))],void 0,!0),_:1}),d(u,{sm:"6"},{default:t(()=>[r[9]||(r[9]=m("h6",{class:"tw-mb-1"},"Internet Probes",-1)),e.internetProbes&&e.internetProbes.length>0?(n(),c(e.MList,{key:0,showBorder:""},{default:t(()=>[(n(!0),a(b,null,k(e.internetProbes,s=>(n(),c(e.MListItem,{class:"tw-px-3",key:s.name},{badge:t(()=>[m("span",ne,o(e.prettyPrintLatency(e.getEndpointDuration(s.result))),1)]),"top-right":t(()=>[e.isEndpointSuccess(s.result)?(n(),c(e.MBadge,{key:0,variant:"success"},{default:t(()=>r[7]||(r[7]=[l("Success")]),void 0,!0),_:1})):(n(),c(e.MBadge,{key:1,variant:"danger"},{default:t(()=>r[8]||(r[8]=[l("Failed")]),void 0,!0),_:1}))]),"bottom-left":t(()=>[e.isEndpointSuccess(s.result)?g("",!0):(n(),a("pre",re,[(n(!0),a(b,null,k(s.result,(f,p)=>(n(),a(b,{key:p},[f&&p!=="$type"?(n(),a("div",{key:0,class:D(f.isSuccess?"text-success":"tw-text-red-500")},[l(o(p)+" ",1),m("span",se,o(e.prettyPrintLatency(e.parseDotnetTimeSpanToLuxon(f.elapsed))),1),f.isSuccess?g("",!0):(n(),a("div",ae,"Error: "+o(f.error),1))],2)):g("",!0)],64))),128))]))]),default:t(()=>[m("span",{class:D(e.isEndpointSuccess(s.result)?"":"tw-text-red-500")},o(s.name),3)],void 0,!0),_:2},1024))),128))],void 0,!0),_:1})):(n(),a("div",oe,"Data unavailable for this probe."))],void 0,!0),_:1})],void 0,!0),_:1})):g("",!0)}const de=j(K,[["render",ie],["__scopeId","data-v-a1ecfee3"],["__file","NetworkDiagnosticReport.vue"]]),le=F({__name:"IncidentNetworkStatus",props:{incidentId:{},playerId:{}},setup(S,{expose:r}){r();const w=S,e=O();T(async()=>{R(C(w.playerId,w.incidentId)).then(_=>{e.value=_}).catch(_=>{throw new Error(`Failed to load data from the server! Reason: ${_.message}.`)})});const i=x(()=>e.value?.networkError!==void 0),h=x(()=>!!(i.value||e.value?.networkReport||e.value?.networkReportObsolete)),u={props:w,playerIncidentData:e,hasNetworkConnectionFailure:i,hasNetworkInformation:h,computed:x,onMounted:T,ref:O,get getObjectPrintableFields(){return z},get MCard(){return A},get fetchSubscriptionDataOnceOnly(){return R},get getPlayerIncidentSubscriptionOptions(){return C},NetworkDiagnosticReport:de};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),ue={key:0,class:"tw-m-0 tw-text-center tw-italic tw-text-neutral-500"},ce={key:1};function fe(S,r,w,e,i,h){const u=P("b-td"),_=P("b-tr"),s=P("b-tbody"),f=P("b-table-simple");return e.playerIncidentData?(n(),c(e.MCard,{key:0,title:"Network Status",variant:e.hasNetworkInformation?"primary":"neutral"},{default:t(()=>[e.hasNetworkInformation?g("",!0):(n(),a("p",ue,"Network information not included in this incident report.")),e.hasNetworkConnectionFailure?(n(),a("div",ce,[d(f,{small:"",responsive:"xs"},{default:t(()=>[d(s,null,{default:t(()=>[d(_,null,{default:t(()=>[d(u,{class:"td-left"},{default:t(()=>r[0]||(r[0]=[l("Error")]),void 0,!0),_:1}),d(u,{class:"td-right tw-text-right"},{default:t(()=>[l(o(e.playerIncidentData.subType),1)],void 0,!0),_:1})],void 0,!0),_:1}),d(_,null,{default:t(()=>[d(u,{class:"td-left"},{default:t(()=>r[1]||(r[1]=[l("Reachability")]),void 0,!0),_:1}),d(u,{class:"td-right tw-text-right"},{default:t(()=>[l(o(e.playerIncidentData.networkReachability),1)],void 0,!0),_:1})],void 0,!0),_:1}),(n(!0),a(b,null,k(e.getObjectPrintableFields(e.playerIncidentData.endpoint),p=>(n(),c(_,{key:p.key},{default:t(()=>[d(u,{class:"td-left"},{default:t(()=>[l(o(p.name),1)],void 0,!0),_:2},1024),d(u,{class:"td-right tw-text-right"},{default:t(()=>[l(o(p.value),1)],void 0,!0),_:2},1024)],void 0,!0),_:2},1024))),128)),d(_,null,{default:t(()=>[d(u,{class:"td-left"},{default:t(()=>r[2]||(r[2]=[l("TLS Peer")]),void 0,!0),_:1}),d(u,{class:"td-right tw-text-right"},{default:t(()=>[l(o(e.playerIncidentData.tlsPeerDescription),1)],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1})])):g("",!0),d(e.NetworkDiagnosticReport,{incidentId:w.incidentId,playerId:w.playerId},null,8,["incidentId","playerId"])],void 0,!0),_:1},8,["variant"])):g("",!0)}const we=j(le,[["render",fe],["__scopeId","data-v-1bc07c38"],["__file","IncidentNetworkStatus.vue"]]);export{we as default};
