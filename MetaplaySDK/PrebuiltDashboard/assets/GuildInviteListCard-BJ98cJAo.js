import{d as w,x as L,c as x,N as T,cK as b,v as C,a8 as D,b as y,o as I,e as F,w as n,k as o,p as r,n as c,t as g,a as h,l as A,_ as B}from"./index-B7jvAjdE.js";import{M as d,a as f,c as u,b as O}from"./metaListUtils-B-xQ0HnD.js";import{g as U}from"./guilds-LGK3Q8Wf.js";const k=w({__name:"GuildInviteListCard",props:{guildId:{}},setup(v,{expose:s}){s();const l=v,{data:i}=L(U(l.guildId)),_=["inviteCode","playerId"],S=[d.asUnsorted(),new d("Player","playerId",f.Ascending),new d("Player","playerId",f.Descending)],a=x(()=>{const e=[];for(const M of Object.values(i.value.model.members))for(const p of Object.values(M.invites))e.push({...p,playerId:M.id,expiresAt:T.fromISO(p.createdAt).plus(b(p.expiresAfter))});return e}),m=[new O("usage",[new u("Unused",e=>e.numTimesUsed===0),new u("Part used",e=>e.numTimesUsed>0&&e.numTimesUsed<e.numMaxUsages),new u("Fully used",e=>e.numTimesUsed===e.numMaxUsages)])],t={props:l,guildData:i,searchFields:_,sortOptions:S,invites:a,filterSets:m,get DateTime(){return T},computed:x,get MetaListFilterOption(){return u},get MetaListFilterSet(){return O},get MetaListSortDirection(){return f},get MetaListSortOption(){return d},get MListItem(){return C},get MTextButton(){return D},get useSubscription(){return L},get parseDotnetTimeSpanToLuxon(){return b},get getSingleGuildSubscriptionOptions(){return U}};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}}),G={key:0};function N(v,s,l,i,_,S){const a=y("meta-time"),m=y("meta-list-card");return I(),F(m,{id:"guild-member-list-card",title:"Invites",icon:"people-arrows",tooltip:"A list of invites that are currently active for this guild.",itemList:i.invites,searchFields:i.searchFields,sortOptions:i.sortOptions,filterSets:i.filterSets,emptyMessage:"This guild has no active invites!"},{"item-card":n(t=>[o(i.MListItem,null,{"top-right":n(()=>[o(i.MTextButton,{to:`/players/${t.item.playerId}`},{default:n(()=>s[0]||(s[0]=[r("View player")]),void 0,!0),_:2},1032,["to"])]),"bottom-left":n(()=>[c("span",null,[r("Used: "+g(t.item.numTimesUsed)+" ",1),t.item.numMaxUsages>0?(I(),h("span",G,"/"+g(t.item.numMaxUsages),1)):A("",!0)])]),"bottom-right":n(()=>[c("div",null,[s[1]||(s[1]=r("Created: ")),o(a,{date:t.item.createdAt},null,8,["date"])]),c("div",null,[s[2]||(s[2]=r("Expires: ")),o(a,{date:t.item.expiresAt},null,8,["date"])])]),default:n(()=>[r(g(t.item.inviteCode),1)],void 0,!0),_:2},1024)]),_:1},8,["itemList"])}const E=B(k,[["render",N],["__file","GuildInviteListCard.vue"]]);export{E as default};
