import{Q as y,S as b,R,T as _,U as V,V as B,W as H,X as Y,Y as Z,d as J,I as L,J as F,K as z,f as w,x as P,y as S,c as T,C,Z as O,a as h,e as U,m as I,l as N,F as K,r as Q,o as p,_ as W}from"./index-B7jvAjdE.js";import{g as k}from"./utils-Dwlepb3M.js";import{G as X}from"./GeneratedUiFormDynamicComponent-DrqrTIRR.js";import{a as q}from"./_arrayIncludes-B3ShBz6l.js";import{i as M}from"./identity-DKeuBCMA.js";function x(e,a,n){switch(n.length){case 0:return e.call(a);case 1:return e.call(a,n[0]);case 2:return e.call(a,n[0],n[1]);case 3:return e.call(a,n[0],n[1],n[2])}return e.apply(a,n)}var $=800,ee=16,ie=Date.now;function ae(e){var a=0,n=0;return function(){var i=ie(),t=ee-(i-n);if(n=i,t>0){if(++a>=$)return arguments[0]}else a=0;return e.apply(void 0,arguments)}}function ne(e){return function(){return e}}var te=y?function(e,a){return y(e,"toString",{configurable:!0,enumerable:!1,value:ne(a),writable:!0})}:M,re=ae(te),G=Math.max;function oe(e,a,n){return a=G(a===void 0?e.length-1:a,0),function(){for(var i=arguments,t=-1,s=G(i.length-a,0),r=Array(s);++t<s;)r[t]=i[a+t];t=-1;for(var o=Array(a+1);++t<a;)o[t]=i[t];return o[a]=n(r),x(e,this,o)}}function le(e,a){return re(oe(e,a,M),e+"")}var j=b?b.isConcatSpreadable:void 0;function se(e){return R(e)||_(e)||!!(j&&e&&e[j])}function de(e,a,n,i,t){var s=-1,r=e.length;for(n||(n=se),t||(t=[]);++s<r;){var o=e[s];n(o)&&V(t,o)}return t}function A(e){return B(e)&&H(e)}var ce=200;function ue(e,a,n,i){var t=-1,s=q,r=!0,o=e.length,f=[],v=a.length;if(!o)return f;a.length>=ce&&(s=Z,r=!1,a=new Y(a));e:for(;++t<o;){var u=e[t],m=u;if(u=u!==0?u:0,r&&m===m){for(var g=v;g--;)if(a[g]===m)continue e;f.push(u)}else s(a,m,i)||f.push(u)}return f}var D=le(function(e,a){return A(e)?ue(e,de(a,1,A)):[]});const fe=J({__name:"GeneratedUiFormLocalizedField",props:{...L,value:{type:Object,default:()=>({localizations:[]})}},emits:F,setup(e,{expose:a,emit:n}){a();const i=e,t=n,{update:s}=z(i,t),r=w(i.value.localizations),o=c=>Object.fromEntries(i.editLocales.map(l=>l in c?[l,c[l]]:[l,""])),f=c=>{r.value={...r.value,[i.previewLocale]:c};const l=o({...i.value.localizations,[i.previewLocale]:c}),d={...i.value,localizations:l};s(d)},v=(c,l)=>{r.value={...r.value,[l]:c};const d=o({...i.value.localizations,[l]:c}),E={...i.value,localizations:d};s(E)},{data:u}=P(S()),m=T(()=>{const c=i.fieldSchema.fields.find(d=>d.fieldName==="Localizations"),l={};for(const d of i.editLocales)l[d]={...i.fieldInfo,fieldName:i.fieldInfo.fieldName,fieldType:c.typeParams[1],displayProps:{displayName:O(i.fieldInfo.fieldName??"")+" ("+k(d,u.value)+")"}};return l});C(()=>i.editLocales,(c,l)=>{const d=D(c,l??[]);d.length&&setTimeout(()=>{r.value[d[0]]&&v(r.value[d[0]],d[0])}),setTimeout(()=>{f(i.previewLocale&&i.previewLocale in i.value.localizations?i.value.localizations[i.previewLocale]:"")},10)},{deep:!0,flush:"post"});const g={props:i,emit:t,emitUpdate:s,localizationCache:r,pruneLocalizations:o,update:f,updateLocale:v,gameData:u,localizedFields:m,get difference(){return D},computed:T,watch:C,ref:w,get getLanguageName(){return k},get camelCaseToTitleCase(){return O},get useSubscription(){return P},get getGameDataSubscriptionOptions(){return S},get generatedUiFieldFormEmits(){return F},get generatedUiFieldFormProps(){return L},get useGeneratedUiFieldForm(){return z},GeneratedUiFormDynamicComponent:X};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),me={key:0},pe={key:1};function ge(e,a,n,i,t,s){return e.previewLocale?(p(),h("div",me,[i.localizedFields?(p(),U(i.GeneratedUiFormDynamicComponent,I({key:0},i.props,{fieldInfo:i.localizedFields[e.previewLocale],key:e.fieldInfo.fieldName+"-"+e.previewLocale,value:n.value.localizations&&n.value.localizations[e.previewLocale]||void 0,onInput:i.update,fieldPath:e.fieldPath+"/Localizations/"+e.previewLocale,contextObj:e.fieldSchema.useAsContext?n.value:e.contextObj,"logic-version":e.logicVersion,disabled:e.disabled,isTargetingMultiplePlayers:e.isTargetingMultiplePlayers}),null,16,["fieldInfo","value","fieldPath","contextObj","logic-version","disabled","isTargetingMultiplePlayers"])):N("",!0)])):(p(),h("div",pe,[(p(!0),h(K,null,Q(e.editLocales,r=>(p(),h("div",{key:e.fieldInfo.fieldName+"-"+r},[i.localizedFields?(p(),U(i.GeneratedUiFormDynamicComponent,I({key:0},i.props,{ref_for:!0},{fieldInfo:i.localizedFields[r],value:n.value.localizations&&n.value.localizations[r]||void 0,onInput:o=>i.updateLocale(o,r),fieldPath:e.fieldPath+"/Localizations/"+r,contextObj:e.fieldSchema.useAsContext?n.value:e.contextObj,"logic-version":e.logicVersion,disabled:e.disabled,isTargetingMultiplePlayers:e.isTargetingMultiplePlayers}),null,16,["fieldInfo","value","onInput","fieldPath","contextObj","logic-version","disabled","isTargetingMultiplePlayers"])):N("",!0)]))),128))]))}const Fe=W(fe,[["render",ge],["__file","GeneratedUiFormLocalizedField.vue"]]);export{Fe as default};
