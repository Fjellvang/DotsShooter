import{d as L,f as g,C as M,bG as x,ad as I,v as T,a8 as k,L as w,b as c,o as n,e as i,w as e,p as r,t as d,k as o,n as v,l as b,_ as P}from"./index-B7jvAjdE.js";const S=L({__name:"PlayerListCard",props:{playerIds:{},title:{default:"Players"},emptyMessage:{default:"No players."}},setup(_,{expose:a}){a();const u=I(),s=_,y=g();M(()=>s.playerIds,async(f,l)=>{x(f,l)||await p()},{deep:!0,immediate:!0});async function p(){const f=await u.post("players/bulkValidate",{PlayerIds:s.playerIds});y.value=f.data.filter(l=>l.validId).map(l=>l.playerData)}const m={gameServerApi:u,props:s,playersWithInfo:y,fetchPlayerInfos:p,get isEqual(){return x},ref:g,watch:M,get useGameServerApi(){return I},get MListItem(){return T},get MTextButton(){return k},get MTooltip(){return w}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),B={class:"tw-flex"};function C(_,a,u,s,y,p){const m=c("fa-icon"),f=c("meta-time"),l=c("meta-list-card");return n(),i(l,{title:u.title,icon:"user",emptyMessage:u.emptyMessage,searchFields:["name","id"],itemList:s.playersWithInfo,"data-testid":"player-list-card"},{"item-card":e(({item:t})=>[t?.deserializedSuccessfully?t?.deletionStatus.startsWith("Deleted")?(n(),i(s.MListItem,{key:1,class:"text-danger"},{"top-right":e(()=>[r(d(t.id),1)]),"bottom-left":e(()=>a[2]||(a[2]=[r("Player deleted")])),"bottom-right":e(()=>[o(s.MTextButton,{to:`/players/${t.id}`},{default:e(()=>a[3]||(a[3]=[r("View player")]),void 0,!0),_:2},1032,["to"])]),default:e(()=>[r("☠️ "+d(t.name),1)],void 0,!0),_:2},1024)):(n(),i(s.MListItem,{key:2},{badge:e(()=>[v("div",B,[t?.totalIapSpend>0?(n(),i(s.MTooltip,{key:0,content:"Total IAP spend: $"+t.totalIapSpend.toFixed(2),noUnderline:""},{default:e(()=>[o(m,{class:"text-muted",icon:"money-check-alt",size:"sm"})],void 0,!0),_:2},1032,["content"])):b("",!0),t?.isDeveloper?(n(),i(s.MTooltip,{key:1,content:"This player is a developer.",noUnderline:""},{default:e(()=>[o(m,{class:"text-muted",icon:"user-astronaut",size:"sm"})],void 0,!0),_:1})):b("",!0)])]),"top-right":e(()=>[r(d(t?.id),1)]),"bottom-left":e(()=>[r("Level "+d(t?.level),1)]),"bottom-right":e(()=>[v("div",null,[a[4]||(a[4]=r("Joined ")),o(f,{date:t?.createdAt,showAs:"date"},null,8,["date"])]),o(s.MTextButton,{to:`/players/${t.id}`},{default:e(()=>a[5]||(a[5]=[r("View player")]),void 0,!0),_:2},1032,["to"])]),default:e(()=>[r(d(t?.name),1)],void 0,!0),_:2},1024)):(n(),i(s.MListItem,{key:0,class:"text-danger"},{"top-right":e(()=>[r(d(t?.id),1)]),"bottom-left":e(()=>a[0]||(a[0]=[r("Failed to load player!")])),"bottom-right":e(()=>[o(s.MTextButton,{to:`/players/${t.id}`},{default:e(()=>a[1]||(a[1]=[r("View player")]),void 0,!0),_:2},1032,["to"])]),default:e(()=>[r("🛑 "+d(t?.name),1)],void 0,!0),_:2},1024))]),_:1},8,["title","emptyMessage","itemList"])}const h=P(S,[["render",C],["__file","PlayerListCard.vue"]]);export{h as P};
