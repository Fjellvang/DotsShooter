import{d as L,c,v as S,a8 as M,b as h,o as g,e as w,w as r,k as p,n as T,t as m,p as u,l as v,_ as b}from"./index-B7jvAjdE.js";import{M as o,a,b as I}from"./metaListUtils-B-xQ0HnD.js";const x=1,B=L({__name:"IncidentHistoryCard",props:{incidents:{},playerName:{},isLimitedTo:{},showMainPageLink:{type:Boolean},showDescription:{type:Boolean}},setup(f,{expose:s}){s();const e=f,t=["type","reason","incidentId"],y=[new o("Time","uploadedAt",a.Ascending),new o("Time","uploadedAt",a.Descending),new o("Type","type",a.Ascending),new o("Type","type",a.Descending)],_=c(()=>[I.asDynamicFilterSet(e.incidents??[],"type",n=>n.type)]),d=c(()=>e.playerName===void 0),l=c(()=>{if(e.showDescription)return"Incidents are reports of situations where a player may have had the game crash or freeze. They should be investigated and fixed!";{let n="";return e.isLimitedTo?n+=`The ${e.isLimitedTo} most recent`:n+="Recent",n+=" incidents (crashes, network errors, etc.) that have happened to ",d.value?n+="any player.":n+=`${e.playerName}.`,n}}),i={props:e,searchFields:t,sortOptions:y,defaultSortOption:x,filterSets:_,isGlobalScope:d,description:l,computed:c,get MetaListFilterSet(){return I},get MetaListSortDirection(){return a},get MetaListSortOption(){return o},get MListItem(){return S},get MTextButton(){return M}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),O={class:"tw-text-red-500"};function k(f,s,e,t,y,_){const d=h("meta-time"),l=h("meta-list-card");return g(),w(l,{title:"Recent Incident History",icon:"ambulance",dangerous:"",itemList:e.incidents,allowPausing:"",searchFields:t.searchFields,filterSets:t.filterSets,sortOptions:t.sortOptions,defaultSortOption:t.defaultSortOption,emptyMessage:"No incidents reported.",moreInfoUri:e.showMainPageLink?"/playerIncidents":void 0,moreInfoLabel:e.showMainPageLink?"player incidents":void 0,permission:"api.incident_reports.view",description:t.description},{"item-card":r(i=>[p(t.MListItem,null,{"top-right":r(()=>[p(d,{date:i.item.uploadedAt},null,8,["date"])]),"bottom-left":r(()=>[T("div",O,m(i.item.reason),1),t.isGlobalScope?(g(),w(t.MTextButton,{key:0,permission:"api.players.view",to:`/players/${i.item.playerId}`},{default:r(()=>[u(m(i.item.playerId),1)],void 0,!0),_:2},1032,["to"])):v("",!0)]),"bottom-right":r(()=>[p(t.MTextButton,{permission:"api.incident_reports.view",to:`/players/${i.item.playerId}/${i.item.incidentId}`},{default:r(()=>s[0]||(s[0]=[u("View incident")]),void 0,!0),_:2},1032,["to"])]),default:r(()=>[u(m(i.item.type),1)],void 0,!0),_:2},1024)]),_:1},8,["itemList","filterSets","moreInfoUri","moreInfoLabel","description"])}const C=b(B,[["render",k],["__file","IncidentHistoryCard.vue"]]);export{C as I};
