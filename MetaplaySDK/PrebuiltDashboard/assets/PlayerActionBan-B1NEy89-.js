import{d as w,x as p,f as c,c as m,ad as y,ae as g,o as _,a as h,k as f,w as M,n as i,l as x,_ as P}from"./index-B7jvAjdE.js";import{M as A}from"./MActionModalButton-CvWVuTB-.js";import{M as C}from"./MInputSwitch-C-Z-JJsG.js";import{a as b}from"./players-CydHenLG.js";import"./MActionModal-coQLkvWs.js";import"./index-fVjXqxSF.js";import"./index-B_QkKjtG.js";const k=w({__name:"PlayerActionBan",props:{playerId:{}},setup(l,{expose:t}){t();const{showSuccessNotification:r}=g(),e=l,s=y(),{data:a,refresh:n}=p(b(e.playerId)),o=c(!1),B=m(()=>o.value!==a.value.model.isBanned);function S(){o.value=a.value.model.isBanned}async function v(){const u=o.value;await s.post(`/players/${a.value.id}/ban`,{isBanned:u}),r(`${a.value.model.playerName||"n/a"} ${u?"banned":"un-banned"}.`),n()}const d={showSuccessNotification:r,props:e,gameServerApi:s,playerData:a,playerRefresh:n,isCurrentlyBanned:o,isStatusChanged:B,resetModal:S,updateBannedStatus:v,computed:m,ref:c,get useGameServerApi(){return y},get MInputSwitch(){return C},get MActionModalButton(){return A},get useNotifications(){return g},get useSubscription(){return p},get getSinglePlayerSubscriptionOptions(){return b}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),N={key:0},I={class:"tw-flex tw-justify-between"};function D(l,t,r,e,s,a){return e.playerData?(_(),h("div",N,[f(e.MActionModalButton,{"modal-title":"Change Banned Status",action:e.updateBannedStatus,"trigger-button-label":e.playerData.model.isBanned?"Un-Ban Player":"Ban Player",variant:"warning","ok-button-label":"Save Settings","ok-button-disabled-tooltip":e.isStatusChanged?void 0:`Toggle the switch to ${e.playerData.model.isBanned?"un-ban":"ban"} this player.`,permission:"api.players.ban",onShow:e.resetModal,"data-testid":"action-ban-player"},{default:M(()=>[i("div",I,[t[1]||(t[1]=i("span",{class:"tw-font-semibold"},"Player Banned",-1)),f(e.MInputSwitch,{class:"tw-relative tw-top-1 tw-mr-3","model-value":e.isCurrentlyBanned,name:"isPlayerBanned",size:"small","onUpdate:modelValue":t[0]||(t[0]=n=>e.isCurrentlyBanned=n),"data-testid":"player-ban-toggle"},null,8,["model-value"])]),t[2]||(t[2]=i("span",{class:"tw-text-xs+ tw-text-neutral-500"},"Banning will disconnect the player and prevent them from logging into the game.",-1))]),_:1},8,["trigger-button-label","ok-button-disabled-tooltip"])])):x("",!0)}const R=P(k,[["render",D],["__file","PlayerActionBan.vue"]]);export{R as default};
