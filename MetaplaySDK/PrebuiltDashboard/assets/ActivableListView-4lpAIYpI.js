import{d as h,f as d,N as v,c as o,x as y,A as M,M as D,P as V,b as g,o as C,e as I,w as i,k as t,n as c,p as T,a as x,l as N,t as O,_ as k}from"./index-B7jvAjdE.js";import{M as B,a as K}from"./MViewContainer-BTeE2xDT.js";import{M as L}from"./MInputDateTime-DL6Zd7-d.js";import{M as P}from"./MInputSwitch-C-Z-JJsG.js";import{M as A}from"./MSingleColumnLayout-B4K0ZAFA.js";import{M as U}from"./MetaGenericActivablesCard-B0ifo0sg.js";import"./MInputHintMessage-DbuBS4Kn.js";import"./index-DZuvHjnn.js";import"./index-B_QkKjtG.js";import"./metaListUtils-B-xQ0HnD.js";import"./activables-DQj9-VnO.js";import"./MetaActivablePhaseBadge-DS0XHNhH.js";import"./players-CydHenLG.js";import"./MetaActivablesBaseCard-4tvZk2v-.js";import"./numberUtils-CkF0oMe2.js";const G=h({__name:"ActivableListView",props:{categoryKey:{}},setup(p,{expose:a}){a();const s=p,e=d(!1),n=d(v.now()),b=o(()=>{if(e.value)return n.value});function l(_){_&&(n.value=_)}const m=o(()=>e.value?String(n.value.toISO()):String(v.now().toISO())),{data:u}=y(M()),r=o(()=>f.value.categories[s.categoryKey]),S=o(()=>r.value.displayName),E=o(()=>r.value.description),f=o(()=>u.value?.activablesMetadata),w={props:s,userEvaluationEnabled:e,userEvaluationTime:n,customEvaluationTime:b,onDateTimeChange:l,evaluationTimeUsed:m,staticConfigData:u,categoryInfo:r,categoryDisplayName:S,categoryDescription:E,activablesMetadata:f,get DateTime(){return v},computed:o,ref:d,get MBadge(){return D},get MInputDateTime(){return L},get MInputSwitch(){return P},get MPageOverviewCard(){return B},get MSingleColumnLayout(){return A},get MViewContainer(){return K},get sentenceCaseToKebabCase(){return V},get useSubscription(){return y},MetaGenericActivablesCard:U,get getStaticConfigSubscriptionOptions(){return M}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),j={class:"pl-3 bg-white rounded border shadow-sm tw-pb-4 tw-pr-4","data-testid":"custom-time"},z={class:"font-weight-bold"},q={key:0,class:"border-top pt-2 tw-mt-4"},F={class:"mt-2 tw-w-full tw-text-center"},H={class:"small text-muted tw-italic"};function J(p,a,s,e,n,b){const l=g("b-row"),m=g("b-col"),u=g("meta-raw-data");return C(),I(e.MViewContainer,{permission:"api.activables.view","is-loading":!e.activablesMetadata},{overview:i(()=>[t(e.MPageOverviewCard,{title:`View ${e.categoryDisplayName}`,subtitle:e.categoryDescription,"data-testid":`${e.sentenceCaseToKebabCase(e.props.categoryKey)}-overview-card`},null,8,["title","subtitle","data-testid"])]),default:i(()=>[t(e.MSingleColumnLayout,null,{default:i(()=>[t(e.MetaGenericActivablesCard,{category:s.categoryKey,longList:!0,title:e.categoryDisplayName,emptyMessage:`No ${e.categoryDisplayName} defined. Set them up in your game configs to start using the feature!`,customEvaluationIsoDateTime:e.customEvaluationTime?String(e.customEvaluationTime.toISO()):void 0,hideCollapse:""},null,8,["category","title","emptyMessage","customEvaluationIsoDateTime"])],void 0,!0),_:1}),t(l,{class:"tw-mt-4","align-h":"center"},{default:i(()=>[t(m,{class:"tw-mb-4",md:"10",xl:"9"},{default:i(()=>[c("div",j,[t(l,{class:"mb-2 tw-mt-4","align-h":"between","no-gutters":""},{default:i(()=>[c("span",z,[a[2]||(a[2]=T("Enable Custom Evaluation Time")),t(e.MBadge,{class:"tw-ml-1",tooltip:"The phases on the page are evaluated according to the local time of your browser. Enabling custom evaluation allows you to set an exact time to evaluate against.",shape:"pill"},{default:i(()=>a[1]||(a[1]=[T("?")]),void 0,!0),_:1})]),t(e.MInputSwitch,{class:"tw-relative tw-top-1 tw-mr-1","model-value":e.userEvaluationEnabled,name:"customEvaluationTimeEnabled",size:"small","onUpdate:modelValue":a[0]||(a[0]=r=>e.userEvaluationEnabled=r)},null,8,["model-value"])],void 0,!0),_:1}),e.userEvaluationEnabled?(C(),x("div",q,[t(e.MInputDateTime,{label:"Evaluation Time (UTC)","model-value":e.userEvaluationTime,"onUpdate:modelValue":e.onDateTimeChange},null,8,["model-value"])])):N("",!0),c("div",F,[c("span",H,"Schedules evaluated at "+O(e.evaluationTimeUsed),1)])])],void 0,!0),_:1})],void 0,!0),_:1}),t(u,{kvPair:e.activablesMetadata,name:"activablesMetadata"},null,8,["kvPair"])],void 0,!0),_:1},8,["is-loading"])}const le=k(G,[["render",J],["__file","ActivableListView.vue"]]);export{le as default};
