import{ar as u,as as O,at as E,au as C,bv as I,c6 as v,c5 as m,bw as y,aK as a,aN as T,aS as k,c7 as f}from"./index-B7jvAjdE.js";var c=u("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),l=c.build(),o=O({getPositionerId:e=>e.ids?.positioner??`dialog:${e.id}:positioner`,getBackdropId:e=>e.ids?.backdrop??`dialog:${e.id}:backdrop`,getContentId:e=>e.ids?.content??`dialog:${e.id}:content`,getTriggerId:e=>e.ids?.trigger??`dialog:${e.id}:trigger`,getTitleId:e=>e.ids?.title??`dialog:${e.id}:title`,getDescriptionId:e=>e.ids?.description??`dialog:${e.id}:description`,getCloseTriggerId:e=>e.ids?.closeTrigger??`dialog:${e.id}:close`,getContentEl:e=>o.getById(e,o.getContentId(e)),getPositionerEl:e=>o.getById(e,o.getPositionerId(e)),getBackdropEl:e=>o.getById(e,o.getBackdropId(e)),getTriggerEl:e=>o.getById(e,o.getTriggerId(e)),getTitleEl:e=>o.getById(e,o.getTitleId(e)),getDescriptionEl:e=>o.getById(e,o.getDescriptionId(e)),getCloseTriggerEl:e=>o.getById(e,o.getCloseTriggerId(e))});function P(e,d,t){const i=e.context["aria-label"],n=e.matches("open"),s=e.context.renderedElements;return{open:n,setOpen(r){r!==n&&d(r?"OPEN":"CLOSE")},getTriggerProps(){return t.button({...l.trigger.attrs,dir:e.context.dir,id:o.getTriggerId(e.context),"aria-haspopup":"dialog",type:"button","aria-expanded":n,"data-state":n?"open":"closed","aria-controls":o.getContentId(e.context),onClick(r){r.defaultPrevented||d("TOGGLE")}})},getBackdropProps(){return t.element({...l.backdrop.attrs,dir:e.context.dir,hidden:!n,id:o.getBackdropId(e.context),"data-state":n?"open":"closed"})},getPositionerProps(){return t.element({...l.positioner.attrs,dir:e.context.dir,id:o.getPositionerId(e.context),style:{pointerEvents:n?void 0:"none"}})},getContentProps(){return t.element({...l.content.attrs,dir:e.context.dir,role:e.context.role,hidden:!n,id:o.getContentId(e.context),tabIndex:-1,"data-state":n?"open":"closed","aria-modal":!0,"aria-label":i||void 0,"aria-labelledby":i||!s.title?void 0:o.getTitleId(e.context),"aria-describedby":s.description?o.getDescriptionId(e.context):void 0})},getTitleProps(){return t.element({...l.title.attrs,dir:e.context.dir,id:o.getTitleId(e.context)})},getDescriptionProps(){return t.element({...l.description.attrs,dir:e.context.dir,id:o.getDescriptionId(e.context)})},getCloseTriggerProps(){return t.button({...l.closeTrigger.attrs,dir:e.context.dir,id:o.getCloseTriggerId(e.context),type:"button",onClick(r){r.defaultPrevented||(r.stopPropagation(),d("CLOSE"))}})}}}function b(e){const d=E(e);return C({id:"dialog",initial:d.open?"open":"closed",context:{role:"dialog",renderedElements:{title:!0,description:!0},modal:!0,trapFocus:!0,preventScroll:!0,closeOnInteractOutside:!0,closeOnEscape:!0,restoreFocus:!0,...d},created:["setAlertDialogProps"],watch:{open:["toggleVisibility"]},states:{open:{entry:["checkRenderedElements","syncZIndex"],activities:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{"CONTROLLED.CLOSE":{target:"closed"},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]}},closed:{on:{"CONTROLLED.OPEN":{target:"open"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}}}},{guards:{isOpenControlled:t=>!!t["open.controlled"]},activities:{trackDismissableElement(t,i,{send:n}){return I(()=>o.getContentEl(t),{defer:!0,pointerBlocking:t.modal,exclude:[o.getTriggerEl(t)],onInteractOutside(r){t.onInteractOutside?.(r),t.closeOnInteractOutside||r.preventDefault()},persistentElements:t.persistentElements,onFocusOutside:t.onFocusOutside,onPointerDownOutside:t.onPointerDownOutside,onEscapeKeyDown(r){t.onEscapeKeyDown?.(r),t.closeOnEscape||r.preventDefault()},onDismiss(){n({type:"CLOSE",src:"interact-outside"})}})},preventScroll(t){if(t.preventScroll)return v(o.getDoc(t))},trapFocus(t){if(!t.trapFocus||!t.modal)return;let i;const n=m(()=>{const s=o.getContentEl(t);if(s){i=f(s,{document:o.getDoc(t),escapeDeactivates:!1,preventScroll:!0,fallbackFocus:s,returnFocusOnDeactivate:!!t.restoreFocus,allowOutsideClick:!0,initialFocus:t.initialFocusEl?.()??void 0,setReturnFocus(r){return t.finalFocusEl?.()??r}});try{i.activate()}catch{}}});return()=>{i?.deactivate(),n()}},hideContentBelow(t){return t.modal?y(()=>[o.getContentEl(t)],{defer:!0}):void 0}},actions:{setAlertDialogProps(t){t.role==="alertdialog"&&(t.initialFocusEl||(t.initialFocusEl=()=>o.getCloseTriggerEl(t)),t.closeOnInteractOutside=!1)},checkRenderedElements(t){a(()=>{t.renderedElements.title=!!o.getTitleEl(t),t.renderedElements.description=!!o.getDescriptionEl(t)})},syncZIndex(t){a(()=>{const i=o.getContentEl(t);if(!i)return;const s=o.getWin(t).getComputedStyle(i);[o.getPositionerEl(t),o.getBackdropEl(t)].forEach(p=>{p?.style.setProperty("--z-index",s.zIndex)})})},invokeOnClose(t){t.onOpenChange?.({open:!1})},invokeOnOpen(t){t.onOpenChange?.({open:!0})},toggleVisibility(t,i,{send:n}){n({type:t.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:i})}}})}var g=T()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]),D=k(g);const S=Object.freeze(Object.defineProperty({__proto__:null,anatomy:c,connect:P,machine:b,props:g,splitProps:D},Symbol.toStringTag,{value:"Module"}));export{P as c,S as d,b as m};
