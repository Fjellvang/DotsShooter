import{d as V,aj as S,ab as R,c as x,f as B,C as D,h as L,aU as N,M as I,a0 as j,L as A,o as d,a as f,n as i,F as q,r as E,e as O,w as o,$ as M,p as s,t as g,l as P,k as u,a2 as U,_ as Z}from"./index-B7jvAjdE.js";import{M as H}from"./MInputSimpleSelectDropdown-DIlBEFcs.js";import{M as Q}from"./MSingleColumnLayout-B4K0ZAFA.js";const Y=V({__name:"MTabLayout",props:{tabs:{},currentTab:{default:0},id:{default:"tab"}},emits:["onTabChanged"],setup(T,{expose:n,emit:l}){n();const t=S(),v=R(),{doesHavePermission:y}=N(),a=T,r=l;function b(e){return y(e.permission)?e.disabledTooltip:`You need ${e.permission} to view this tab.`}async function _(e){await C(e),m.value=e,r("onTabChanged",e)}const w=x(()=>{if(t.query[a.id]){if(typeof t.query[a.id]=="string"){const e=Number(t.query[a.id]);if(!c(e))return e}console.warn(`Invalid route query tab parameter: ${JSON.stringify(t.query[a.id])}.`)}});function p(){if(w.value)return w.value;if(c(a.currentTab))return console.warn(`Invalid initial tab index: ${a.currentTab}.`),0;let e;return a.tabs[a.currentTab].disabledTooltip?(e=a.tabs.findIndex(h=>!b(h)),e===-1&&(console.warn("All tabs are disabled. Falling back to showing the first tab."),e=0)):e=a.currentTab,e}function c(e){return e<0||e>=a.tabs.length}const m=B(p());D(()=>a.currentTab,e=>{c(e)||_(e)}),L(async()=>{w.value||await C(m.value),r("onTabChanged",m.value)});async function C(e){await v.replace({path:t.path,query:{...t.query,[a.id]:e.toString()}})}const z=x(()=>a.tabs.map((e,h)=>({label:e.label,value:h,disabled:!!b(e)})));function F(e){return`MTabLayout(:tabs="tabs")
  template(#tab-${e})
    //- Your content here`}const k={route:t,router:v,doesHavePermission:y,props:a,emit:r,getTabDisabledReason:b,selectTab:_,routeQuerySelectedTab:w,getInitialTab:p,isTabIndexOutOfBounds:c,internalCurrentTab:m,updateRouteQuery:C,tabOptions:z,getExampleCodeForTab:F,ref:B,onMounted:L,computed:x,watch:D,get useRoute(){return S},get useRouter(){return R},get usePermissions(){return N},MBadge:I,MCallout:j,MTooltip:A,MInputSimpleSelectDropdown:H,MSingleColumnLayout:Q};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),G=["data-testid"],J=["disabled","aria-selected","onClick","data-testid"],K=["data-testid"],W=["data-testid"],X={class:"tw-mt-2 tw-rounded tw-border tw-border-neutral-300 tw-bg-neutral-50 tw-p-2 tw-text-xs"};function $(T,n,l,t,v,y){return d(),f(q,null,[i("div",{class:"tw-sticky tw-z-10 -tw-mx-1 tw-mb-10 tw-hidden tw-flex-row tw-flex-wrap tw-items-center tw-justify-center tw-space-x-1 tw-border-b tw-border-t tw-border-neutral-200 tw-bg-white tw-py-1 @sm:-tw-mx-4 @md:tw-flex",style:{top:"-1px"},"data-testid":l.id},[(d(!0),f(q,null,E(l.tabs,(a,r)=>(d(),O(t.MTooltip,{key:r,content:t.getTabDisabledReason(a),"no-underline":"",class:M({"tw-cursor-not-allowed":!!t.getTabDisabledReason(a)}),"data-testid":`${l.id}-${r}-tooltip`},{default:o(()=>[i("button",{class:M(["tw-relative tw-rounded tw-px-4 tw-py-2 tw-font-semibold",{"tw-bg-blue-500 tw-text-white":t.internalCurrentTab===r&&!t.getTabDisabledReason(a),"tw-text-blue-500 hover:tw-text-blue-600 active:tw-text-blue-700 hover:tw-bg-neutral-300 active:tw-bg-neutral-400":t.internalCurrentTab!==r,"tw-bg-neutral-200 tw-text-neutral-400 tw-pointer-events-none":!!t.getTabDisabledReason(a)}]),role:"tab",disabled:!!t.getTabDisabledReason(a),"aria-selected":t.internalCurrentTab===r,onClick:b=>t.selectTab(r),"data-testid":`${l.id}-${r}`},[s(g(a.label),1),a.highlighted?(d(),f("div",{key:0,class:"tw-absolute tw-right-1 tw-top-1 tw-size-3 tw-rounded-full tw-bg-white","data-testid":`${l.id}-${r}-highlighted`},null,8,K)):P("",!0),a.highlighted?(d(),f("svg",{key:1,class:M(["tw-absolute tw-right-0.5 tw-top-0.5 tw-size-4",{"tw-fill-red-500":t.internalCurrentTab!==r,"tw-fill-red-600":t.internalCurrentTab===r}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},n[1]||(n[1]=[i("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-8-5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0v-4.5A.75.75 0 0 1 10 5Zm0 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z","clip-rule":"evenodd"},null,-1)]),2)):P("",!0)],10,J)],void 0,!0),_:2},1032,["content","class","data-testid"]))),128))],8,G),u(t.MInputSimpleSelectDropdown,{class:"tw-mb-10 tw-block @md:tw-hidden",label:"Current Tab","model-value":t.internalCurrentTab,options:t.tabOptions,"onUpdate:modelValue":n[0]||(n[0]=a=>t.selectTab(Number(a))),"data-testid":l.id},null,8,["model-value","options","data-testid"]),i("div",{class:"tw-mx-auto tw-min-h-96 tw-max-w-6xl tw-@container","data-testid":`${l.id}-content`},[t.doesHavePermission(l.tabs[t.internalCurrentTab].permission)?U(T.$slots,`tab-${t.internalCurrentTab}`,{key:t.internalCurrentTab},()=>[u(t.MSingleColumnLayout,null,{default:o(()=>[u(t.MCallout,{class:"tw-mx-auto tw-max-w-xl",title:`${l.tabs[t.internalCurrentTab].label} is empty`,variant:"neutral","data-testid":"default-content"},{default:o(()=>[i("p",null,[n[4]||(n[4]=s("Get going by adding content to the ")),u(t.MBadge,null,{default:o(()=>[s(g(l.tabs[t.internalCurrentTab].label),1)],void 0,!0),_:1}),n[5]||(n[5]=s(" template slot."))]),i("pre",X,[i("code",null,g(t.getExampleCodeForTab(t.internalCurrentTab)),1)])],void 0,!0),_:1},8,["title"])],void 0,!0),_:1})]):(d(),O(t.MSingleColumnLayout,{key:0},{default:o(()=>[u(t.MCallout,{class:"tw-mx-auto tw-my-3 tw-max-w-xl",title:"Not Authorized"},{default:o(()=>[i("p",null,[n[2]||(n[2]=s("Unfortunately, you do not have the ")),u(t.MBadge,{variant:"warning"},{default:o(()=>[s(g(l.tabs[t.internalCurrentTab].permission),1)],void 0,!0),_:1}),n[3]||(n[3]=s(" permission to view this tab. Please contact your game admin for access."))])],void 0,!0),_:1})],void 0,!0),_:1}))],8,W)],64)}const nt=Z(Y,[["render",$],["__file","MTabLayout.vue"]]);export{nt as M};
