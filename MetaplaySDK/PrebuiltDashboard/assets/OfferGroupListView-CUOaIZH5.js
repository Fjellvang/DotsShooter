import{d as P,f,N as c,c as d,x as b,M as V,b as _,o as l,e as h,w as a,k as n,n as o,a as p,F as D,r as I,l as O,p as E,t as y,_ as G}from"./index-B7jvAjdE.js";import{M as B,a as k}from"./MViewContainer-BTeE2xDT.js";import{M as q}from"./MInputDateTime-DL6Zd7-d.js";import{M as N}from"./MInputSwitch-C-Z-JJsG.js";import{O as U}from"./OfferGroupsCard-DDUoV9fW.js";import{a as T}from"./offers-DYY0Z2EJ.js";import"./MInputHintMessage-DbuBS4Kn.js";import"./index-DZuvHjnn.js";import"./index-B_QkKjtG.js";import"./metaListUtils-B-xQ0HnD.js";import"./MetaActivablePhaseBadge-DS0XHNhH.js";import"./players-CydHenLG.js";import"./MetaActivablesBaseCard-4tvZk2v-.js";import"./numberUtils-CkF0oMe2.js";import"./activables-DQj9-VnO.js";const L=P({__name:"OfferGroupListView",setup(M,{expose:t}){t();const u=f(!1),e=f(c.now()),v=d(()=>{if(u.value)return e.value}),g=d(()=>u.value?String(e.value.toISO()):String(c.now().toISO()));function i(m){m&&(e.value=m)}const{data:s,error:r}=b(T()),S=d(()=>{if(s.value){const C=Object.values(s.value.offerGroups).map(x=>x.config.placement);return[...new Set(C)]}else return null}),w={userEvaluationEnabled:u,userEvaluationTime:e,customEvaluationTime:v,evaluationTimeUsed:g,onDateTimeChange:i,allOffersData:s,allOffersError:r,uniquePlacements:S,get DateTime(){return c},computed:d,ref:f,get MBadge(){return V},get MInputDateTime(){return q},get MInputSwitch(){return N},get MPageOverviewCard(){return B},get MViewContainer(){return k},get useSubscription(){return b},OfferGroupsCard:U,get getAllOffersSubscriptionOptions(){return T}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),j={key:0},A={class:"pl-3 bg-white rounded border shadow-sm tw-pb-4 tw-pr-4","data-testid":"custom-time"},F={class:"font-weight-bold"},z={key:0,class:"border-top pt-2 tw-mt-4"},Y={class:"mt-2 tw-w-full tw-text-center"},H={class:"small text-muted tw-italic"};function J(M,t,u,e,v,g){const i=_("b-row"),s=_("b-col");return l(),h(e.MViewContainer,{permission:"api.activables.view","is-loading":!e.allOffersData,error:e.allOffersError},{overview:a(()=>[n(e.MPageOverviewCard,{title:"View Offer Groups","data-testid":"offers-group-overview-card"},{default:a(()=>t[1]||(t[1]=[o("p",{class:"tw-mb-1"},"Offer groups are sets of in-game offers that can be scheduled, targeted and placed in different parts of your game.",-1),o("p",{class:"tw-text-xs+ tw-text-neutral-500"},"Individual offers can be re-used in multiple groups to show them in many places at the same time. You can set fine-tuned limits and conditions to both individual offers and their groups to create advanced shop management scenarios.",-1)]),void 0,!0),_:1})]),default:a(()=>[e.uniquePlacements&&e.uniquePlacements.length>0?(l(),p("div",j,[n(i,{class:"mb-2 tw-mt-4","no-gutters":"","align-v":"center"},{default:a(()=>t[2]||(t[2]=[o("h3",null,"Offer Groups By Placement",-1)]),void 0,!0),_:1}),n(i,{"align-h":"center"},{default:a(()=>[(l(!0),p(D,null,I(e.uniquePlacements,r=>(l(),h(s,{class:"tw-mb-4",key:r,lg:"6"},{default:a(()=>[n(e.OfferGroupsCard,{class:"h-100",title:`${r}`,placement:r,emptyMessage:"This placements has no offer groups in it.",customEvaluationIsoDateTime:e.customEvaluationTime?String(e.customEvaluationTime.toISO()):void 0,hideCollapse:"",hidePlacement:""},null,8,["title","placement","customEvaluationIsoDateTime"])],void 0,!0),_:2},1024))),128))],void 0,!0),_:1})])):O("",!0),n(i,{class:"mb-2 tw-mt-4","align-h":"center"},{default:a(()=>[n(s,{class:"tw-mb-4",md:"8",xl:"7"},{default:a(()=>[o("div",A,[n(i,{class:"mb-2 tw-mt-4","align-h":"between","no-gutters":""},{default:a(()=>[o("span",F,[t[4]||(t[4]=E("Enable Custom Evaluation Time")),n(e.MBadge,{class:"tw-ml-1",tooltip:"The phases on the page are evaluated according to the local time of your browser. Enabling custom evaluation allows you to set an exact time to evaluate against.",shape:"pill"},{default:a(()=>t[3]||(t[3]=[E("?")]),void 0,!0),_:1})]),n(e.MInputSwitch,{class:"tw-relative tw-top-1 tw-mr-1","model-value":e.userEvaluationEnabled,name:"customEvaluationTimeEnabled",size:"small","onUpdate:modelValue":t[0]||(t[0]=r=>e.userEvaluationEnabled=r)},null,8,["model-value"])],void 0,!0),_:1}),e.userEvaluationEnabled?(l(),p("div",z,[n(e.MInputDateTime,{label:"Evaluation Time (UTC)","model-value":e.userEvaluationTime,"onUpdate:modelValue":e.onDateTimeChange},null,8,["model-value"])])):O("",!0),o("div",Y,[o("span",H,"Schedules evaluated at "+y(e.evaluationTimeUsed),1)])])],void 0,!0),_:1})],void 0,!0),_:1})],void 0,!0),_:1},8,["is-loading","error"])}const ue=G(L,[["render",J],["__file","OfferGroupListView.vue"]]);export{ue as default};
