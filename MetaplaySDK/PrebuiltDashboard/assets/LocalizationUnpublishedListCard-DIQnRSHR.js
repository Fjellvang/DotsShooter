import{d as I,aj as h,c as S,x as w,M as N,v as E,a8 as C,b as y,o as s,e as f,w as n,k as r,p as o,l as m,a as L,n as p,t as O,_ as P}from"./index-B7jvAjdE.js";import{M as l,a as u,c as d,b as _}from"./metaListUtils-B-xQ0HnD.js";import{L as T}from"./LocalizationActionArchive-DWBO1oXR.js";import{L as R}from"./LocalizationActionPublish--nJzps7S.js";import{g as F}from"./localization-Z8p1s5Vr.js";import"./MActionModal-coQLkvWs.js";import"./index-fVjXqxSF.js";import"./MInputSwitch-C-Z-JJsG.js";import"./index-B_QkKjtG.js";const U=1,V=I({__name:"LocalizationUnpublishedListCard",setup(x,{expose:i}){i();const g=h(),t=S(()=>g.path),{data:c}=w(F()),A=S(()=>{if(c.value!==void 0)return c.value.filter(e=>!(e.publishedAt!==null||e.unpublishedAt!==null||e.isActive))});function b(e){const B=t.value,k=B.endsWith("/")?"":"/";return B+k+e}function v(e){return e.id}const a=[new l("Build Time","buildStartedAt",u.Ascending),new l("Build Time","buildStartedAt",u.Descending),new l("Name","name",u.Ascending),new l("Name","name",u.Descending)],z=["id","name","description"],D=[new _("status",[new d("Building",e=>e.bestEffortStatus==="Building"),new d("Success",e=>e.bestEffortStatus==="Success"),new d("Failed",e=>e.bestEffortStatus==="Failed")]),new _("archived",[new d("Archived",e=>e.isArchived),new d("Not archived",e=>!e.isArchived,!0)])],M={route:g,detailsRoute:t,allLocalizationsDataRaw:c,allLocalizationsData:A,getDetailPagePath:b,getItemKey:v,defaultSortOption:U,sortOptions:a,searchFields:z,filterSets:D,computed:S,get useRoute(){return h},get MetaListFilterOption(){return d},get MetaListFilterSet(){return _},get MetaListSortDirection(){return u},get MetaListSortOption(){return l},get MBadge(){return N},get MListItem(){return E},get MTextButton(){return C},get useSubscription(){return w},LocalizationActionArchive:T,LocalizationActionPublish:R,get getAllLocalizationsSubscriptionOptions(){return F}};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}}),K={key:0,class:"tw-space-x-1"},j={key:1},W={key:0};function q(x,i,g,t,c,A){const b=y("meta-time"),v=y("meta-list-card");return s(),f(v,{title:"Unpublished Localizations",itemList:t.allLocalizationsData,getItemKey:t.getItemKey,searchFields:t.searchFields,filterSets:t.filterSets,sortOptions:t.sortOptions,defaultSortOption:t.defaultSortOption,icon:"language","data-testid":"localization-unpublished-list-card"},{"item-card":n(({item:a})=>[r(t.MListItem,null,{badge:n(()=>[a.isActive?(s(),f(t.MBadge,{key:0,variant:"success"},{default:n(()=>i[0]||(i[0]=[o("Active")]),void 0,!0),_:1})):m("",!0),a.isArchived?(s(),f(t.MBadge,{key:1,variant:"neutral"},{default:n(()=>i[1]||(i[1]=[o("Archived")]),void 0,!0),_:1})):m("",!0),a.bestEffortStatus==="Failed"?(s(),f(t.MBadge,{key:2,variant:"danger"},{default:n(()=>i[2]||(i[2]=[o("Failed")]),void 0,!0),_:1})):m("",!0)]),"top-right":n(()=>[a.bestEffortStatus!=="Building"?(s(),L("div",K,[p("span",null,[i[3]||(i[3]=o("Built ")),r(b,{date:a.buildStartedAt},null,8,["date"])]),r(t.LocalizationActionArchive,{localizationId:a.id,"trigger-style":"icon"},null,8,["localizationId"])])):(s(),L("div",j,[r(t.MBadge,{variant:"primary"},{default:n(()=>i[4]||(i[4]=[o("Building...")]),void 0,!0),_:1})]))]),"bottom-left":n(()=>[p("div",null,O(a.description||"No description available"),1)]),"bottom-right":n(()=>[a.bestEffortStatus!=="Building"?(s(),L("span",W,[p("div",null,[r(t.MTextButton,{to:`localizations/diff?newRoot=${a.id}`,"disabled-tooltip":a.bestEffortStatus==="Failed"?"Unable to diff because this localization failed to build.":void 0,"data-testid":"diff-localization"},{default:n(()=>i[5]||(i[5]=[o("Diff to active")]),void 0,!0),_:2},1032,["to","disabled-tooltip"])]),p("div",null,[r(t.MTextButton,{to:t.getDetailPagePath(a.id),"data-testid":"view-localization"},{default:n(()=>i[6]||(i[6]=[o("View localization")]),void 0,!0),_:2},1032,["to"])]),r(t.LocalizationActionPublish,{localizationId:a.id,"text-button":""},null,8,["localizationId"])])):m("",!0)]),default:n(()=>[o(O(a.name||"No name available"),1)],void 0,!0),_:2},1024)]),_:1},8,["itemList"])}const et=P(V,[["render",q],["__file","LocalizationUnpublishedListCard.vue"]]);export{et as default};
