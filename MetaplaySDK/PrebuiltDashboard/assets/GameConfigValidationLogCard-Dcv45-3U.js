import{d as B,x as C,c as m,M as D,a8 as H,bb as O,q as k,v as F,s as I,b as W,o as c,e as y,w as s,k as d,p as g,t as l,n as r,a as v,l as w,$ as A,_ as G}from"./index-B7jvAjdE.js";import P from"./MetaListCard-CSSWUW2Z.js";import E from"./MetaPluralLabel-Bwt-L0ie.js";import{M as o,a,b as h,c as u}from"./metaListUtils-B-xQ0HnD.js";import{b as x}from"./gameConfigs-DlpfRS5r.js";import"./MInputMultiSelectCheckbox-D_9f7ub1.js";import"./MInputCheckbox-BqateWtE.js";import"./index-B_QkKjtG.js";import"./MInputHintMessage-DbuBS4Kn.js";import"./MInputSingleSelectRadio-BukGu4ZH.js";import"./index-CDBqmjrS.js";import"./MInputText-CzhsT8yb.js";import"./debounce-B8gTqdZO.js";import"./isSymbol-B7ZrWRtH.js";import"./utils-Dwlepb3M.js";import"./_baseIteratee-BXhw53re.js";import"./toString-DMHXP3G8.js";import"./identity-DKeuBCMA.js";import"./button-group-BUOztpby.js";const T=3,U=B({__name:"GameConfigValidationLogCard",props:{gameConfigId:{}},setup(b,{expose:i}){i();const f=b,{data:t}=C(x(f.gameConfigId)),p=m(()=>t.value?.contents===null),M=m(()=>p.value?[]:t.value?.contents.metaData.buildReport?.validationMessages??void 0),L=["message","sheetName","configKey","columnHint"],n=[new o("Message","message",a.Ascending),new o("Message","message",a.Descending),new o("Warning Level","messageLevel",a.Ascending),new o("Warning Level","messageLevel",a.Descending),new o("Library","sheetName",a.Ascending),new o("Library","sheetName",a.Descending),new o("Config Key","configKey",a.Ascending),new o("Config Key","configKey",a.Descending),new o("Column","columnHint",a.Ascending),new o("Column","columnHint",a.Descending),o.asUnsorted()],S=m(()=>[new h("messageLevel",[new u("Verbose",e=>e.messageLevel==="Verbose"),new u("Debug",e=>e.messageLevel==="Debug"),new u("Information",e=>e.messageLevel==="Information"),new u("Warning",e=>e.messageLevel==="Warning"),new u("Error",e=>e.messageLevel==="Error")])]);function V(e){return{Verbose:"neutral",Debug:"neutral",Information:"primary",Warning:"warning",Error:"danger"}[e]??"danger"}function N(e){return!!e&&(e.startsWith("http://")||e.startsWith("https://"))}function K(e){return e.columnHint&&e.configKey&&e.sheetName?`${e.columnHint} of ${e.configKey} in ${e.sheetName}.`:e.columnHint&&e.configKey?`${e.columnHint} of ${e.configKey}.`:e.configKey&&e.sheetName?`${e.configKey} in ${e.sheetName}.`:e.columnHint&&e.sheetName?`${e.columnHint} in ${e.sheetName}.`:e.configKey?e.configKey:e.columnHint?e.columnHint:e.sheetName?e.sheetName:""}const _={props:f,gameConfigData:t,validationMessagesMissing:p,validationMessages:M,searchFields:L,sortOptions:n,defaultSortOption:T,filterSets:S,messageLevelBadgeVariant:V,isUrl:N,getSourceLabelForValidationMessage:K,computed:m,get MetaListFilterOption(){return u},get MetaListFilterSet(){return h},get MetaListSortOption(){return o},get MetaListSortDirection(){return a},get MetaListCard(){return P},get MetaPluralLabel(){return E},get MBadge(){return D},get MTextButton(){return H},get MClipboardCopy(){return O},get MCollapse(){return k},get MListItem(){return F},get MList(){return I},get useSubscription(){return C},get getSingleGameConfigCountsSubscriptionOptions(){return x}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),j={key:0},q={key:1},z={class:"tw-pt-3"},R={class:"tw-px-3 tw-text-xs"},J={class:"tw-ml-4"},Q={class:"tw-ml-4"},X={class:"tw-ml-4"},Y={key:0,class:"tw-pt-3"},Z={class:"tw-px-3 tw-text-xs"};function $(b,i,f,t,p,M){const L=W("fa-icon");return c(),y(t.MetaListCard,{title:"Validation Log",description:"Messages generated during validation of the game config. Validation issues may label the game config as failed.",icon:"clipboard-list",itemList:t.validationMessages,searchFields:t.searchFields,defaultSortOption:t.defaultSortOption,sortOptions:t.sortOptions,filterSets:t.filterSets,emptyMessage:t.validationMessagesMissing?"Logs not available.":"No log entries.","data-testid":"game-config-validation-log-card"},{"item-card":s(({item:n})=>[d(t.MCollapse,{extraMListItemMargin:""},{header:s(()=>[d(t.MListItem,{noLeftPadding:""},{"top-right":s(()=>[d(t.MBadge,{variant:t.messageLevelBadgeVariant(n.messageLevel)},{default:s(()=>[g(l(n.messageLevel),1)],void 0,!0),_:2},1032,["variant"])]),"bottom-left":s(()=>[r("div",null,l(t.getSourceLabelForValidationMessage(n)),1),n.variants.length>1?(c(),v("div",j,[d(t.MetaPluralLabel,{value:n.variants.length,label:"variant"},null,8,["value"]),i[0]||(i[0]=g(" affected."))])):n.variants.length===1?(c(),v("div",q,l(n.variants[0])+" variant affected.",1)):w("",!0)]),"bottom-right":s(()=>[t.isUrl(n.url)?(c(),y(t.MTextButton,{key:0,to:n.url},{default:s(()=>[i[1]||(i[1]=g("View source ")),d(L,{class:"tw-ml-1",icon:"external-link-alt"})],void 0,!0),_:2},1032,["to"])):w("",!0)]),default:s(()=>[r("span",{class:A(["tw-font-normal",{"tw-text-red-500":t.messageLevelBadgeVariant(n.messageLevel)==="danger"}])},l(n.message),3)],void 0,!0),_:2},1024)]),default:s(()=>[d(t.MList,{class:"tw-bg-neutral-100","show-border":""},{default:s(()=>[r("div",z,[i[4]||(i[4]=r("div",{class:"tw-ml-3 tw-font-mono tw-text-xs tw-text-neutral-500"},"// message_source",-1)),r("pre",R,[r("div",null,[i[2]||(i[2]=g("{")),r("div",J,'"library:" "'+l(n.sheetName)+'"',1),r("div",Q,'"configKey:" "'+l(n.configKey)+'"',1),r("div",X,'"columnHint:" "'+l(n.columnHint)+'"',1)]),i[3]||(i[3]=r("div",null,"}",-1))])]),n.variants.length>0?(c(),v("div",Y,[i[5]||(i[5]=r("div",{class:"tw-ml-3 tw-font-mono tw-text-xs tw-text-neutral-500"},"// affected_variants",-1)),r("pre",Z,l(n.variants),1)])):w("",!0)],void 0,!0),_:2},1024)],void 0,!0),_:2},1024)]),_:1},8,["itemList","filterSets","emptyMessage"])}const Me=G(U,[["render",$],["__file","GameConfigValidationLogCard.vue"]]);export{Me as default};
