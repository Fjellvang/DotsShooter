import{d as _,I as w,J as K,K as V,f,h as k,G as B,M as L,O as j,L as A,E as S,j as H,a as h,n as d,k as m,w as p,F as z,r as W,e as g,m as M,l as c,o as l,p as v,t as J,_ as R}from"./index-B7jvAjdE.js";import{L as q}from"./LabelWithLogicVersion-C_mqRCIw.js";import{G as Q}from"./GeneratedUiFormDynamicComponent-DrqrTIRR.js";const X=_({__name:"GeneratedUiFormDictionaryField",props:{...w,value:{type:Object,default:()=>({})}},emits:K,setup(i,{expose:a,emit:T}){a();const e=i,b=T,{displayName:I,displayHint:t,update:r}=V(e,b),y=f(""),o=f(""),U=f(),F=f(void 0);k(()=>{if(!e.fieldInfo.typeParams||e.fieldInfo.typeParams.length<2)throw new Error("Dictionary field must have at least 2 type params");y.value=e.fieldInfo.typeParams[0],o.value=e.fieldInfo.typeParams[1],B(o.value).then(n=>{U.value=n.typeKind}).catch(n=>{console.error(n)})});function C(n,s,P){const u={...e.fieldInfo};return u.fieldName=n,u.fieldType=s,u.typeKind=P,u}function D(n){F.value=n}function E(n,s){r({...e.value,[n]:s})}function N(){r({...e.value,[F.value]:void 0})}function O(n){const s=Object.fromEntries(Object.entries(e.value).filter(([P,u])=>P!==n));r(s)}const G={props:e,emit:b,displayName:I,displayHint:t,emitUpdate:r,keyType:y,valueType:o,valueTypeKind:U,newKey:F,copyFieldInfoAndOverwrite:C,updateKey:D,updateValue:E,add:N,remove:O,ref:f,onMounted:k,get MBadge(){return L},get MButton(){return j},get MTooltip(){return A},LabelWithLogicVersion:q,get generatedUiFieldFormEmits(){return K},get generatedUiFieldFormProps(){return w},get useGeneratedUiFieldForm(){return V},get EGeneratedUiTypeKind(){return S},get GetTypeSchemaForTypeName(){return B},GeneratedUiViewDynamicComponent:H,GeneratedUiFormDynamicComponent:Q};return Object.defineProperty(G,"__isScriptSetup",{enumerable:!1,value:!0}),G}}),Y={class:"mb-1"},Z={class:"tw-text-right"},x={class:"pl-3 pr-3 pt-3 pb-2 bg-light rounded border"},$={class:"tw-text-right"};function ee(i,a,T,e,b,I){return l(),h("div",null,[d("div",Y,[m(e.LabelWithLogicVersion,{fieldInfo:i.fieldInfo,isTargetingMultiplePlayers:i.isTargetingMultiplePlayers},{default:p(()=>[v(J(e.displayName),1),e.displayHint?(l(),g(e.MTooltip,{key:0,class:"ml-2",content:e.displayHint,noUnderline:""},{default:p(()=>[m(e.MBadge,{shape:"pill"},{default:p(()=>a[0]||(a[0]=[v("?")]),void 0,!0),_:1})],void 0,!0),_:1},8,["content"])):c("",!0)],void 0,!0),_:1},8,["fieldInfo","isTargetingMultiplePlayers"]),(l(!0),h(z,null,W(Object.entries(T.value),([t,r],y)=>(l(),h("div",{class:"mb-1",key:y},[d("div",null,[e.keyType?(l(),g(e.GeneratedUiViewDynamicComponent,M({key:0},i.$props,{ref_for:!0},{fieldInfo:e.copyFieldInfoAndOverwrite("Key",e.keyType,e.EGeneratedUiTypeKind.Primitive),value:t,fieldPath:i.fieldPath+"/$key$/"+t,"logic-version":i.logicVersion,disabled:i.disabled,isTargetingMultiplePlayers:i.isTargetingMultiplePlayers}),null,16,["fieldInfo","value","fieldPath","logic-version","disabled","isTargetingMultiplePlayers"])):c("",!0)]),d("div",Z,[m(e.MButton,{onClick:o=>e.remove(t),variant:"danger",size:"small","disabled-tooltip":i.disabled?"This button has been disabled remotely.":void 0},{default:p(()=>a[1]||(a[1]=[v("Remove")]),void 0,!0),_:2},1032,["onClick","disabled-tooltip"])]),d("div",x,[e.valueType&&e.valueTypeKind?(l(),g(e.GeneratedUiFormDynamicComponent,M({key:0},e.props,{ref_for:!0},{fieldInfo:e.copyFieldInfoAndOverwrite("Value",e.valueType,e.valueTypeKind),value:r,onInput:o=>e.updateValue(t,o),fieldPath:i.fieldPath+"/"+t,"logic-version":i.logicVersion,disabled:i.disabled,isTargetingMultiplePlayers:i.isTargetingMultiplePlayers}),null,16,["fieldInfo","value","onInput","fieldPath","logic-version","disabled","isTargetingMultiplePlayers"])):c("",!0)])]))),128))]),d("div",null,[e.keyType?(l(),g(e.GeneratedUiFormDynamicComponent,M({key:0},e.props,{fieldInfo:e.copyFieldInfoAndOverwrite("KeyToAdd",e.keyType,e.EGeneratedUiTypeKind.Primitive),value:e.newKey,onInput:e.updateKey,"logic-version":i.logicVersion,disabled:i.disabled,isTargetingMultiplePlayers:i.isTargetingMultiplePlayers}),null,16,["fieldInfo","value","logic-version","disabled","isTargetingMultiplePlayers"])):c("",!0),d("div",$,[m(e.MButton,{"disabled-tooltip":i.disabled?"This button has been disabled remotely.":void 0,onClick:e.add,size:"small"},{default:p(()=>a[2]||(a[2]=[v("Add New")]),void 0,!0),_:1},8,["disabled-tooltip"])])])])}const te=R(X,[["render",ee],["__file","GeneratedUiFormDictionaryField.vue"]]);export{te as default};
