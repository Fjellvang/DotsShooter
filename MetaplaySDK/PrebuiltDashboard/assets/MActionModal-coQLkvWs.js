import{d as A,f as y,c as g,bc as P,ap as T,ao as L,aq as O,b2 as D,ai as I,ba as G,O as K,o as n,e as j,k as d,w as i,a as s,m as v,l as w,bY as z,n as a,t as E,a2 as f,p as k,B as U,_ as H}from"./index-B7jvAjdE.js";import{m as Y,c as F,d as J}from"./index-fVjXqxSF.js";const Q=A({__name:"MActionModal",props:{title:{},action:{},variant:{default:"primary"},okButtonLabel:{default:"Ok"},okButtonDisabledTooltip:{default:void 0},disableSafetyLock:{type:Boolean,default:!1},modalSize:{default:"default"},dataTestid:{default:void 0},okButtonDisabled:{default:void 0}},emits:["ok","cancel","show","hide"],setup(l,{expose:e,emit:o}){const t=l,c=y(!1),_=g(()=>u.value?"loading":p.value?"error":c.value?"success":"default"),m=o;function B(){u.value=!1,p.value=void 0,c.value=!1,h.value.setOpen(!0),m("show")}function b(){h.value.setOpen(!1)}e({open:B,close:b});const x=P(),N=g(()=>{const r={default:"tw-max-w-lg",large:"tw-max-w-5xl"};return x["right-panel"]?r.large:r[t.modalSize]}),u=y(!1),p=y();async function V(){u.value=!0;try{c.value=!0,await t.action(),u.value=!1,m("ok"),x["result-panel"]||b()}catch(r){u.value=!1,p.value=r,console.error(r)}}function q(){m("cancel"),b()}const[M,C]=T(Y({id:L("modal"),closeOnInteractOutside:!1,onOpenChange:r=>{r.open||m("hide")}})),h=g(()=>F(M.value,C,O)),S={props:t,okPromiseTriggered:c,visualState:_,emit:m,open:B,close:b,slots:x,modalSizeClasses:N,okPromisePending:u,okPromiseError:p,ok:V,cancel:q,state:M,send:C,api:h,computed:g,Teleport:D,ref:y,useSlots:P,get makeIntoUniqueKey(){return L},get dialog(){return J},get normalizeProps(){return O},get useMachine(){return T},MErrorCallout:I,MButtonGroupLayout:G,MButton:K};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),R={key:0,class:"tw-pointer-events-auto tw-fixed tw-inset-0 tw-overflow-y-auto tw-@container"},W=["data-testid"],X={class:"tw-overflow-hidden tw-overflow-ellipsis tw-font-bold tw-text-neutral-900",role:"heading"},Z={key:0,class:"tw-my-14 tw-flex tw-animate-bounce tw-justify-center tw-italic tw-text-neutral-500"},$={key:1},tt={class:"tw-flex tw-justify-end"},et={key:2},at={key:0,class:"tw-mt-4 tw-flex tw-justify-end"},ot={key:3},lt={class:"tw-mb-4 tw-gap-8 tw-space-y-8 @4xl:tw-flex @4xl:tw-space-y-0"},nt={class:"tw-overflow-x-auto @4xl:tw-flex-1"},st={key:0,class:"tw-overflow-x-auto @4xl:tw-flex-1"},it={key:0,class:"tw-overflow-x-auto tw-pb-3 @4xl:tw-flex-1"},rt={class:"tw-mr-1"};function dt(l,e,o,t,c,_){return n(),j(D,{to:"body"},[d(z,{name:"backdrop-fade"},{default:i(()=>[t.api.open?(n(),s("div",v({key:0},t.api.getBackdropProps(),{class:"tw-pointer-events-none tw-fixed tw-inset-0"}),null,16)):w("",!0)],void 0,!0),_:1}),d(z,{name:"modal-fade"},{default:i(()=>[t.api.open?(n(),s("div",R,[a("div",v(t.api.getPositionerProps(),{class:"tw-relative tw-p-1 @md:tw-px-5"},{"data-testid":o.dataTestid}),[a("div",v(t.api.getContentProps(),{class:"tw-mx-auto tw-overflow-x-hidden tw-overflow-y-visible tw-rounded-lg tw-bg-white tw-p-4 tw-shadow-xl tw-transition-transform tw-duration-1000 tw-@container @md:tw-mt-24 @md:tw-w-full @md:tw-px-5 @md:tw-pt-3.5"},{class:t.modalSizeClasses}),[a("div",v(t.api.getTitleProps(),{class:"tw-mb-2 tw-flex tw-justify-between"}),[a("span",X,E(o.title),1),a("span",null,[f(l.$slots,"modal-subtitle")]),a("button",{class:"tw-relative -tw-top-0.5 tw-inline-flex tw-h-7 tw-w-7 tw-shrink-0 tw-items-center tw-justify-center tw-rounded tw-font-semibold hover:tw-bg-neutral-100 active:tw-bg-neutral-200",onClick:t.close},e[0]||(e[0]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"tw-w-6 tw-h-6"},[a("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z","clip-rule":"evenodd"})],-1)]))],16),e[8]||(e[8]=a("div",{class:"-tw-mx-10 tw-mb-3 tw-border-b tw-border-neutral-200"},null,-1)),t.visualState==="loading"?(n(),s("div",Z,"Loading, please hold...")):t.visualState==="error"?(n(),s("div",$,[e[2]||(e[2]=a("p",null,"Oh snap, something went wrong while trying to perform the action. Here's what we know:",-1)),t.okPromiseError?(n(),j(t.MErrorCallout,{key:0,class:"tw-my-4",error:t.okPromiseError},null,8,["error"])):w("",!0),a("div",tt,[d(t.MButton,{variant:"neutral",onClick:t.close},{default:i(()=>e[1]||(e[1]=[k("Close")]),void 0,!0),_:1})])])):t.visualState==="success"?(n(),s("div",et,[f(l.$slots,"result-panel",{},()=>[e[3]||(e[3]=a("p",{class:"tw-my-14 tw-flex tw-justify-center tw-italic tw-text-neutral-500"},"Success!",-1))]),l.$slots["result-panel"]?(n(),s("div",at,[d(t.MButton,v(l.$attrs,{variant:"neutral",onClick:t.close,"data-testid":o.dataTestid?o.dataTestid+"-close":void 0}),{default:i(()=>e[4]||(e[4]=[k("Close")]),void 0,!0),_:1},16,["data-testid"])])):w("",!0)])):(n(),s("div",ot,[a("div",lt,[a("div",nt,[f(l.$slots,"default",{},()=>[e[5]||(e[5]=k("Default modal content goes here..."))])]),l.$slots["right-panel"]?(n(),s("div",st,[f(l.$slots,"right-panel")])):w("",!0)]),l.$slots["bottom-panel"]?(n(),s("div",it,[f(l.$slots,"bottom-panel")])):w("",!0),e[7]||(e[7]=a("div",{class:"-tw-mx-10 tw-mb-2 tw-border-b tw-border-neutral-200"},null,-1)),d(t.MButtonGroupLayout,null,{default:i(()=>[d(t.MButton,{variant:o.variant,"disabled-tooltip":o.okButtonDisabledTooltip,safetyLock:!o.disableSafetyLock,onClick:t.ok,"data-testid":o.dataTestid?o.dataTestid+"-ok-button":void 0},U({default:i(()=>[k(E(o.okButtonLabel),1)]),_:2},[l.$slots["ok-button-icon"]?{name:"icon",fn:i(()=>[a("span",rt,[f(l.$slots,"ok-button-icon")])]),key:"0"}:void 0]),1032,["variant","disabled-tooltip","safetyLock","data-testid"]),d(t.MButton,{variant:"neutral",onClick:t.cancel,"data-testid":o.dataTestid?o.dataTestid+"-cancel-button":void 0},{default:i(()=>e[6]||(e[6]=[k("Cancel")]),void 0,!0),_:1},8,["data-testid"])],void 0,!0),_:3})]))],16)],16,W)])):w("",!0)],void 0,!0),_:3})])}const ft=H(Q,[["render",dt],["__file","MActionModal.vue"]]);export{ft as M};
