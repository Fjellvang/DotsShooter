import{ar as Ve,aE as he,as as Te,bo as ye,bp as Se,ay as h,az as Y,aA as Pe,bq as $,aC as ke,br as Le,bs as Ne,bt as Fe,at as Ae,au as Re,bu as _e,bv as De,bw as He,bx as ee,by as Ue,aK as S,aG as Me,bz as J,bA as pe,aL as j,bB as Be,aF as Ge,bC as xe,bD as Ke,d as Ie,an as te,c as F,f as R,ao as Z,bE as ne,h as le,bF as oe,bG as ie,C as ae,ap as re,ae as se,aq as ue,o as b,a as w,m as P,t as M,l as B,n as v,b5 as We,bH as qe,$ as de,a2 as ce,p as ge,F as ze,r as Ye,k as je,w as Q,b7 as Ze,b8 as Je,_ as me,e as Qe}from"./index-B7jvAjdE.js";import{L as ve}from"./index-qTA83-by.js";import{M as Xe}from"./MInputHintMessage-DbuBS4Kn.js";var fe=Ve("combobox").parts("root","clearTrigger","content","control","input","item","itemGroup","itemGroupLabel","itemIndicator","itemText","label","list","positioner","trigger"),C=fe.build(),q=t=>he(new ve(t));q.empty=()=>he(new ve({items:[]}));var i=Te({getRootId:t=>t.ids?.root??`combobox:${t.id}`,getLabelId:t=>t.ids?.label??`combobox:${t.id}:label`,getControlId:t=>t.ids?.control??`combobox:${t.id}:control`,getInputId:t=>t.ids?.input??`combobox:${t.id}:input`,getContentId:t=>t.ids?.content??`combobox:${t.id}:content`,getPositionerId:t=>t.ids?.positioner??`combobox:${t.id}:popper`,getTriggerId:t=>t.ids?.trigger??`combobox:${t.id}:toggle-btn`,getClearTriggerId:t=>t.ids?.clearTrigger??`combobox:${t.id}:clear-btn`,getItemGroupId:(t,l)=>t.ids?.itemGroup?.(l)??`combobox:${t.id}:optgroup:${l}`,getItemGroupLabelId:(t,l)=>t.ids?.itemGroupLabel?.(l)??`combobox:${t.id}:optgroup-label:${l}`,getItemId:(t,l)=>t.ids?.item?.(l)??`combobox:${t.id}:option:${l}`,getContentEl:t=>i.getById(t,i.getContentId(t)),getInputEl:t=>i.getById(t,i.getInputId(t)),getPositionerEl:t=>i.getById(t,i.getPositionerId(t)),getControlEl:t=>i.getById(t,i.getControlId(t)),getTriggerEl:t=>i.getById(t,i.getTriggerId(t)),getClearTriggerEl:t=>i.getById(t,i.getClearTriggerId(t)),getHighlightedItemEl:t=>{const l=t.highlightedValue;if(l==null)return;const e=`[role=option][data-value="${CSS.escape(l)}"`;return ye(i.getContentEl(t),e)},focusInputEl:t=>{const l=i.getInputEl(t);i.isActiveElement(t,l)||l?.focus({preventScroll:!0})},focusTriggerEl:t=>{const l=i.getTriggerEl(t);i.isActiveElement(t,l)||l?.focus({preventScroll:!0})}});function Ce(t,l,e){const n=t.context.translations,s=t.context.collection,d=t.context.disabled,r=t.context.isInteractive,I=t.context.invalid,k=t.context.readOnly,g=t.hasTag("open"),L=t.hasTag("focused"),V=t.context.composite,T=t.context.highlightedValue,U=Se({...t.context.positioning,placement:t.context.currentPlacement});function N(o){const a=s.getItemDisabled(o.item),m=s.getItemValue(o.item);return{value:m,disabled:!!(a||a),highlighted:T===m,selected:t.context.value.includes(m)}}return{focused:L,open:g,inputValue:t.context.inputValue,highlightedValue:T,highlightedItem:t.context.highlightedItem,value:t.context.value,valueAsString:t.context.valueAsString,hasSelectedItems:t.context.hasSelectedItems,selectedItems:t.context.selectedItems,collection:t.context.collection,multiple:!!t.context.multiple,disabled:!!d,syncSelectedItems(){l({type:"SELECTED_ITEMS.SYNC"})},reposition(o={}){l({type:"POSITIONING.SET",options:o})},setCollection(o){l({type:"COLLECTION.SET",value:o})},setHighlightValue(o){l({type:"HIGHLIGHTED_VALUE.SET",value:o})},selectValue(o){l({type:"ITEM.SELECT",value:o})},setValue(o){l({type:"VALUE.SET",value:o})},setInputValue(o){l({type:"INPUT_VALUE.SET",value:o})},clearValue(o){o!=null?l({type:"ITEM.CLEAR",value:o}):l("VALUE.CLEAR")},focus(){i.getInputEl(t.context)?.focus()},setOpen(o){o!==g&&l(o?"OPEN":"CLOSE")},getRootProps(){return e.element({...C.root.attrs,dir:t.context.dir,id:i.getRootId(t.context),"data-invalid":h(I),"data-readonly":h(k)})},getLabelProps(){return e.label({...C.label.attrs,dir:t.context.dir,htmlFor:i.getInputId(t.context),id:i.getLabelId(t.context),"data-readonly":h(k),"data-disabled":h(d),"data-invalid":h(I),"data-focus":h(L),onClick(o){V||(o.preventDefault(),i.getTriggerEl(t.context)?.focus({preventScroll:!0}))}})},getControlProps(){return e.element({...C.control.attrs,dir:t.context.dir,id:i.getControlId(t.context),"data-state":g?"open":"closed","data-focus":h(L),"data-disabled":h(d),"data-invalid":h(I)})},getPositionerProps(){return e.element({...C.positioner.attrs,dir:t.context.dir,id:i.getPositionerId(t.context),style:U.floating})},getInputProps(){return e.input({...C.input.attrs,dir:t.context.dir,"aria-invalid":Y(I),"data-invalid":h(I),name:t.context.name,form:t.context.form,disabled:d,autoFocus:t.context.autoFocus,required:t.context.required,autoComplete:"off",autoCorrect:"off",autoCapitalize:"none",spellCheck:"false",readOnly:k,placeholder:t.context.placeholder,id:i.getInputId(t.context),type:"text",role:"combobox",defaultValue:t.context.inputValue,"aria-autocomplete":t.context.autoComplete?"both":"list","aria-controls":i.getContentId(t.context),"aria-expanded":g,"data-state":g?"open":"closed","aria-activedescendant":T?i.getItemId(t.context,T):void 0,onClick(o){o.defaultPrevented||t.context.openOnClick&&r&&l("INPUT.CLICK")},onFocus(){d||l("INPUT.FOCUS")},onBlur(){d||l("INPUT.BLUR")},onChange(o){l({type:"INPUT.CHANGE",value:o.currentTarget.value})},onKeyDown(o){if(o.defaultPrevented||!r||o.ctrlKey||o.shiftKey||Pe(o))return;const a=t.context.openOnKeyPress,m=o.ctrlKey||o.metaKey||o.shiftKey,f=!0,A={ArrowDown(y){!a&&!g||(l({type:y.altKey?"OPEN":"INPUT.ARROW_DOWN",keypress:f}),y.preventDefault())},ArrowUp(){!a&&!g||(l({type:o.altKey?"CLOSE":"INPUT.ARROW_UP",keypress:f}),o.preventDefault())},Home(y){m||(l({type:"INPUT.HOME",keypress:f}),g&&y.preventDefault())},End(y){m||(l({type:"INPUT.END",keypress:f}),g&&y.preventDefault())},Enter(y){l({type:"INPUT.ENTER",keypress:f}),g&&y.preventDefault();const x=i.getHighlightedItemEl(t.context);Ke(x)},Escape(){l({type:"INPUT.ESCAPE",keypress:f}),o.preventDefault()}},_=$(o,t.context),G=A[_];G?.(o)}})},getTriggerProps(o={}){return e.button({...C.trigger.attrs,dir:t.context.dir,id:i.getTriggerId(t.context),"aria-haspopup":V?"listbox":"dialog",type:"button",tabIndex:o.focusable?void 0:-1,"aria-label":n.triggerLabel,"aria-expanded":g,"data-state":g?"open":"closed","aria-controls":g?i.getContentId(t.context):void 0,disabled:d,"data-invalid":h(I),"data-focusable":h(o.focusable),"data-readonly":h(k),"data-disabled":h(d),onFocus(){o.focusable&&l({type:"INPUT.FOCUS",src:"trigger"})},onClick(a){a.defaultPrevented||r&&ke(a)&&l("TRIGGER.CLICK")},onPointerDown(a){r&&a.pointerType!=="touch"&&(a.preventDefault(),queueMicrotask(()=>{i.getInputEl(t.context)?.focus({preventScroll:!0})}))},onKeyDown(a){if(a.defaultPrevented||V)return;const m={ArrowDown(){l({type:"INPUT.ARROW_DOWN",src:"trigger"})},ArrowUp(){l({type:"INPUT.ARROW_UP",src:"trigger"})}},f=$(a,t.context),A=m[f];A&&(A(a),a.preventDefault())}})},getContentProps(){return e.element({...C.content.attrs,dir:t.context.dir,id:i.getContentId(t.context),role:V?"listbox":"dialog",tabIndex:-1,hidden:!g,"data-state":g?"open":"closed","data-placement":t.context.currentPlacement,"aria-labelledby":i.getLabelId(t.context),"aria-multiselectable":t.context.multiple&&V?!0:void 0,onPointerDown(o){o.preventDefault()}})},getListProps(){return e.element({...C.list.attrs,role:V?void 0:"listbox","aria-labelledby":i.getLabelId(t.context),"aria-multiselectable":t.context.multiple&&!V?!0:void 0})},getClearTriggerProps(){return e.button({...C.clearTrigger.attrs,dir:t.context.dir,id:i.getClearTriggerId(t.context),type:"button",tabIndex:-1,disabled:d,"data-invalid":h(I),"aria-label":n.clearTriggerLabel,"aria-controls":i.getInputId(t.context),hidden:!t.context.value.length,onPointerDown(o){o.preventDefault()},onClick(o){o.defaultPrevented||r&&l({type:"VALUE.CLEAR",src:"clear-trigger"})}})},getItemState:N,getItemProps(o){const a=N(o),m=a.value;return e.element({...C.item.attrs,dir:t.context.dir,id:i.getItemId(t.context,m),role:"option",tabIndex:-1,"data-highlighted":h(a.highlighted),"data-state":a.selected?"checked":"unchecked","aria-selected":Y(a.highlighted),"aria-disabled":Y(a.disabled),"data-disabled":h(a.disabled),"data-value":a.value,onPointerMove(){a.disabled||a.highlighted||l({type:"ITEM.POINTER_MOVE",value:m})},onPointerLeave(){o.persistFocus||a.disabled||!t.previousEvent.type.includes("POINTER")||l({type:"ITEM.POINTER_LEAVE",value:m})},onClick(f){Le(f)||Ne(f)||Fe(f)||a.disabled||l({type:"ITEM.CLICK",src:"click",value:m})}})},getItemTextProps(o){const a=N(o);return e.element({...C.itemText.attrs,dir:t.context.dir,"data-state":a.selected?"checked":"unchecked","data-disabled":h(a.disabled),"data-highlighted":h(a.highlighted)})},getItemIndicatorProps(o){const a=N(o);return e.element({"aria-hidden":!0,...C.itemIndicator.attrs,dir:t.context.dir,"data-state":a.selected?"checked":"unchecked",hidden:!a.selected})},getItemGroupProps(o){const{id:a}=o;return e.element({...C.itemGroup.attrs,dir:t.context.dir,id:i.getItemGroupId(t.context,a),"aria-labelledby":i.getItemGroupLabelId(t.context,a)})},getItemGroupLabelProps(o){const{htmlFor:a}=o;return e.element({...C.itemGroupLabel.attrs,dir:t.context.dir,id:i.getItemGroupLabelId(t.context,a),role:"group"})}}}var{and:p,not:E}=Ge;function Oe(t){const l=Ae(t);return Re({id:"combobox",initial:l.open?"suggesting":"idle",context:{loopFocus:!0,openOnClick:!1,value:[],highlightedValue:null,inputValue:"",allowCustomValue:!1,closeOnSelect:!l.multiple,inputBehavior:"none",selectionBehavior:"replace",openOnKeyPress:!0,openOnChange:!0,composite:!0,readOnly:!1,disabled:!1,...l,highlightedItem:null,selectedItems:[],valueAsString:"",collection:l.collection??q.empty(),positioning:{placement:"bottom",sameWidth:!0,...l.positioning},translations:{triggerLabel:"Toggle suggestions",clearTriggerLabel:"Clear value",...l.translations}},created:["syncInitialValues","syncSelectionBehavior"],computed:{isInputValueEmpty:e=>e.inputValue.length===0,isInteractive:e=>!(e.readOnly||e.disabled),autoComplete:e=>e.inputBehavior==="autocomplete",autoHighlight:e=>e.inputBehavior==="autohighlight",hasSelectedItems:e=>e.value.length>0},watch:{value:["syncSelectedItems"],inputValue:["syncInputValue"],highlightedValue:["syncHighlightedItem","autofillInputValue"],multiple:["syncSelectionBehavior"],open:["toggleVisibility"]},on:{"SELECTED_ITEMS.SYNC":{actions:["syncSelectedItems"]},"HIGHLIGHTED_VALUE.SET":{actions:["setHighlightedItem"]},"ITEM.SELECT":{actions:["selectItem"]},"ITEM.CLEAR":{actions:["clearItem"]},"VALUE.SET":{actions:["setSelectedItems"]},"INPUT_VALUE.SET":{actions:"setInputValue"},"COLLECTION.SET":{actions:["setCollection"]},"POSITIONING.SET":{actions:["reposition"]}},states:{idle:{tags:["idle","closed"],entry:["scrollContentToTop","clearHighlightedItem"],on:{"CONTROLLED.OPEN":{target:"interacting"},"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["setInitialFocus","highlightFirstSelectedItem","invokeOnOpen"]},{target:"interacting",actions:["setInitialFocus","highlightFirstSelectedItem","invokeOnOpen"]}],"INPUT.CLICK":[{guard:"isOpenControlled",actions:["highlightFirstSelectedItem","invokeOnOpen"]},{target:"interacting",actions:["highlightFirstSelectedItem","invokeOnOpen"]}],"INPUT.FOCUS":{target:"focused"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"interacting",actions:["invokeOnOpen"]}],"VALUE.CLEAR":{target:"focused",actions:["clearInputValue","clearSelectedItems","setInitialFocus"]}}},focused:{tags:["focused","closed"],entry:["scrollContentToTop","clearHighlightedItem"],on:{"CONTROLLED.OPEN":[{guard:"isChangeEvent",target:"suggesting"},{target:"interacting"}],"INPUT.CHANGE":[{guard:p("isOpenControlled","openOnChange"),actions:["setInputValue","invokeOnOpen","highlightFirstItemIfNeeded"]},{guard:"openOnChange",target:"suggesting",actions:["setInputValue","invokeOnOpen","highlightFirstItemIfNeeded"]},{actions:"setInputValue"}],"LAYER.INTERACT_OUTSIDE":{target:"idle"},"INPUT.ESCAPE":{guard:p("isCustomValue",E("allowCustomValue")),actions:"revertInputValue"},"INPUT.BLUR":{target:"idle"},"INPUT.CLICK":[{guard:"isOpenControlled",actions:["highlightFirstSelectedItem","invokeOnOpen"]},{target:"interacting",actions:["highlightFirstSelectedItem","invokeOnOpen"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["setInitialFocus","highlightFirstSelectedItem","invokeOnOpen"]},{target:"interacting",actions:["setInitialFocus","highlightFirstSelectedItem","invokeOnOpen"]}],"INPUT.ARROW_DOWN":[{guard:p("isOpenControlled","autoComplete"),actions:["invokeOnOpen"]},{guard:"autoComplete",target:"interacting",actions:["invokeOnOpen"]},{guard:"isOpenControlled",actions:["highlightFirstOrSelectedItem","invokeOnOpen"]},{target:"interacting",actions:["highlightFirstOrSelectedItem","invokeOnOpen"]}],"INPUT.ARROW_UP":[{guard:"autoComplete",target:"interacting",actions:"invokeOnOpen"},{guard:"autoComplete",target:"interacting",actions:"invokeOnOpen"},{target:"interacting",actions:["highlightLastOrSelectedItem","invokeOnOpen"]},{target:"interacting",actions:["highlightLastOrSelectedItem","invokeOnOpen"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"interacting",actions:["invokeOnOpen"]}],"VALUE.CLEAR":{actions:["clearInputValue","clearSelectedItems"]}}},interacting:{tags:["open","focused"],entry:["setInitialFocus"],activities:["scrollToHighlightedItem","trackDismissableLayer","computePlacement","hideOtherElements"],on:{"CONTROLLED.CLOSE":[{guard:"restoreFocus",target:"focused",actions:["setFinalFocus"]},{target:"idle"}],"INPUT.HOME":{actions:["highlightFirstItem"]},"INPUT.END":{actions:["highlightLastItem"]},"INPUT.ARROW_DOWN":[{guard:p("autoComplete","isLastItemHighlighted"),actions:["clearHighlightedItem","scrollContentToTop"]},{actions:["highlightNextItem"]}],"INPUT.ARROW_UP":[{guard:p("autoComplete","isFirstItemHighlighted"),actions:"clearHighlightedItem"},{actions:"highlightPrevItem"}],"INPUT.ENTER":[{guard:p("isOpenControlled","isCustomValue",E("hasHighlightedItem"),E("allowCustomValue")),actions:["revertInputValue","invokeOnClose"]},{guard:p("isCustomValue",E("hasHighlightedItem"),E("allowCustomValue")),target:"focused",actions:["revertInputValue","invokeOnClose"]},{guard:p("isOpenControlled","closeOnSelect"),actions:["selectHighlightedItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectHighlightedItem","invokeOnClose","setFinalFocus"]},{actions:["selectHighlightedItem"]}],"INPUT.CHANGE":[{guard:"autoComplete",target:"suggesting",actions:["setInputValue","invokeOnOpen"]},{target:"suggesting",actions:["clearHighlightedItem","setInputValue","invokeOnOpen"]}],"ITEM.POINTER_MOVE":{actions:["setHighlightedItem"]},"ITEM.POINTER_LEAVE":{actions:["clearHighlightedItem"]},"ITEM.CLICK":[{guard:p("isOpenControlled","closeOnSelect"),actions:["selectItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectItem","invokeOnClose","setFinalFocus"]},{actions:["selectItem"]}],"LAYER.ESCAPE":[{guard:p("isOpenControlled","autoComplete"),actions:["syncInputValue","invokeOnClose"]},{guard:"autoComplete",target:"focused",actions:["syncInputValue","invokeOnClose"]},{guard:"isOpenControlled",actions:"invokeOnClose"},{target:"focused",actions:["invokeOnClose","setFinalFocus"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:"invokeOnClose"},{target:"focused",actions:"invokeOnClose"}],"LAYER.INTERACT_OUTSIDE":[{guard:p("isOpenControlled","isCustomValue",E("allowCustomValue")),actions:["revertInputValue","invokeOnClose"]},{guard:p("isCustomValue",E("allowCustomValue")),target:"idle",actions:["revertInputValue","invokeOnClose"]},{guard:"isOpenControlled",actions:"invokeOnClose"},{target:"idle",actions:"invokeOnClose"}],CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","setFinalFocus"]}],"VALUE.CLEAR":[{guard:"isOpenControlled",actions:["clearInputValue","clearSelectedItems","invokeOnClose"]},{target:"focused",actions:["clearInputValue","clearSelectedItems","invokeOnClose","setFinalFocus"]}]}},suggesting:{tags:["open","focused"],activities:["trackDismissableLayer","scrollToHighlightedItem","computePlacement","trackChildNodes","hideOtherElements"],entry:["setInitialFocus"],on:{"CONTROLLED.CLOSE":[{guard:"restoreFocus",target:"focused",actions:["setFinalFocus"]},{target:"idle"}],CHILDREN_CHANGE:{actions:["highlightFirstItem"]},"INPUT.ARROW_DOWN":{target:"interacting",actions:["highlightNextItem"]},"INPUT.ARROW_UP":{target:"interacting",actions:["highlightPrevItem"]},"INPUT.HOME":{target:"interacting",actions:["highlightFirstItem"]},"INPUT.END":{target:"interacting",actions:["highlightLastItem"]},"INPUT.ENTER":[{guard:p("isOpenControlled","isCustomValue",E("hasHighlightedItem"),E("allowCustomValue")),actions:["revertInputValue","invokeOnClose"]},{guard:p("isCustomValue",E("hasHighlightedItem"),E("allowCustomValue")),target:"focused",actions:["revertInputValue","invokeOnClose"]},{guard:p("isOpenControlled","closeOnSelect"),actions:["selectHighlightedItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectHighlightedItem","invokeOnClose","setFinalFocus"]},{actions:["selectHighlightedItem"]}],"INPUT.CHANGE":[{guard:"autoHighlight",actions:["setInputValue"]},{actions:["setInputValue"]}],"LAYER.ESCAPE":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose"]}],"ITEM.POINTER_MOVE":{target:"interacting",actions:["setHighlightedItem"]},"ITEM.POINTER_LEAVE":{actions:["clearHighlightedItem"]},"LAYER.INTERACT_OUTSIDE":[{guard:p("isOpenControlled","isCustomValue",E("allowCustomValue")),actions:["revertInputValue","invokeOnClose"]},{guard:p("isCustomValue",E("allowCustomValue")),target:"idle",actions:["revertInputValue","invokeOnClose"]},{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"idle",actions:["invokeOnClose"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose"]}],"ITEM.CLICK":[{guard:p("isOpenControlled","closeOnSelect"),actions:["selectItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectItem","invokeOnClose","setFinalFocus"]},{actions:["selectItem"]}],CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","setFinalFocus"]}],"VALUE.CLEAR":[{guard:"isOpenControlled",actions:["clearInputValue","clearSelectedItems","invokeOnClose"]},{target:"focused",actions:["clearInputValue","clearSelectedItems","invokeOnClose","setFinalFocus"]}]}}}},{guards:{isInputValueEmpty:e=>e.isInputValueEmpty,autoComplete:e=>e.autoComplete&&!e.multiple,autoHighlight:e=>e.autoHighlight,isFirstItemHighlighted:e=>e.collection.firstValue===e.highlightedValue,isLastItemHighlighted:e=>e.collection.lastValue===e.highlightedValue,isCustomValue:e=>e.inputValue!==e.valueAsString,allowCustomValue:e=>!!e.allowCustomValue,hasHighlightedItem:e=>e.highlightedValue!=null,closeOnSelect:e=>!!e.closeOnSelect,isOpenControlled:e=>!!e["open.controlled"],openOnChange:(e,n)=>_e(e.openOnChange)?e.openOnChange:!!e.openOnChange?.({inputValue:n.value}),restoreFocus:(e,n)=>n.restoreFocus==null?!0:!!n.restoreFocus,isChangeEvent:(e,n)=>n.previousEvent?.type==="INPUT.CHANGE"},activities:{trackDismissableLayer(e,n,{send:s}){return e.disableLayer?void 0:De(()=>i.getContentEl(e),{defer:!0,exclude:()=>[i.getInputEl(e),i.getTriggerEl(e),i.getClearTriggerEl(e)],onFocusOutside:e.onFocusOutside,onPointerDownOutside:e.onPointerDownOutside,onInteractOutside:e.onInteractOutside,onEscapeKeyDown(r){r.preventDefault(),r.stopPropagation(),s("LAYER.ESCAPE")},onDismiss(){s({type:"LAYER.INTERACT_OUTSIDE",restoreFocus:!1})}})},hideOtherElements(e){return He([i.getInputEl(e),i.getContentEl(e),i.getTriggerEl(e)])},computePlacement(e){const n=()=>i.getControlEl(e),s=()=>i.getPositionerEl(e);return e.currentPlacement=e.positioning.placement,ee(n,s,{...e.positioning,defer:!0,onComplete(d){e.currentPlacement=d.placement}})},trackChildNodes(e,n,{send:s}){return e.autoHighlight?Ue(()=>i.getContentEl(e),{callback:()=>s("CHILDREN_CHANGE"),defer:!0}):void 0},scrollToHighlightedItem(e,n,{getState:s}){const d=i.getInputEl(e);let r=[];const I=L=>{if(s().event.type.includes("POINTER")||!e.highlightedValue)return;const U=i.getHighlightedItemEl(e),N=i.getContentEl(e);if(e.scrollToIndexFn){const a=e.collection.indexOf(e.highlightedValue);e.scrollToIndexFn({index:a,immediate:L});return}const o=S(()=>{xe(U,{rootEl:N,block:"nearest"})});r.push(o)},k=S(()=>I(!0));r.push(k);const g=Me(d,{attributes:["aria-activedescendant"],callback:()=>I(!1)});return r.push(g),()=>{r.forEach(L=>L())}}},actions:{reposition(e,n){ee(()=>i.getControlEl(e),()=>i.getPositionerEl(e),{...e.positioning,...n.options,defer:!0,listeners:!1,onComplete(r){e.currentPlacement=r.placement}})},setHighlightedItem(e,n){n.value!=null&&c.highlightedValue(e,n.value)},clearHighlightedItem(e){c.highlightedValue(e,null,!0)},selectHighlightedItem(e){c.value(e,e.highlightedValue),c.inputValue(e,H(e))},selectItem(e,n){n.value!=null&&(c.value(e,n.value),c.inputValue(e,H(e)))},clearItem(e,n){if(n.value==null)return;const s=e.value.filter(d=>d!==n.value);c.value(e,s),c.inputValue(e,H(e))},setInitialFocus(e){S(()=>{i.focusInputEl(e)})},setFinalFocus(e){S(()=>{i.getTriggerEl(e)?.dataset.focusable==null?i.focusInputEl(e):i.focusTriggerEl(e)})},syncInputValue(e){const n=i.getInputEl(e);n&&(n.value=e.inputValue,queueMicrotask(()=>{const{selectionStart:s,selectionEnd:d}=n;Math.abs((d??0)-(s??0))===0&&s===0&&n.setSelectionRange(n.value.length,n.value.length)}))},setInputValue(e,n){c.inputValue(e,n.value)},clearInputValue(e){c.inputValue(e,"")},revertInputValue(e){const n=J(e.selectionBehavior,{replace:e.hasSelectedItems?e.valueAsString:"",preserve:e.inputValue,clear:""});c.inputValue(e,n)},syncInitialValues(e){const n=e.collection.findMany(e.value),s=e.collection.stringifyMany(e.value);e.highlightedItem=e.collection.find(e.highlightedValue),e.selectedItems=n,e.valueAsString=s,!(e.inputValue.trim()||e.multiple)&&(e.inputValue=J(e.selectionBehavior,{preserve:e.inputValue||s,replace:s,clear:""}))},syncSelectionBehavior(e){e.multiple&&(e.selectionBehavior="clear")},setSelectedItems(e,n){pe(n.value)&&(c.value(e,n.value),c.inputValue(e,H(e)))},clearSelectedItems(e){c.value(e,[]),c.inputValue(e,H(e))},scrollContentToTop(e){if(e.scrollToIndexFn)e.scrollToIndexFn({index:0,immediate:!0});else{const n=i.getContentEl(e);if(!n)return;n.scrollTop=0}},invokeOnOpen(e){e.onOpenChange?.({open:!0})},invokeOnClose(e){e.onOpenChange?.({open:!1})},highlightFirstItem(e){S(()=>{const n=e.collection.firstValue;c.highlightedValue(e,n,!0)})},highlightFirstItemIfNeeded(e){e.autoHighlight&&S(()=>{const n=e.collection.firstValue;c.highlightedValue(e,n)})},highlightLastItem(e){S(()=>{const n=e.collection.lastValue;c.highlightedValue(e,n)})},highlightNextItem(e){let n=null;e.highlightedValue?(n=e.collection.getNextValue(e.highlightedValue),!n&&e.loopFocus&&(n=e.collection.firstValue)):n=e.collection.firstValue,c.highlightedValue(e,n)},highlightPrevItem(e){let n=null;e.highlightedValue?(n=e.collection.getPreviousValue(e.highlightedValue),!n&&e.loopFocus&&(n=e.collection.lastValue)):n=e.collection.lastValue,c.highlightedValue(e,n)},highlightFirstSelectedItem(e){S(()=>{const[n]=e.collection.sort(e.value);c.highlightedValue(e,n)})},highlightFirstOrSelectedItem(e){S(()=>{let n=null;e.hasSelectedItems?n=e.collection.sort(e.value)[0]:n=e.collection.firstValue,c.highlightedValue(e,n)})},highlightLastOrSelectedItem(e){S(()=>{let n=null;e.hasSelectedItems?n=e.collection.sort(e.value)[0]:n=e.collection.lastValue,c.highlightedValue(e,n)})},autofillInputValue(e,n){const s=i.getInputEl(e);if(!e.autoComplete||!s||!n.keypress)return;const d=e.collection.stringify(e.highlightedValue);S(()=>{s.value=d||e.inputValue})},setCollection(e,n){e.collection=n.value},syncSelectedItems(e){W.valueChange(e),c.inputValue(e,H(e))},syncHighlightedItem(e){W.highlightChange(e)},toggleVisibility(e,n,{send:s}){s({type:e.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:n})}}})}function H(t){return J(t.selectionBehavior,{preserve:t.inputValue,replace:t.valueAsString,clear:""})}var W={valueChange:t=>{const l=t.selectedItems;t.selectedItems=t.value.map(e=>{const n=l.find(s=>t.collection.getItemValue(s)===e);return n||t.collection.find(e)}),t.valueAsString=t.collection.stringifyItems(t.selectedItems)},highlightChange:t=>{t.highlightedItem=t.collection.find(t.highlightedValue)}},K={valueChange:t=>{W.valueChange(t),t.onValueChange?.({value:Array.from(t.value),items:Array.from(t.selectedItems)})},highlightChange:t=>{W.highlightChange(t),t.onHighlightChange?.({highlightedValue:t.highlightedValue,highlightedItem:t.highlightedItem})},inputChange:t=>{t.onInputValueChange?.({inputValue:t.inputValue})}},c={value:(t,l,e=!1)=>{if(!j(t.value,l)&&!(l==null&&!e)){if(l==null&&e){t.value=[],K.valueChange(t);return}pe(l)?t.value=l:l!=null&&(t.value=t.multiple?Be(t.value,l):[l]),K.valueChange(t)}},highlightedValue:(t,l,e=!1)=>{j(t.highlightedValue,l)||!l&&!e||(t.highlightedValue=l||null,K.highlightChange(t))},inputValue:(t,l)=>{j(t.inputValue,l)||(t.inputValue=l,K.inputChange(t))}};const $e=Object.freeze(Object.defineProperty({__proto__:null,anatomy:fe,collection:q,connect:Ce,machine:Oe},Symbol.toStringTag,{value:"Module"})),et=Ie({__name:"MInputSingleSelectDropdownEx",props:{modelValue:{default:void 0},options:{},searchFunction:{default:void 0},label:{default:void 0},disabled:{type:Boolean},variant:{default:"neutral"},hintMessage:{default:void 0},placeholder:{default:"Select an option"},emptyMessage:{default:"No results found"},showClearButton:{type:Boolean},dataTestid:{default:void 0}},emits:["update:modelValue"],setup(t,{expose:l,emit:e}){l();const n=t,{internalDisabled:s}=te(F(()=>n.disabled)),{showErrorNotification:d}=se(),r=e,I=R(),k=R(),g=R(),L=Z("select"),V=R(1);ne(I,u=>{const{width:O}=u[0].contentRect;k.value&&(g.value=`${O}px`),V.value++}),le(async()=>{o()});const T=R([]),U=R(n.emptyMessage),N=(u,O)=>u.filter(D=>D.label.toLocaleLowerCase().includes(O.toLocaleLowerCase()));function o(u){if(!u)T.value=n.options;else try{n.searchFunction===void 0?T.value=N(n.options,u):T.value=n.searchFunction(n.options,u)}catch(O){d(String(O),"Error while searching in dropdown")}}const a=F(()=>{const u=T.value.map(D=>({...D,id:oe(D.value)})),O=new Set(u.map(D=>D.id));return u.length!==O.size&&(d("See console for more details","Duplicate options detected"),console.error("Duplicate IDs found in options array of MInputSingleSelectDropdown:",u)),u}),m=F(()=>a.value.find(u=>ie(u.value,n.modelValue))?.id);function f(u){return a.value.find(O=>O.id===u)}const A=F(()=>q({items:a.value,isItemDisabled:u=>!!u.disabled,itemToValue:u=>u.id,itemToString:u=>u.id})),_=R("");ae(_,u=>{o(u)});const G=F(()=>({disabled:s.value,value:m.value?[m.value]:void 0,collection:A.value,inputValue:_.value})),[y,x]=re(Oe({id:Z("combobox"),collection:A.value,selectionBehavior:"preserve",positioning:{placement:"bottom-start",gutter:0},inputBehavior:"autohighlight",openOnKeyPress:!0,openOnClick:!0,loopFocus:!0,onValueChange(u){const O=u.items[0];r("update:modelValue",O?.value),_.value=""}}),{context:G}),z=F(()=>Ce(y.value,x,ue)),Ee=F(()=>{switch(n.variant){case"danger":return"tw-ring-red-400 tw-text-red-400";case"success":return"tw-ring-green-400 tw-text-green-700";case"warning":return"tw-ring-orange-400 tw-text-orange-500";default:return"tw-ring-neutral-300"}}),be=F(()=>{switch(n.variant){case"danger":return"tw-bg-red-500";case"success":return"tw-bg-green-500";case"warning":return"tw-bg-orange-500";default:return"tw-bg-neutral-400"}});function we(u){return{value:u.value,label:u.label,highlighted:z.value.highlightedItem?.id===u.id,selected:z.value.selectedItems.some(O=>O?.id,u.id)}}const X={props:n,internalDisabled:s,showErrorNotification:d,emit:r,trigger:I,listbox:k,listboxWidth:g,inputComponentId:L,forceRefreshKey:V,cachedOptions:T,emptyMessage:U,defaultSearchFunction:N,searchOptions:o,optionsForSelectDropdown:a,modelValueWithId:m,getSelectedOptionFromId:f,collectionRef:A,searchInput:_,transientContext:G,state:y,send:x,api:z,variantClasses:Ee,iconVariantClasses:be,getOptionInfo:we,get isEqual(){return ie},computed:F,ref:R,onMounted:le,watch:ae,get makeHash(){return oe},get makeIntoUniqueKey(){return Z},get useResizeObserver(){return ne},get combobox(){return $e},get normalizeProps(){return ue},get useMachine(){return re},get useEnableAfterSsr(){return te},get useNotifications(){return se},MInputHintMessage:Xe};return Object.defineProperty(X,"__isScriptSetup",{enumerable:!1,value:!0}),X}}),tt=["for"],nt=["id","placeholder","data-testid"],lt=["data-testid"],ot={class:"tw-z-10 tw-flex tw-items-center tw-space-x-1"},it={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"tw-pointer-events-none tw-w-5 tw-h-5","aria-hidden":"true"},at={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"tw-pointer-events-none tw-w-5 tw-h-5","aria-hidden":"true"},rt={key:2,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"tw-pointer-events-none tw-w-5 tw-h-5","aria-hidden":"true"},st=["data-testid"],ut=["data-testid"],dt={class:"tw-absolute"},ct=["id"],gt=["data-testid"],ht=["disabled","data-testid"],pt={class:"tw-flex tw-justify-between"},It={class:"tw-grow tw-overflow-hidden tw-text-ellipsis"},mt={key:1,class:"tw-select-none tw-overflow-y-auto tw-overflow-x-hidden tw-overflow-ellipsis tw-rounded-b-md tw-border tw-border-t-0 tw-border-neutral-300 tw-bg-neutral-200 tw-px-3 tw-py-1 tw-text-sm tw-italic tw-text-neutral-500 tw-shadow-lg"};function vt(t,l,e,n,s,d){return b(),w("div",Ze(Je(n.api.getRootProps())),[e.label?(b(),w("label",P({key:0},n.api.getLabelProps(),{for:n.inputComponentId,class:["tw-block tw-text-sm tw-font-bold tw-leading-6 tw-mb-1",{"tw-text-neutral-400":n.internalDisabled,"tw-text-neutral-900":!n.internalDisabled}]}),M(e.label),17,tt)):B("",!0),v("div",P(n.api.getControlProps(),{class:"tw-relative tw-flex tw-min-h-8 tw-w-full tw-items-center tw-justify-between tw-shadow-sm tw-ring-1 tw-ring-inset"},{ref:"trigger",class:[{"tw-text-neutral-400 tw-bg-neutral-50 tw-cursor-not-allowed":n.internalDisabled},n.variantClasses]}),[We(v("input",P(n.api.getInputProps(),{class:"focus:tw-ring-blue-60 tw-absolute tw-inset-0 tw-left-0 tw-z-0 tw-overflow-x-hidden tw-rounded-md tw-border-none tw-bg-transparent placeholder:tw-text-neutral-400 focus:tw-ring-2 focus:tw-ring-inset disabled:tw-cursor-not-allowed"},{"onUpdate:modelValue":l[0]||(l[0]=r=>n.searchInput=r),id:n.inputComponentId,placeholder:n.api.value[0]?void 0:e.placeholder,class:{"tw-rounded-b-none":n.api.open},"onKeyup:enter":l[1]||(l[1]=(...r)=>n.api.selectValue&&n.api.selectValue(...r)),"data-testid":`${e.dataTestid}-input`}),null,16,nt),[[qe,n.searchInput]]),v("div",{class:de(["tw-flex-grow tw-pl-3 tw-py-1 tw-text-ellipsis tw-overflow-hidden"]),"data-testid":`${e.dataTestid}-selected-option`},[n.api.value[0]&&!n.api.inputValue?ce(t.$slots,"selection",{key:0,option:n.getSelectedOptionFromId(n.api.value[0])},()=>[ge(M(n.getSelectedOptionFromId(n.api.value[0])?.label),1)],!0):B("",!0)],8,lt),v("div",ot,[e.variant==="success"?(b(),w("svg",it,l[3]||(l[3]=[v("path",{class:"tw-text-neutral-50",d:"M3 10 a7 7 0 1 1 14 0 a7 7 0 1 1 -14 0 Z"},null,-1),v("path",{class:"tw-text-green-500","fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule":"evenodd"},null,-1)]))):B("",!0),e.variant==="warning"?(b(),w("svg",at,l[4]||(l[4]=[v("path",{class:"tw-text-orange-500","fill-rule":"evenodd",d:"M10 2L2 18h16L10 2z","clip-rule":"evenodd"},null,-1),v("path",{class:"tw-text-orange-50","fill-rule":"evenodd",d:"M9 6h2v6H9V6zm0 8h2v2H9v-2z","clip-rule":"evenodd"},null,-1)]))):e.variant==="danger"?(b(),w("svg",rt,l[5]||(l[5]=[v("path",{class:"tw-text-neutral-50",d:"M3 10 a7 7 0 1 1 14 0 a7 7 0 1 1 -14 0 Z"},null,-1),v("path",{class:"tw-text-red-500","fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"},null,-1)]))):B("",!0),n.api.value[0]&&e.showClearButton?(b(),w("button",P({key:3},n.api.getClearTriggerProps(),{"data-testid":`${e.dataTestid}-clear-button`}),[(b(),w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",class:de(["tw-size-4 tw-fill-neutral-50 tw-p-0.5 tw-rounded-full tw-bg-neutral-400 hover:tw-bg-neutral-500 active:tw-bg-neutral-600 tw-cursor-pointer",[n.iconVariantClasses]])},l[6]||(l[6]=[v("path",{d:"M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"},null,-1)]),2))],16,st)):B("",!0),v("button",P(n.api.getTriggerProps(),{class:"tw-pr-3 tw-text-neutral-400 hover:tw-text-neutral-500 active:tw-text-neutral-600 disabled:tw-cursor-not-allowed"},{"data-testid":`${e.dataTestid}-trigger`}),"▼",16,ut)])],16),v("div",dt,[(b(),w("div",P(n.api.getPositionerProps(),{key:n.forceRefreshKey},{id:n.inputComponentId,style:{zIndex:9999,width:n.listboxWidth}}),[n.optionsForSelectDropdown.length>0?(b(),w("ul",P({key:0},n.api.getContentProps(),{class:"tw-max-h-80 tw-overflow-y-auto tw-overflow-x-hidden tw-overflow-ellipsis tw-rounded-b-md tw-border tw-border-t-0 tw-border-neutral-300 tw-bg-white tw-text-sm tw-shadow-lg"},{ref:"listbox",style:{width:n.listboxWidth},"data-testid":`${e.dataTestid}-dropdown`}),[(b(!0),w(ze,null,Ye(n.optionsForSelectDropdown,r=>(b(),w("li",P(n.api.getItemProps({item:r}),{key:r.id,ref_for:!0},{disabled:r.disabled,class:["tw-px-3 tw-py-1.5 first:tw-rounded-t-md last:tw-rounded-b-md tw-cursor-pointer",{"!tw-bg-blue-500 hover:!tw-bg-blue-600 !tw-text-white":n.api.value[0]===r.id,"tw-text-neutral-400 tw-bg-neutral-100 tw-cursor-not-allowed tw-italic":r.disabled}],"onClick:modelValue":l[2]||(l[2]=I=>n.api=I),"data-testid":`${e.dataTestid}-${r.label}`}),[ce(t.$slots,"option",{optionInfo:n.getOptionInfo(r)},()=>[v("div",pt,[v("div",It,M(r.label),1),v("span",P(n.api.getItemIndicatorProps({item:r}),{class:"tw-ml-2",ref_for:!0}),"✓",16)])],!0)],16,ht))),128))],16,gt)):(b(),w("div",mt,M(n.emptyMessage),1))],16,ct))]),je(n.MInputHintMessage,{variant:e.variant},{default:Q(()=>[ge(M(e.hintMessage),1)],void 0,!0),_:1},8,["variant"])],16)}const ft=me(et,[["render",vt],["__scopeId","data-v-a784636b"],["__file","MInputSingleSelectDropdownEx.vue"]]),Ct=Ie({__name:"MInputSimpleSelectDropdown",props:{modelValue:{},options:{},label:{default:void 0},disabled:{type:Boolean},variant:{default:"neutral"},hintMessage:{default:void 0},placeholder:{default:"Select option"},teleportToBody:{type:Boolean,default:!1},showClearButton:{type:Boolean},dataTestid:{default:void 0}},emits:["update:modelValue"],setup(t,{expose:l,emit:e}){l();const n=t,s=e;function d(I){s("update:modelValue",I)}const r={props:n,emit:s,updateSelection:d,MInputSingleSelectDropdownEx:ft};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}});function Ot(t,l,e,n,s,d){return b(),Qe(n.MInputSingleSelectDropdownEx,P(t.$attrs,{"model-value":e.modelValue,label:e.label,placeholder:e.placeholder,options:e.options,disabled:e.disabled,variant:e.variant,"hint-message":e.hintMessage,"teleport-to-body":e.teleportToBody,"show-clear-button":e.showClearButton,"onUpdate:modelValue":l[0]||(l[0]=r=>n.updateSelection(r)),"data-testid":e.dataTestid}),{selection:Q(()=>l[1]||(l[1]=[])),option:Q(()=>l[2]||(l[2]=[])),_:1},16,["model-value","label","placeholder","options","disabled","variant","hint-message","teleport-to-body","show-clear-button","data-testid"])}const Tt=me(Ct,[["render",Ot],["__file","MInputSimpleSelectDropdown.vue"]]);export{Tt as M};
