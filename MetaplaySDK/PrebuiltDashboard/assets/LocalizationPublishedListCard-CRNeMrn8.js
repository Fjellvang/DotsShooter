import{d as F,aj as A,c as b,x as S,M as I,v as N,a8 as C,L as z,b as w,o,e as p,w as a,k as r,p as s,l as g,a as d,n as y,t as R,_ as V}from"./index-B7jvAjdE.js";import{M as l,a as u,c as h,b as T}from"./metaListUtils-B-xQ0HnD.js";import{L as K}from"./LocalizationActionPublish--nJzps7S.js";import{g as k}from"./localization-Z8p1s5Vr.js";import"./MActionModal-coQLkvWs.js";import"./index-fVjXqxSF.js";import"./MInputSwitch-C-Z-JJsG.js";import"./index-B_QkKjtG.js";const j=1,E=F({__name:"LocalizationPublishedListCard",setup(B,{expose:t}){t();const f=A(),e=b(()=>f.path),{data:c}=S(k()),_=b(()=>{if(c.value!==void 0)return c.value.filter(n=>n.publishedAt!==null||n.unpublishedAt!==null||n.isActive)});function m(n){const M=e.value,x=M.endsWith("/")?"":"/";return M+x+n}function v(n){return n.id}function i(n){return n.isActive?"2525-12-25T00:00:00.0000000Z":n.unpublishedAt??"1970-01-01T00:00:00.0000000Z"}const D=[new l("Time",i,u.Ascending),new l("Time",i,u.Descending),new l("Name","name",u.Ascending),new l("Name","name",u.Descending)],O=["id","name","description"],P=[new T("archived",[new h("Archived",n=>n.isArchived),new h("Not archived",n=>!n.isArchived,!0)])],L={route:f,detailsRoute:e,allLocalizationsDataRaw:c,allLocalizationsData:_,getDetailPagePath:m,getItemKey:v,getPublishedSortKey:i,defaultSortOption:j,sortOptions:D,searchFields:O,filterSets:P,computed:b,get useRoute(){return A},get MetaListFilterOption(){return h},get MetaListFilterSet(){return T},get MetaListSortDirection(){return u},get MetaListSortOption(){return l},get MBadge(){return I},get MListItem(){return N},get MTextButton(){return C},get MTooltip(){return z},get useSubscription(){return S},LocalizationActionPublish:K,get getAllLocalizationsSubscriptionOptions(){return k}};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),Z={key:0},H={key:0},U={key:1},W={key:1},q={key:0},G={key:1};function J(B,t,f,e,c,_){const m=w("meta-time"),v=w("meta-list-card");return o(),p(v,{title:"Publish History",itemList:e.allLocalizationsData,getItemKey:e.getItemKey,searchFields:e.searchFields,filterSets:e.filterSets,sortOptions:e.sortOptions,defaultSortOption:e.defaultSortOption,icon:"language","data-testid":"localization-published-list-card"},{"item-card":a(({item:i})=>[r(e.MListItem,null,{badge:a(()=>[i.isActive?(o(),p(e.MBadge,{key:0,variant:"success"},{default:a(()=>t[0]||(t[0]=[s("Active")]),void 0,!0),_:1})):g("",!0),i.isArchived?(o(),p(e.MBadge,{key:1,variant:"neutral"},{default:a(()=>t[1]||(t[1]=[s("Archived")]),void 0,!0),_:1})):g("",!0),i.bestEffortStatus==="Failed"?(o(),p(e.MBadge,{key:2,variant:"danger"},{default:a(()=>t[2]||(t[2]=[s("Failed")]),void 0,!0),_:1})):g("",!0)]),"top-right":a(()=>[i.isActive?(o(),d("div",Z,[i.publishedAt!=null?(o(),d("div",H,[t[3]||(t[3]=s("Published ")),r(m,{date:i.publishedAt},null,8,["date"])])):(o(),d("div",U,[r(e.MTooltip,{content:"The date was not recorded as it was published in an earlier version."},{default:a(()=>t[4]||(t[4]=[s("Date unavailable")]),void 0,!0),_:1})]))])):(o(),d("div",W,[i.unpublishedAt!=null?(o(),d("div",q,[t[5]||(t[5]=s("Unpublished ")),r(m,{date:i.unpublishedAt},null,8,["date"])])):(o(),d("div",G,[r(e.MTooltip,{content:"The date was not recorded as it was unpublished in an earlier version."},{default:a(()=>t[6]||(t[6]=[s("Date unavailable")]),void 0,!0),_:1})]))]))]),"bottom-right":a(()=>[y("div",null,[r(e.MTextButton,{to:`localizations/diff?newRoot=${i.id}`,"disabled-tooltip":i.isActive?"The active localization cannot be compared to itself.":void 0,"data-testid":"diff-localization"},{default:a(()=>t[7]||(t[7]=[s("Diff to active")]),void 0,!0),_:2},1032,["to","disabled-tooltip"])]),y("div",null,[r(e.MTextButton,{to:e.getDetailPagePath(i.id),"data-testid":"view-localization"},{default:a(()=>t[8]||(t[8]=[s("View localization")]),void 0,!0),_:2},1032,["to"])]),r(e.LocalizationActionPublish,{localizationId:i.id,"text-button":""},null,8,["localizationId"])]),default:a(()=>[s(R(i.name||"No name available"),1)],void 0,!0),_:2},1024)]),_:1},8,["itemList"])}const at=V(E,[["render",J],["__file","LocalizationPublishedListCard.vue"]]);export{at as default};
