import{d as j,I as _,J as N,x as V,A as G,K as B,f as m,c as a,C as T,a as f,k as p,w,t as U,l as I,n as z,b as W,o as g,p as D,_ as J}from"./index-B7jvAjdE.js";import{L as K}from"./LabelWithLogicVersion-C_mqRCIw.js";import R from"./GeneratedUiFormAbstractField-DgRsztrL.js";import"./GeneratedUiFormDynamicComponent-DrqrTIRR.js";const S="Custom Source",q=j({__name:"GeneratedUiFormGameConfigBuildSourceField",props:{..._,value:{type:Object,default:null}},emits:N,setup(i,{expose:v,emit:C}){v();const{data:t}=V(G()),o=i,n=C,{displayName:r,displayHint:P,update:l,dataTestid:M}=B(o,n);function O(e){e.displayName===S?(s=!0,l(u.value)):(s=!1,l(e))}function L(e){u.value=e,s&&l(e)}function k(e){}let s=!1;const d={displayName:S},u=m(),c=a(()=>{let e=null;return o.page==="GameConfigBuildCard"?e=t.value?.gameConfigBuildInfo:o.page==="LocalizationsBuildCard"&&(e=t.value?.localizationsBuildInfo),e?.slotToAvailableSourcesMapping[o.fieldInfo.fieldName??""]??[]}),y=a(()=>c.value.concat(d)),A=a(()=>s?d:{...o.value,displayName:o.value?.name}),E=a(()=>y.value.map(e=>({id:e.displayName,value:e}))),F=a(()=>c.value[0]),b=a(()=>o.value);T(b,(e,x)=>{e||setTimeout(()=>{l(F.value)},0)},{immediate:!0});const H=m(),h={staticConfig:t,props:o,emit:n,displayName:r,displayHint:P,update:l,dataTestid:M,onSourceSelectionChanged:O,onCustomSourceChanged:L,onSourceValidityChanged:k,get isCustomSourceSelected(){return s},set isCustomSourceSelected(e){s=e},customSourceName:S,customSourcePlaceholderForList:d,customSource:u,predefinedSources:c,availableSources:y,selectedSourceOption:A,sourceOptions:E,defaultValue:F,currentValue:b,customSourceValidationState:H,ref:m,computed:a,watch:T,get useSubscription(){return V},get getStaticConfigSubscriptionOptions(){return G},LabelWithLogicVersion:K,get generatedUiFieldFormEmits(){return N},get generatedUiFieldFormProps(){return _},get useGeneratedUiFieldForm(){return B},GeneratedUiFormAbstractField:R};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),Q={key:0,class:"text-muted small"},X=["data-testid"],Y={key:1,class:"mt-2 border p-2 rounded bg-light"};function Z(i,v,C,t,o,n){const r=W("meta-input-select");return g(),f("div",null,[p(t.LabelWithLogicVersion,{fieldInfo:i.fieldInfo,isTargetingMultiplePlayers:i.isTargetingMultiplePlayers},{default:w(()=>[D(U(t.displayName),1)],void 0,!0),_:1},8,["fieldInfo","isTargetingMultiplePlayers"]),t.displayHint?(g(),f("div",Q,U(t.displayHint),1)):I("",!0),z("div",{class:"tw-mt-1","data-testid":t.dataTestid+"source-slot"},[p(r,{"no-clear":!0,value:t.selectedSourceOption,options:t.sourceOptions,placeholder:"Select a source...",disabled:i.disabled,onInput:t.onSourceSelectionChanged},null,8,["value","options","disabled"])],8,X),t.isCustomSourceSelected?(g(),f("div",Y,[p(t.GeneratedUiFormAbstractField,{typeName:"Metaplay.Core.Config.GameConfigBuildSource",value:t.customSource,"field-info":i.fieldInfo,"field-schema":i.fieldSchema,"server-validation-results":i.serverValidationResults,"logic-version":i.logicVersion,disabled:i.disabled,isTargetingMultiplePlayers:i.isTargetingMultiplePlayers,onInput:t.onCustomSourceChanged},null,8,["value","field-info","field-schema","server-validation-results","logic-version","disabled","isTargetingMultiplePlayers"])])):I("",!0)])}const oe=J(q,[["render",Z],["__file","GeneratedUiFormGameConfigBuildSourceField.vue"]]);export{oe as default};
