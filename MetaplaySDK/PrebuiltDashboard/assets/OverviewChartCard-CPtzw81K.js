import{d as k,z as m,x as b,a3 as v,f as c,a$ as f,ac as p,bK as h,b as g,o as u,e as i,w as l,k as y,a as S,F as w,r as O,l as M,_ as T}from"./index-B7jvAjdE.js";import{M as x}from"./MTwoColumnLayout-C4tHp69a.js";const B=k({__name:"OverviewChartCard",setup(_,{expose:C}){C();const n=m(),{data:e}=b(v()),s=c(Object.fromEntries([{key:"Concurrents"},...n.actorOverviews.charts].map(t=>[t.key,{labels:["","","","","","","","","","","","","","","","","","","",""],datasets:[{data:Array.from({length:20},()=>0)}]}]))),o=c(void 0);function r(){if(e.value){const t=JSON.parse(JSON.stringify(s.value));t.Concurrents.datasets[0].data.shift(),t.Concurrents.datasets[0].data.push(e.value.numConcurrents);for(const d of n.actorOverviews.charts)t[d.key].datasets[0].data.shift(),t[d.key].datasets[0].data.push(e.value.liveEntityCounts[d.key]??0);s.value=t}o.value=setTimeout(()=>{r()},5e3)}f(()=>{clearTimeout(o.value)}),r();const a={coreStore:n,backendStatus:e,allCharts:s,timer:o,poll:r,onBeforeUnmount:f,ref:c,get MTwoColumnLayout(){return x},get MCard(){return p},get camelCaseToKebabCase(){return h},get useSubscription(){return b},get useCoreStore(){return m},get getBackendStatusSubscriptionOptions(){return v}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}});function E(_,C,n,e,s,o){const r=g("meta-bar-chart");return u(),i(e.MTwoColumnLayout,null,{default:l(()=>[y(e.MCard,{title:"Concurrents",badge:e.backendStatus.numConcurrents,"badge-variant":e.backendStatus.numConcurrents>0?"primary":"neutral","data-testid":"concurrents-card"},{default:l(()=>[y(r,{data:e.allCharts.Concurrents,"chart-id":"concurrents-chart"},null,8,["data"])],void 0,!0),_:1},8,["badge","badge-variant"]),(u(!0),S(w,null,O(e.coreStore.actorOverviews.charts,a=>(u(),i(e.MCard,{key:a.key,title:a.displayName,badge:e.backendStatus.liveEntityCounts[a.key],"badge-variant":e.backendStatus.liveEntityCounts[a.key]>0?"primary":"neutral","data-testid":e.camelCaseToKebabCase(a.key)+"-card"},{default:l(()=>[e.allCharts[a.key]?(u(),i(r,{key:0,data:e.allCharts[a.key],"chart-id":"`${chart.key}-chart`"},null,8,["data"])):M("",!0)],void 0,!0),_:2},1032,["title","badge","badge-variant","data-testid"]))),128))],void 0,!0),_:1})}const L=T(B,[["render",E],["__file","OverviewChartCard.vue"]]);export{L as default};
