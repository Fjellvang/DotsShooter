import{d as D,x as y,c as w,M as N,bb as b,q as V,v as O,s as F,a8 as U,b as W,o as d,e as _,w as r,k as m,B as A,p as u,t as o,l as c,n as s,$ as E,a as f,_ as G}from"./index-B7jvAjdE.js";import K from"./MetaListCard-CSSWUW2Z.js";import{M as a,a as l,b as S,c as g}from"./metaListUtils-B-xQ0HnD.js";import{b as B}from"./gameConfigs-DlpfRS5r.js";import"./MInputMultiSelectCheckbox-D_9f7ub1.js";import"./MInputCheckbox-BqateWtE.js";import"./index-B_QkKjtG.js";import"./MInputHintMessage-DbuBS4Kn.js";import"./MInputSingleSelectRadio-BukGu4ZH.js";import"./index-CDBqmjrS.js";import"./MInputText-CzhsT8yb.js";import"./debounce-B8gTqdZO.js";import"./isSymbol-B7ZrWRtH.js";import"./utils-Dwlepb3M.js";import"./_baseIteratee-BXhw53re.js";import"./toString-DMHXP3G8.js";import"./identity-DKeuBCMA.js";import"./button-group-BUOztpby.js";const T=D({__name:"GameConfigBuildLogCard",props:{gameConfigId:{}},setup(x,{expose:t}){t();const v=x,{data:n}=y(B(v.gameConfigId)),M=w(()=>n.value?.contents===null),L=w(()=>M.value?[]:n.value?.contents.metaData.buildReport?.buildMessages??void 0),p=["message","sheetName","configKey","columnHint"],e=[a.asUnsorted(),new a("Message","message",l.Ascending),new a("Message","message",l.Descending),new a("Warning Level","level",l.Ascending),new a("Warning Level","level",l.Descending),new a("Library","sheetName",l.Ascending),new a("Library","sheetName",l.Descending),new a("Config Key","configKey",l.Ascending),new a("Config Key","configKey",l.Descending),new a("Column","columnHint",l.Ascending),new a("Column","columnHint",l.Descending)],I=w(()=>[new S("level",[new g("Verbose",i=>i.level==="Verbose"),new g("Debug",i=>i.level==="Debug"),new g("Information",i=>i.level==="Information"),new g("Warning",i=>i.level==="Warning"),new g("Error",i=>i.level==="Error")])]);function h(i){return{Verbose:"neutral",Debug:"neutral",Information:"primary",Warning:"warning",Error:"danger"}[i]??"danger"}function k(i){return!!i&&(i.startsWith("http://")||i.startsWith("https://"))}const C={props:v,gameConfigData:n,buildMessagesMissing:M,buildMessages:L,searchFields:p,sortOptions:e,filterSets:I,messageLevelBadgeVariant:h,isUrl:k,computed:w,get MetaListFilterOption(){return g},get MetaListFilterSet(){return S},get MetaListSortOption(){return a},get MetaListSortDirection(){return l},get MetaListCard(){return K},get MBadge(){return N},get MClipboardCopy(){return b},get MCollapse(){return V},get MListItem(){return O},get MList(){return F},get MTextButton(){return U},get useSubscription(){return y},get getSingleGameConfigCountsSubscriptionOptions(){return B}};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),H={key:0},j={key:0,class:"tw-pt-3"},P={class:"tw-mx-3 tw-flex tw-items-center tw-justify-between"},q={class:"tw-px-3 tw-text-xs"},z={key:1,class:"tw-pt-3"},J={class:"tw-px-3 tw-text-xs"},Q={class:"tw-ml-4"},X={class:"tw-ml-4"},Y={class:"tw-ml-4"},Z={class:"tw-ml-4"},$={key:0,class:"tw-ml-4"},R={key:2,class:"tw-pt-3"},ee={class:"tw-px-3 tw-text-xs"},te={class:"tw-ml-4"},ne={class:"tw-ml-4"},se={class:"tw-ml-4"};function ie(x,t,v,n,M,L){const p=W("fa-icon");return d(),_(n.MetaListCard,{title:"Build Log",description:"Messages generated during the config build process. Errors will cause the build to fail.",icon:"clipboard-list",itemList:n.buildMessages,searchFields:n.searchFields,sortOptions:n.sortOptions,filterSets:n.filterSets,emptyMessage:n.buildMessagesMissing?"Logs not available.":"No log entries.","data-testid":"game-config-build-log-card"},{"item-card":r(({item:e})=>[m(n.MCollapse,{extraMListItemMargin:""},{header:r(()=>[m(n.MListItem,{noLeftPadding:""},A({"top-right":r(()=>[m(n.MBadge,{variant:n.messageLevelBadgeVariant(e.level)},{default:r(()=>[u(o(e.level),1)],void 0,!0),_:2},1032,["variant"])]),"bottom-right":r(()=>[n.isUrl(e.locationUrl)?(d(),_(n.MTextButton,{key:0,to:e.locationUrl||""},{default:r(()=>[t[0]||(t[0]=u("View source ")),m(p,{class:"tw-ml-1",icon:"external-link-alt"})],void 0,!0),_:2},1032,["to"])):c("",!0)]),default:r(()=>[s("span",{class:E(["tw-font-normal",{"tw-text-red-500":n.messageLevelBadgeVariant(e.level)==="danger"}])},o(e.message),3)],void 0,!0),_:2},[e.itemId?{name:"bottom-left",fn:r(()=>[u(o(e.itemId)+" in "+o(e.shortSource)+" ",1),e.variantId?(d(),f("span",H,"("+o(e.variantId)+")",1)):c("",!0)]),key:"0"}:void 0]),1024)]),default:r(()=>[m(n.MList,{class:"tw-bg-neutral-100","show-border":""},{default:r(()=>[e.exception?(d(),f("div",j,[s("div",P,[t[1]||(t[1]=s("div",{class:"tw-font-mono tw-text-xs tw-text-neutral-500"},"// raw_error",-1)),e.exception?(d(),_(n.MClipboardCopy,{key:0,contents:`${e.exception}`},null,8,["contents"])):c("",!0)]),s("pre",q,o(e.exception),1)])):c("",!0),e.sourceInfo||e.sourceLocation||e.locationUrl?(d(),f("div",z,[t[5]||(t[5]=s("div",{class:"tw-ml-3 tw-font-mono tw-text-xs tw-text-neutral-500"},"// message_source",-1)),s("pre",J,[t[3]||(t[3]=s("div",null,"{",-1)),s("div",Q,'"source": "'+o(e.sourceInfo)+'"',1),s("div",X,'"location": "'+o(e.sourceLocation)+'"',1),s("div",Y,'"item": "'+o(e.itemId)+'"',1),s("div",Z,'"variant": '+o(e.variantId?`"${e.variantId}"`:"null"),1),e.locationUrl?(d(),f("div",$,[t[2]||(t[2]=u('"url":')),m(n.MTextButton,{to:e.locationUrl},{default:r(()=>[u('"'+o(e.locationUrl)+'"',1)],void 0,!0),_:2},1032,["to"])])):c("",!0),t[4]||(t[4]=s("div",null,"}",-1))])])):c("",!0),e.callerFileName?(d(),f("div",R,[t[8]||(t[8]=s("div",{class:"tw-ml-3 tw-font-mono tw-text-xs tw-text-neutral-500"},"// callsite",-1)),s("pre",ee,[t[6]||(t[6]=s("div",null,"{",-1)),s("div",te,'"function": "'+o(e.callerMemberName)+'"',1),s("div",ne,'"file": "'+o(e.callerFileName)+'"',1),s("div",se,'"line": "'+o(e.callerLineNumber)+'"',1),t[7]||(t[7]=s("div",null,"}",-1))])])):c("",!0)],void 0,!0),_:2},1024)],void 0,!0),_:2},1024)]),_:1},8,["itemList","filterSets","emptyMessage"])}const Se=G(T,[["render",ie],["__file","GameConfigBuildLogCard.vue"]]);export{Se as default};
