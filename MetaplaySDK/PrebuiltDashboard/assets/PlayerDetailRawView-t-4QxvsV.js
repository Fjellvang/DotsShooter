import{d as P,aj as w,c as d,f as M,h as m,ad as y,ak as _,M as x,ac as b,q as h,ai as B,s as R,v as L,al as C,o as n,e as o,w as a,k as u,n as S,a as E,r as T,p,t as D,F as I,l as N,_ as O}from"./index-B7jvAjdE.js";import{M as j,a as A}from"./MViewContainer-BTeE2xDT.js";import F from"./MetaRawData-CedjqGjJ.js";import"./utils-Dwlepb3M.js";const G=P({__name:"PlayerDetailRawView",setup(k,{expose:t}){t();const f=y(),e=w(),c=d(()=>C(e.params.id)),l=M();m(async()=>{const r=await f.get(`/players/${c.value}/raw`);l.value=Object.values(r.data)});const i=d(()=>l.value?.reduce((r,s)=>r+(s.error?1:0),0)??0),g=d(()=>{if(l.value){for(let r=0;r<l.value.length;r++)if(l.value[r].error)return r}return-1});function V(r){const s=new _(r.error.title,"");return r.error?.details&&s.addDetail("Details",r.error.details),s}const v={gameServerApi:f,route:e,playerId:c,detailEntries:l,errorCount:i,firstErrorIndex:g,errorToDisplayError:V,computed:d,onMounted:m,ref:M,get useRoute(){return w},get useGameServerApi(){return y},get MetaRawData(){return F},get DisplayError(){return _},get MBadge(){return x},get MCard(){return b},get MCollapse(){return h},get MErrorCallout(){return B},get MList(){return R},get MListItem(){return L},get MPageOverviewCard(){return j},get MViewContainer(){return A},get routeParamToSingleValue(){return C}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),q={key:0};function z(k,t,f,e,c,l){return n(),o(e.MViewContainer,{"is-loading":!e.detailEntries},{overview:a(()=>[u(e.MPageOverviewCard,{title:"Raw Player Details",subtitle:`There were a total of ${e.errorCount} errors encountered when trying to retrieve this player's details.`,id:e.playerId,"data-testid":"raw-player-overview-card"},{default:a(()=>t[0]||(t[0]=[S("p",{class:"tw-text-sm tw-text-neutral-500"},"This page allows you to inspect a player's details even when the server is unable to correctly deserialize the player's data.",-1)]),void 0,!0),_:1},8,["subtitle","id"])]),default:a(()=>[e.detailEntries?(n(),o(e.MCard,{key:0,title:"Technical Details",noBodyPadding:"","data-testid":"raw-player-technical-details-card"},{default:a(()=>[u(e.MList,null,{default:a(()=>[(n(!0),E(I,null,T(e.detailEntries,(i,g)=>(n(),o(e.MCollapse,{key:i.title,"is-open-by-default":e.firstErrorIndex===g,"extra-m-list-item-margin":""},{header:a(()=>[u(e.MListItem,{noLeftPadding:""},{badge:a(()=>[i.data?(n(),o(e.MBadge,{key:0,variant:"success"},{default:a(()=>t[1]||(t[1]=[p("Valid")]),void 0,!0),_:1})):(n(),o(e.MBadge,{key:1,variant:"danger"},{default:a(()=>t[2]||(t[2]=[p("Not valid")]),void 0,!0),_:1}))]),default:a(()=>[p(D(i.title),1)],void 0,!0),_:2},1024)]),default:a(()=>[i.data?(n(),E("pre",q,D(i.data),1)):(n(),o(e.MErrorCallout,{key:1,error:e.errorToDisplayError(i)},null,8,["error"]))],void 0,!0),_:2},1032,["is-open-by-default"]))),128))],void 0,!0),_:1})],void 0,!0),_:1})):N("",!0),u(e.MetaRawData,{"kv-pair":e.detailEntries,name:"detailEntries"},null,8,["kv-pair"])],void 0,!0),_:1},8,["is-loading"])}const U=O(G,[["render",z],["__file","PlayerDetailRawView.vue"]]);export{U as default};
