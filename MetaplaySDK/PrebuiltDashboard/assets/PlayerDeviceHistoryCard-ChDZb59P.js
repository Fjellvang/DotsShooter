import{d as D,x as w,c as y,s as C,v as O,q as P,b as _,o,e as b,w as s,k as n,p as g,a as r,l as v,n as l,t as d,F as H,r as F,_ as I}from"./index-B7jvAjdE.js";import{M,a as L,b as k}from"./metaListUtils-B-xQ0HnD.js";import{a as x}from"./players-CydHenLG.js";const N=D({__name:"PlayerDeviceHistoryCard",props:{playerId:{}},setup(h,{expose:i}){i();const p=h,{data:e}=w(x(p.playerId)),m=y(()=>e.value.model.deviceHistory?Object.keys(e.value.model.deviceHistory).map(t=>Object.assign({id:t},e.value.model.deviceHistory[t])):[]),S=["deviceModel","id"],f=[new M("Last login ","lastLoginAt",L.Ascending),new M("Last login ","lastLoginAt",L.Descending)],c=y(()=>[k.asDynamicFilterSet(m.value,"Platform",t=>t.clientPlatform)]),u={props:p,playerData:e,allDevices:m,searchFields:S,sortOptions:f,filterSets:c,computed:y,get MetaListFilterSet(){return k},get MetaListSortDirection(){return L},get MetaListSortOption(){return M},get MList(){return C},get MListItem(){return O},get MCollapse(){return P},get useSubscription(){return w},get getSinglePlayerSubscriptionOptions(){return x}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),A={key:0,class:"tw-text-orange-500"},B={key:0},V={key:0},j={key:1,class:"tw-italic tw-text-neutral-500"},T={key:0,class:"tw-text-xs tw-text-neutral-500"},q={key:1,class:"tw-text-center tw-italic tw-text-neutral-400"};function E(h,i,p,e,m,S){const f=_("fa-icon"),c=_("meta-time"),u=_("meta-list-card");return e.playerData?(o(),b(u,{key:0,title:"Device History",icon:"tablet-alt",itemList:e.allDevices,searchFields:e.searchFields,sortOptions:e.sortOptions,filterSets:e.filterSets,defaultSortOption:1,emptyMessage:`${e.playerData.model.playerName||"n/a"} has no device history.`,"data-testid":"player-device-history-card"},{"item-card":s(({item:t})=>[n(e.MCollapse,{extraMListItemMargin:""},{header:s(()=>[n(e.MListItem,{noLeftPadding:""},{"top-right":s(()=>[i[0]||(i[0]=g("Last login ")),n(c,{date:t.lastLoginAt},null,8,["date"])]),"bottom-left":s(()=>[t.incompleteHistory?(o(),r("div",A,"Note: This is an old device and we don't have a full login history for it.")):v("",!0),l("div",null,d(t.id),1)]),"bottom-right":s(()=>[l("div",null,[i[1]||(i[1]=g("Created ")),n(c,{date:t.firstSeenAt},null,8,["date"])]),l("div",null,"Total logins: "+d(t.numLogins),1)]),default:s(()=>[l("span",null,[n(f,{icon:t.clientPlatform==="iOS"||t.clientPlatform==="Android"?"tablet-alt":"desktop"},null,8,["icon"]),g(" "+d(t.deviceModel),1)])],void 0,!0),_:2},1024)]),default:s(()=>[t.loginMethods&&t.loginMethods.length>0?(o(),r("div",B,[i[2]||(i[2]=l("div",{class:"tw-mb-2 tw-font-semibold"},"Login Methods History",-1)),n(e.MList,{showBorder:"",striped:""},{default:s(()=>[(o(!0),r(H,null,F(t.loginMethods,a=>(o(),b(e.MListItem,{class:"!tw-px-2.5",key:a?.id,condensed:""},{"top-right":s(()=>[a?(o(),r("span",T,d(a.id),1)):v("",!0)]),default:s(()=>[a?(o(),r("span",V,d(a.platform==="DeviceId"?"Client token":a.platform),1)):(o(),r("span",j,"No login history."))],void 0,!0),_:2},1024))),128))],void 0,!0),_:2},1024)])):(o(),r("div",q,"No login methods recorded for this device."))],void 0,!0),_:2},1024)]),_:1},8,["itemList","filterSets","emptyMessage"])):v("",!0)}const K=I(N,[["render",E],["__file","PlayerDeviceHistoryCard.vue"]]);export{K as default};
