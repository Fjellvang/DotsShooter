import{d as v,x as y,c as _,ad as N,v as b,a8 as S,ae as g,b as T,o as r,a as o,k as p,w as a,p as i,t as n,_ as k}from"./index-B7jvAjdE.js";import{a as w}from"./players-CydHenLG.js";const x=v({__name:"PlayerNftsCard",props:{playerId:{}},setup(m,{expose:s}){s();const d=N(),t=m,{data:l,refresh:u}=y(w(t.playerId)),c=_(()=>l.value?.nfts),{showSuccessNotification:e}=g();async function h(){e("NFT ownership update triggered. It might take a few moments."),await d.post(`players/${t.playerId}/refreshOwnedNfts`),e("NFT ownerships updated."),u()}const f={gameServerApi:d,props:t,playerData:l,playerRefresh:u,playerNfts:c,showSuccessNotification:e,refreshOwnership:h,computed:_,get useGameServerApi(){return N},get MListItem(){return b},get MTextButton(){return S},get useNotifications(){return g},get useSubscription(){return y},get getSinglePlayerSubscriptionOptions(){return w}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),I={key:0},M={key:1,class:"tw-italic"},C={key:0},F={key:1,class:"tw-italic"};function B(m,s,d,t,l,u){const c=T("meta-list-card");return r(),o("div",null,[p(c,{class:"mt-2",title:"NFTs",icon:"cubes",tooltip:`Shows NFTs owned by ${t.playerData.model.playerName||"n/a"}.`,itemList:t.playerNfts,emptyMessage:`${t.playerData.model.playerName||"n/a"} doesn't have any NFTs.`,permission:"api.players.view","data-testid":"player-nfts-card"},{"item-card":a(({item:e})=>[p(t.MListItem,{avatarUrl:e.imageUrl},{"top-right":a(()=>[i(n(e.collectionId)+"/"+n(e.tokenId),1)]),"bottom-left":a(()=>[e.description?(r(),o("div",C,n(e.description),1)):(r(),o("span",F,"No description."))]),"bottom-right":a(()=>[p(t.MTextButton,{permission:"api.nft.view",to:`/web3/nft/${e.collectionId}/${e.tokenId}`,"data-testid":"view-nft"},{default:a(()=>s[0]||(s[0]=[i("View NFT")]),void 0,!0),_:2},1032,["to"])]),default:a(()=>[e.name?(r(),o("span",I,n(e.name),1)):(r(),o("span",M,"Unnamed "+n(e.typeName),1))],void 0,!0),_:2},1032,["avatarUrl"])]),description:a(()=>[s[2]||(s[2]=i("NFT ownerships update automatically but you can also ")),p(t.MTextButton,{permission:"api.nft.refresh_from_ledger",onClick:t.refreshOwnership,"data-testid":"nft-refresh-button"},{default:a(()=>s[1]||(s[1]=[i("refresh now")]),void 0,!0),_:1}),s[3]||(s[3]=i("."))]),_:1},8,["tooltip","itemList","emptyMessage"])])}const L=k(x,[["render",B],["__file","PlayerNftsCard.vue"]]);export{L as default};
