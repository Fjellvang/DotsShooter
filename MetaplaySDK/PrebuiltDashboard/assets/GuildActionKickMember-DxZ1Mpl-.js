import{d as C,x as h,c,f as b,ad as N,M as D,v as V,ae as S,b as w,o as r,e as B,w as i,a as k,n as p,p as o,t as n,k as d,l as P,_ as L}from"./index-B7jvAjdE.js";import{M as R}from"./MActionModalButton-CvWVuTB-.js";import{g as G}from"./guilds-LGK3Q8Wf.js";import"./MActionModal-coQLkvWs.js";import"./index-fVjXqxSF.js";const j=C({__name:"GuildActionKickMember",props:{guildId:{}},setup(f,{expose:t}){t();const u=f,e=N(),{data:l,refresh:g}=h(G(u.guildId)),m=c(()=>Object.keys(l.value.model.members).length!==0),s=b([]),a=b();function I(){a.value=void 0;const M=[];for(const y in l.value.model.members){const K=l.value.model.members[y].displayName;M.push({id:y,value:{playerId:y,displayName:K}})}s.value=M}const O=c(()=>s.value[0]?.value.displayName),{showSuccessNotification:v}=S();async function x(){await e.post(`/guilds/${u.guildId}/kickMember`,{playerId:a.value?.playerId}),v(`${a.value?.displayName} kicked from ${l.value.model.displayName}.`),g()}const A=c(()=>l.value.model.lifecyclePhase==="Closed"?"Guild is closed.":m.value?void 0:"Guild has no members to kick."),_={props:u,gameServerApi:e,guildData:l,guildTriggerRefresh:g,hasMembers:m,playerOptions:s,chosenPlayer:a,resetModal:I,lastPlayerName:O,showSuccessNotification:v,kickMember:x,triggerButtonDisabledReason:A,computed:c,ref:b,get useGameServerApi(){return N},get MActionModalButton(){return R},get MBadge(){return D},get MListItem(){return V},get useNotifications(){return S},get useSubscription(){return h},get getSingleGuildSubscriptionOptions(){return G}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),F={key:0},T={key:0},E={key:1,class:"tw-text-red-500"},q={class:"tw-text-sm"};function z(f,t,u,e,l,g){const m=w("meta-input-select"),s=w("meta-no-seatbelts");return r(),B(e.MActionModalButton,{"modal-title":"Kick a Player From the Guild",action:e.kickMember,"trigger-button-label":"Kick a Member","trigger-button-disabled-tooltip":e.triggerButtonDisabledReason,variant:"warning","ok-button-label":e.playerOptions?.length>1?"Kick Player":"Kick and Close Guild","ok-button-disabled-tooltip":e.chosenPlayer?void 0:`Select a member to ${e.playerOptions?.length>1?"kick out of":"kick out and close"} this guild.`,permission:"api.guilds.kick_member",onShow:e.resetModal,"data-testid":"action-kick-member"},{default:i(()=>[e.playerOptions?(r(),k("div",F,[e.playerOptions.length>=2?(r(),k("p",T,[p("i",null,[o("Note: Kicking all "+n(e.playerOptions.length)+" members from ",1),d(e.MBadge,null,{default:i(()=>[o(n(e.guildData.model.displayName),1)],void 0,!0),_:1}),t[1]||(t[1]=o(" will also automatically close it."))])])):(r(),k("p",E,[p("i",null,[t[2]||(t[2]=o("Note: ")),d(e.MBadge,{variant:"danger"},{default:i(()=>[o(n(e.lastPlayerName),1)],void 0,!0),_:1}),t[3]||(t[3]=o(" is the last player in ")),d(e.MBadge,null,{default:i(()=>[o(n(e.guildData.model.displayName),1)],void 0,!0),_:1}),t[4]||(t[4]=o(" and kicking them will also close the guild."))])])),t[5]||(t[5]=p("div",{class:"tw-my-2 tw-font-semibold"},"Select a Guild Member",-1)),d(m,{value:e.chosenPlayer,options:e.playerOptions,placeholder:"Select a player...",searchFields:["playerId","displayName"],onInput:t[0]||(t[0]=a=>e.chosenPlayer=a)},{option:i(({option:a})=>[d(e.MListItem,{class:"!tw-px-0 !tw-py-0"},{"top-right":i(()=>[o(n(a?.playerId),1)]),default:i(()=>[p("span",q,n(a?.displayName),1)],void 0,!0),_:2},1024)]),_:1},8,["value","options"]),e.chosenPlayer?(r(),B(s,{key:2,class:"tw-mt-4",name:e.chosenPlayer.displayName},null,8,["name"])):P("",!0)])):P("",!0)],void 0,!0),_:1},8,["trigger-button-disabled-tooltip","ok-button-label","ok-button-disabled-tooltip"])}const X=L(j,[["render",z],["__file","GuildActionKickMember.vue"]]);export{X as default};
