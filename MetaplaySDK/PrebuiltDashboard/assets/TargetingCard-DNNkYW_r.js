import{d as N,x as T,cn as A,c as s,v as O,a8 as h,aU as b,b as k,o as c,e as p,w as i,k as w,p as a,t as f,l as z,_ as D}from"./index-B7jvAjdE.js";import{M as m,a as S}from"./metaListUtils-B-xQ0HnD.js";import{M as I}from"./MetaAudienceSizeEstimate-CCTh_xY2.js";const B=N({__name:"TargetingCard",props:{targetCondition:{},ownerTitle:{default:"This entity"}},setup(y,{expose:n}){n();const r=y,e=b(),{data:o}=T(A()),_=["info.displayName","info.description"],g=[m.asUnsorted(),new m("Name","info.displayName",S.Ascending),new m("Name","info.displayName",S.Descending)],t=s(()=>u.value?"ALL":"ANY"),u=s(()=>r.targetCondition?.requireAllSegments),v=s(()=>r.targetCondition?.requireAnySegment),d=s(()=>u.value??v.value),x=s(()=>e.doesHavePermission("api.segmentation.view")?o.value?d.value?d.value.map(L=>{let l=o.value.segments.find(C=>C.info.segmentId===L);return l===void 0&&(l={missing:{segment:L}}),l}):[]:void 0:[]),M={props:r,permissions:e,playerSegmentsData:o,searchFields:_,sortOptions:g,anyOrAll:t,segmentAllList:u,segmentAnyList:v,targetSegments:d,items:x,computed:s,get MetaListSortDirection(){return S},get MetaListSortOption(){return m},get MListItem(){return O},get MTextButton(){return h},get usePermissions(){return b},get useSubscription(){return T},get getPlayerSegmentsSubscriptionOptions(){return A},MetaAudienceSizeEstimate:I};return Object.defineProperty(M,"__isScriptSetup",{enumerable:!1,value:!0}),M}});function E(y,n,r,e,o,_){const g=k("meta-list-card");return e.playerSegmentsData?(c(),p(g,{key:0,title:`Segments: match ${e.anyOrAll}`,icon:"user-tag",itemList:e.items,searchFields:e.searchFields,sortOptions:e.sortOptions,emptyMessage:`${r.ownerTitle} has no targeting.`,pageSize:8,permission:"api.segmentation.view","data-testid":"targeting-card"},{"item-card":i(t=>[t.item.missing?(c(),p(e.MListItem,{key:1},{"bottom-left":i(()=>n[1]||(n[1]=[a("This segment is missing in the currently active game config.")])),default:i(()=>[a(f(t.item.missing.segment),1)],void 0,!0),_:2},1024)):(c(),p(e.MListItem,{key:0},{"top-right":i(()=>[w(e.MetaAudienceSizeEstimate,{sizeEstimate:t.item.sizeEstimate,small:""},null,8,["sizeEstimate"])]),"bottom-left":i(()=>[a(f(t.item.info.description),1)]),"bottom-right":i(()=>[w(e.MTextButton,{to:`/segments/${t.item.info.segmentId}`,permission:"api.segmentation.view"},{default:i(()=>n[0]||(n[0]=[a("View segment")]),void 0,!0),_:2},1032,["to"])]),default:i(()=>[a(f(t.item.info.displayName),1)],void 0,!0),_:2},1024))]),_:1},8,["title","itemList","emptyMessage"])):z("",!0)}const U=D(B,[["render",E],["__file","TargetingCard.vue"]]);export{U as T};
