import{d as N,f,C as r,N as m,h as b,bf as p,o as s,a as I,n as M,$ as E,t as v,k as w,b5 as g,b6 as S,e as h,w as C,a2 as y,p as x,_ as H}from"./index-B7jvAjdE.js";import{M as U}from"./MInputDateTime-DL6Zd7-d.js";import{M as L}from"./MInputDuration-C704TlZG.js";import{M as O}from"./MInputHintMessage-DbuBS4Kn.js";import{M as B}from"./MInputSwitch-C-Z-JJsG.js";const A=N({__name:"MInputDurationOrEndDateTime",props:{modelValue:{},referenceDateTime:{default:"utcNow"},inputMode:{default:"duration"},label:{default:void 0},disabled:{type:Boolean},hintMessage:{default:void 0},durationTitle:{default:"Duration"},dateTimeTitle:{default:"End"}},emits:["update:modelValue","update:duration","update:endDateTime"],setup(c,{expose:i,emit:a}){i();const e=c,l=a,D=f(e.inputMode);r(()=>e.inputMode,t=>{D.value=t},{immediate:!0});const n=f(e.referenceDateTime==="utcNow"?m.now():e.referenceDateTime);r(()=>e.referenceDateTime,t=>{n.value=t==="utcNow"?m.now():t});let T;b(()=>{T=setInterval(()=>{e.referenceDateTime==="utcNow"&&D.value==="duration"&&(n.value=m.now(),d.value=o(e.modelValue,n.value))},1e3)}),p(()=>{clearInterval(T)});const d=f(o(e.modelValue,n.value));function o(t,u){return u.plus(t)}r(()=>e.modelValue,t=>{d.value=o(t,n.value)}),r(()=>e.referenceDateTime,t=>{d.value=o(e.modelValue,t==="utcNow"?m.now():t)});function V(t){t&&(d.value=o(t,n.value),l("update:modelValue",t),l("update:duration",t))}function k(t){const u=t;d.value=u,l("update:modelValue",u.diff(n.value,["days","hours","minutes"])),l("update:endDateTime",u)}const _={props:e,emit:l,internalInputMode:D,internalReferenceDateTime:n,get intervalHandle(){return T},set intervalHandle(t){T=t},internalDateTime:d,getSelectedDurationAsDateTime:o,onDurationChanged:V,onDateTimeChanged:k,get DateTime(){return m},onMounted:b,onUnmounted:p,ref:f,watch:r,MInputDateTime:U,MInputDuration:L,MInputHintMessage:O,MInputSwitch:B};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),j={class:E(["tw-flex tw-justify-between"])},z={key:0},F={key:1};function W(c,i,a,e,l,D){return s(),I("div",null,[M("div",j,[M("label",{class:E(["tw-block tw-text-sm tw-font-bold tw-leading-6 tw-mb-1",{"tw-text-neutral-400":a.disabled,"tw-text-neutral-900":!a.disabled}])},[a.label?(s(),I("span",z,v(a.label),1)):(s(),I("span",F,v(e.internalInputMode==="duration"?a.durationTitle:`${a.dateTimeTitle} (UTC)`),1))],2),M("div",null,[M("span",{class:"tw-mr-2 tw-text-xs",onClick:i[0]||(i[0]=n=>e.internalInputMode=e.internalInputMode==="duration"?"endDateTime":"duration")},"Exact date picker"),w(e.MInputSwitch,{class:"-tw-mb-1","model-value":e.internalInputMode==="endDateTime",size:"extraSmall","onUpdate:modelValue":i[1]||(i[1]=n=>e.internalInputMode=n?"endDateTime":"duration")},null,8,["model-value"])])]),g(w(e.MInputDuration,{"model-value":a.modelValue,disabled:a.disabled,"onUpdate:modelValue":e.onDurationChanged},null,8,["model-value","disabled"]),[[S,e.internalInputMode==="duration"]]),g(w(e.MInputDateTime,{"model-value":e.internalDateTime,"min-date-time":a.referenceDateTime,disabled:a.disabled,"onUpdate:modelValue":e.onDateTimeChanged},null,8,["model-value","min-date-time","disabled"]),[[S,e.internalInputMode==="endDateTime"]]),e.internalInputMode==="duration"?(s(),h(e.MInputHintMessage,{key:0},{default:C(()=>[y(c.$slots,"duration-hint-message",{dateTime:e.internalDateTime.toUTC().toLocaleString(e.DateTime.DATETIME_FULL_WITH_SECONDS)},()=>[x("Selected duration will last until "+v(e.internalDateTime.toUTC().toLocaleString(e.DateTime.DATETIME_FULL_WITH_SECONDS)),1)])],void 0,!0),_:3})):(s(),h(e.MInputHintMessage,{key:1},{default:C(()=>[y(c.$slots,"end-time-hint-message",{duration:a.modelValue.toHuman({listStyle:"long",unitDisplay:"short"})},()=>[x("Selected end time is "+v(a.modelValue.toHuman({listStyle:"long",unitDisplay:"short"}))+" after start time.",1)])],void 0,!0),_:3}))])}const K=H(A,[["render",W],["__file","MInputDurationOrEndDateTime.vue"]]);export{K as M};
