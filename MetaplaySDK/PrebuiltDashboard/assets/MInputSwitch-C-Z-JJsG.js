import{ar as F,as as N,at as M,au as R,aN as L,ay as l,aO as K,aP as B,aF as q,aQ as A,aR as X,aL as j,aS as G,aT as U,d as Q,an as C,c as d,ap as E,ao as y,aq as T,aU as I,L as Y,o as J,e as W,w as Z,n as p,m as g,t as $,_ as ee}from"./index-B7jvAjdE.js";import{t as te,d as ae}from"./index-B_QkKjtG.js";var _=F("switch").parts("root","label","control","thumb"),m=_.build(),n=N({getRootId:e=>e.ids?.root??`switch:${e.id}`,getLabelId:e=>e.ids?.label??`switch:${e.id}:label`,getThumbId:e=>e.ids?.thumb??`switch:${e.id}:thumb`,getControlId:e=>e.ids?.control??`switch:${e.id}:control`,getHiddenInputId:e=>e.ids?.hiddenInput??`switch:${e.id}:input`,getRootEl:e=>n.getById(e,n.getRootId(e)),getHiddenInputEl:e=>n.getById(e,n.getHiddenInputId(e))});function x(e,s,a){const t=e.context.isDisabled,r=e.context.readOnly,o=e.context.checked,u=!t&&e.context.focused,f=!t&&e.context.focusVisible,c={"data-active":l(e.context.active),"data-focus":l(u),"data-focus-visible":l(f),"data-readonly":l(r),"data-hover":l(e.context.hovered),"data-disabled":l(t),"data-state":e.context.checked?"checked":"unchecked","data-invalid":l(e.context.invalid)};return{checked:o,disabled:t,focused:u,setChecked(i){s({type:"CHECKED.SET",checked:i,isTrusted:!1})},toggleChecked(){s({type:"CHECKED.TOGGLE",checked:o,isTrusted:!1})},getRootProps(){return a.label({...m.root.attrs,...c,dir:e.context.dir,id:n.getRootId(e.context),htmlFor:n.getHiddenInputId(e.context),onPointerMove(){t||s({type:"CONTEXT.SET",context:{hovered:!0}})},onPointerLeave(){t||s({type:"CONTEXT.SET",context:{hovered:!1}})},onClick(i){if(t)return;K(i)===n.getHiddenInputEl(e.context)&&i.stopPropagation()}})},getLabelProps(){return a.element({...m.label.attrs,...c,dir:e.context.dir,id:n.getLabelId(e.context)})},getThumbProps(){return a.element({...m.thumb.attrs,...c,dir:e.context.dir,id:n.getThumbId(e.context),"aria-hidden":!0})},getControlProps(){return a.element({...m.control.attrs,...c,dir:e.context.dir,id:n.getControlId(e.context),"aria-hidden":!0})},getHiddenInputProps(){return a.input({id:n.getHiddenInputId(e.context),type:"checkbox",required:e.context.required,defaultChecked:o,disabled:t,"aria-labelledby":n.getLabelId(e.context),"aria-invalid":e.context.invalid,name:e.context.name,form:e.context.form,value:e.context.value,style:B,onFocus(){const i=U();s({type:"CONTEXT.SET",context:{focused:!0,focusVisible:i}})},onBlur(){s({type:"CONTEXT.SET",context:{focused:!1,focusVisible:!1}})},onClick(i){if(r){i.preventDefault();return}const b=i.currentTarget.checked;s({type:"CHECKED.SET",checked:b,isTrusted:!0})}})}}}var{not:S}=q;function D(e){const s=M(e);return R({id:"switch",initial:"ready",context:{checked:!1,label:"switch",value:"on",disabled:!1,...s,fieldsetDisabled:!1,focusVisible:!1},computed:{isDisabled:a=>a.disabled||a.fieldsetDisabled},watch:{disabled:"removeFocusIfNeeded",checked:"syncInputElement"},activities:["trackFormControlState","trackPressEvent","trackFocusVisible"],on:{"CHECKED.TOGGLE":[{guard:S("isTrusted"),actions:["toggleChecked","dispatchChangeEvent"]},{actions:["toggleChecked"]}],"CHECKED.SET":[{guard:S("isTrusted"),actions:["setChecked","dispatchChangeEvent"]},{actions:["setChecked"]}],"CONTEXT.SET":{actions:["setContext"]}},states:{ready:{}}},{guards:{isTrusted:(a,t)=>!!t.isTrusted},activities:{trackPressEvent(a){if(!a.isDisabled)return A({pointerNode:n.getRootEl(a),keyboardNode:n.getHiddenInputEl(a),isValidKey:t=>t.key===" ",onPress:()=>a.active=!1,onPressStart:()=>a.active=!0,onPressEnd:()=>a.active=!1})},trackFocusVisible(a){if(!a.isDisabled)return X({root:n.getRootNode(a)})},trackFormControlState(a,t,{send:r,initialContext:o}){return te(n.getHiddenInputEl(a),{onFieldsetDisabledChange(u){a.fieldsetDisabled=u},onFormReset(){r({type:"CHECKED.SET",checked:!!o.checked,src:"form-reset"})}})}},actions:{setContext(a,t){Object.assign(a,t.context)},syncInputElement(a){const t=n.getHiddenInputEl(a);t&&(t.checked=!!a.checked)},removeFocusIfNeeded(a){a.disabled&&a.focused&&(a.focused=!1)},setChecked(a,t){P.checked(a,t.checked)},toggleChecked(a,t){P.checked(a,!a.checked)},dispatchChangeEvent(a){const t=n.getHiddenInputEl(a);ae(t,{checked:a.checked})}}})}var ne={change:e=>{e.onCheckedChange?.({checked:e.checked})}},P={checked:(e,s)=>{j(e.checked,s)||(e.checked=s,ne.change(e))}},H=L()(["checked","dir","disabled","form","getRootNode","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]),se=G(H);const ie=Object.freeze(Object.defineProperty({__proto__:null,anatomy:_,connect:x,machine:D,props:H,splitProps:se},Symbol.toStringTag,{value:"Module"})),oe=Q({__name:"MInputSwitch",props:{modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},variant:{default:"primary"},size:{default:"default"},name:{default:void 0},permission:{default:void 0},dataTestid:{default:void 0}},emits:["update:modelValue"],setup(e,{expose:s,emit:a}){s();const t=e,{doesHavePermission:r}=I(),{internalDisabled:o}=C(d(()=>t.permission?!r(t.permission):t.disabled)),u=d(()=>{if(t.permission&&!r(t.permission))return`You need the '${t.permission}' permission to use this feature.`}),f=a,c=d(()=>({disabled:o.value,name:t.name,checked:t.modelValue})),[i,b]=E(D({id:y("switch"),onCheckedChange:({checked:h})=>{f("update:modelValue",h)}}),{context:c}),w=d(()=>x(i.value,b,T)),z=d(()=>{const k={primary:{enabled:"tw-bg-blue-500",disabled:"tw-bg-blue-200"},success:{enabled:"tw-bg-green-500",disabled:"tw-bg-green-200"},warning:{enabled:"tw-bg-orange-500",disabled:"tw-bg-orange-200"},danger:{enabled:"tw-bg-red-500",disabled:"tw-bg-red-200"}}[t.variant];return o.value?w.value.checked?k.disabled:"tw-bg-neutral-200":w.value.checked?k.enabled:"tw-bg-neutral-300"}),O=d(()=>t.size==="extraSmall"?"tw-w-6 tw-h-3":t.size==="small"?"tw-w-8 tw-h-4.5":"tw-w-11 tw-h-6"),V=d(()=>{const h={extraSmall:{size:"tw-w-2 tw-h-2",translate:"tw-translate-x-3"},small:{size:"tw-w-3.5 tw-h-3.5",translate:"tw-translate-x-3.5"},default:{size:"tw-w-5 tw-h-5",translate:"tw-translate-x-5"}};return w.value.checked?`${h[t.size].size} ${h[t.size].translate}`:`${h[t.size].size} tw-transalate-x-0`}),v={props:t,doesHavePermission:r,internalDisabled:o,tooltipContent:u,emit:f,transientContext:c,state:i,send:b,api:w,variantClasses:z,bodySizeClasses:O,thumbSizeClasses:V,computed:d,get makeIntoUniqueKey(){return y},get zagSwitch(){return ie},get normalizeProps(){return T},get useMachine(){return E},get useEnableAfterSsr(){return C},get usePermissions(){return I},MTooltip:Y};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),re=["data-testid"],de=["data-testid"],ce=["data-testid"];function le(e,s,a,t,r,o){return J(),W(t.MTooltip,{content:t.tooltipContent,"no-underline":""},{default:Z(()=>[p("label",g(t.api.getRootProps(),{class:"tw-mb-0"},{"data-testid":`${a.dataTestid}-label`}),[p("input",g(t.api.getHiddenInputProps(),{"data-testid":`${a.dataTestid}-switch-input`}),null,16,de),p("span",g(t.api.getControlProps(),{class:["tw-relative tw-inline-flex tw-flex-shrink-0 tw-rounded-full tw-border-2 tw-border-transparent tw-transition-colors tw-duration-200 tw-ease-in-out focus:tw-outline-none focus:tw-ring-2 focus:tw-ring-indigo-500 focus:tw-ring-offset-2",t.variantClasses,t.bodySizeClasses,{"tw-cursor-pointer":!t.internalDisabled,"tw-cursor-not-allowed":t.internalDisabled}],"data-testid":`${a.dataTestid}-switch-control`}),[p("span",g(t.api.getThumbProps(),{class:["tw-pointer-events-none tw-inline-block tw-transform tw-rounded-full tw-bg-white tw-shadow tw-ring-0 tw-transition tw-duration-200 tw-ease-in-out",t.thumbSizeClasses,{"tw-bg-neutral-300":t.internalDisabled}]}),null,16)],16,ce),p("span",g(t.api.getLabelProps(),{class:"tw-sr-only"}),[p("span",null,$(t.api.checked?"On":"Off"),1)],16)],16,re)],void 0,!0),_:1},8,["content"])}const pe=ee(oe,[["render",le],["__file","MInputSwitch.vue"]]);export{pe as M};
