import{d as M,x as g,c as f,N as h,v as D,M as w,a8 as x,b as L,o as s,e as c,w as r,k as o,p as n,t as m,a as d,l as v,n as I,_ as b}from"./index-B7jvAjdE.js";import k from"./MetaListCard-CSSWUW2Z.js";import{M as O,a as S}from"./metaListUtils-B-xQ0HnD.js";import{m as E,l as A,g as C}from"./liveOpsEventUtils-DTi4aG6g.js";import{b as y,a as P}from"./liveOpsEvents-jq8FGsN5.js";import"./MInputMultiSelectCheckbox-D_9f7ub1.js";import"./MInputCheckbox-BqateWtE.js";import"./index-B_QkKjtG.js";import"./MInputHintMessage-DbuBS4Kn.js";import"./MInputSingleSelectRadio-BukGu4ZH.js";import"./index-CDBqmjrS.js";import"./MInputText-CzhsT8yb.js";import"./debounce-B8gTqdZO.js";import"./isSymbol-B7ZrWRtH.js";import"./utils-Dwlepb3M.js";import"./_baseIteratee-BXhw53re.js";import"./toString-DMHXP3G8.js";import"./identity-DKeuBCMA.js";import"./button-group-BUOztpby.js";const N=M({__name:"OngoingPastEventsListCard",setup(_,{expose:i}){i();const{data:l}=g(y()),{data:e}=g(P()),p=f(()=>e.value?.map(t=>t.eventTypeName)??[]),T=f(()=>l.value?E(p.value,["Active","EndingSoon","InReview","Ended"],!0):[]),u=[new O("Creation time","createdAt",S.Descending),new O("Creation time","createdAt",S.Ascending)],a={liveOpsEventsData:l,liveOpsEventTypesData:e,eventTypeNames:p,ongoingAndPastLiveOpsEventFilterSets:T,sortOptions:u,get DateTime(){return h},computed:f,get MetaListSortDirection(){return S},get MetaListSortOption(){return O},get MetaListCard(){return k},get MListItem(){return D},get MBadge(){return w},get MTextButton(){return x},get useSubscription(){return g},get liveOpsEventPhaseInfos(){return A},get makeListViewFilterSets(){return E},get getDurationFormat(){return C},get getAllLiveOpsEventsSubscriptionOptions(){return y},get getLiveOpsEventTypesSubscriptionOptions(){return P}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),B={key:0},F={key:1},V={key:0},j={key:1},R={key:0};function q(_,i,l,e,p,T){const u=L("meta-time"),a=L("meta-duration");return s(),c(e.MetaListCard,{title:"Ongoing and Past Events",icon:"calendar-days",itemList:e.liveOpsEventsData?.ongoingAndPastEvents,searchFields:["displayName","description"],filterSets:e.ongoingAndPastLiveOpsEventFilterSets,sortOptions:e.sortOptions,emptyMessage:"No ongoing events right now, please create new ones.","data-testid":"past-live-ops-events-list-card"},{"item-card":r(({item:t})=>[o(e.MListItem,null,{"top-right":r(()=>[t.schedule?.isPlayerLocalTime===!0&&t.currentPhase!=="Ended"?(s(),c(e.MBadge,{key:0,variant:"primary"},{default:r(()=>i[0]||(i[0]=[n("Player Local")]),void 0,!0),_:1})):(s(),c(e.MBadge,{key:1,variant:e.liveOpsEventPhaseInfos[t.currentPhase].badgeVariant},{default:r(()=>[n(m(e.liveOpsEventPhaseInfos[t.currentPhase].displayString),1)],void 0,!0),_:2},1032,["variant"]))]),"bottom-left":r(()=>[t.description?(s(),d("div",B,m(t.description),1)):v("",!0),t.schedule!==null&&!t.schedule?.isPlayerLocalTime&&t.startTime&&t.endTime?(s(),d("div",F,[I("span",null,[i[1]||(i[1]=n("Started ")),o(u,{date:e.DateTime.fromISO(t.startTime)},null,8,["date"])]),t.hasEnded?(s(),d("span",V,[i[2]||(i[2]=n(" and ran for ")),o(a,{duration:e.DateTime.fromISO(t.endTime).diff(e.DateTime.fromISO(t.startTime)),showAs:"exactDuration",hideMilliseconds:""},null,8,["duration"]),i[3]||(i[3]=n("."))])):(s(),d("span",j,[i[4]||(i[4]=n(" and will end in ")),o(a,{duration:e.DateTime.fromISO(t.endTime).diffNow(),showAs:"exactDuration",hideMilliseconds:""},null,8,["duration"]),i[5]||(i[5]=n("."))]))])):v("",!0)]),"bottom-right":r(()=>[t.nextPhase&&t.nextPhaseTime?(s(),d("div",R,[n(m(e.liveOpsEventPhaseInfos[t.nextPhase].displayString)+" in ",1),o(a,{duration:e.DateTime.fromISO(t.nextPhaseTime).diffNow(),showAs:e.getDurationFormat(t.nextPhaseTime),hideMilliseconds:""},null,8,["duration","showAs"]),i[6]||(i[6]=n("."))])):v("",!0),o(e.MTextButton,{to:`/liveOpsEvents/${t.eventId}`,"data-testid":"view-live-ops-event"},{default:r(()=>i[7]||(i[7]=[n("View event")]),void 0,!0),_:2},1032,["to"])]),default:r(()=>[n(m(t.displayName),1)],void 0,!0),_:2},1024)]),_:1},8,["itemList","filterSets"])}const ot=b(N,[["render",q],["__file","OngoingPastEventsListCard.vue"]]);export{ot as default};
